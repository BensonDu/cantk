(function t(e,i,n){function r(s,o){if(!i[s]){if(!e[s]){var h=typeof require=="function"&&require;if(!o&&h)return h(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return r(i?i:t)},u,u.exports,t,e,i,n)}return i[s].exports}var a=typeof require=="function"&&require;for(var s=0;s<n.length;s++)r(n[s]);return r})({1:[function(t,e,i){(function(i){e.exports=spine={Spine:t("./Spine"),SpineRuntime:t("./SpineRuntime"),mesh:t("./mesh/"),Texture:t("./texture/Texture.js"),BaseTexture:t("./texture/BaseTexture.js"),Sprite:t("./sprites/Sprite.js"),Container:t("./display/Container.js"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer.js")};i.PIXI={VERSION:"3.0.11"}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Spine":3,"./SpineRuntime":45,"./display/Container.js":54,"./mesh/":59,"./renderers/canvas/CanvasRenderer.js":61,"./sprites/Sprite.js":63,"./texture/BaseTexture.js":64,"./texture/Texture.js":65}],2:[function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty;var r=typeof Object.create!=="function"?"~":false;function a(t,e,i){this.fn=t;this.context=e;this.once=i||false}function s(){}s.prototype._events=undefined;s.prototype.eventNames=function o(){var t=this._events,e=[],i;if(!t)return e;for(i in t){if(n.call(t,i))e.push(r?i.slice(1):i)}if(Object.getOwnPropertySymbols){return e.concat(Object.getOwnPropertySymbols(t))}return e};s.prototype.listeners=function h(t,e){var i=r?r+t:t,n=this._events&&this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var a=0,s=n.length,o=new Array(s);a<s;a++){o[a]=n[a].fn}return o};s.prototype.emit=function l(t,e,i,n,a,s){var o=r?r+t:t;if(!this._events||!this._events[o])return false;var h=this._events[o],l=arguments.length,u,f;if("function"===typeof h.fn){if(h.once)this.removeListener(t,h.fn,undefined,true);switch(l){case 1:return h.fn.call(h.context),true;case 2:return h.fn.call(h.context,e),true;case 3:return h.fn.call(h.context,e,i),true;case 4:return h.fn.call(h.context,e,i,n),true;case 5:return h.fn.call(h.context,e,i,n,a),true;case 6:return h.fn.call(h.context,e,i,n,a,s),true}for(f=1,u=new Array(l-1);f<l;f++){u[f-1]=arguments[f]}h.fn.apply(h.context,u)}else{var c=h.length,p;for(f=0;f<c;f++){if(h[f].once)this.removeListener(t,h[f].fn,undefined,true);switch(l){case 1:h[f].fn.call(h[f].context);break;case 2:h[f].fn.call(h[f].context,e);break;case 3:h[f].fn.call(h[f].context,e,i);break;default:if(!u)for(p=1,u=new Array(l-1);p<l;p++){u[p-1]=arguments[p]}h[f].fn.apply(h[f].context,u)}}}return true};s.prototype.on=function u(t,e,i){var n=new a(e,i||this),s=r?r+t:t;if(!this._events)this._events=r?{}:Object.create(null);if(!this._events[s])this._events[s]=n;else{if(!this._events[s].fn)this._events[s].push(n);else this._events[s]=[this._events[s],n]}return this};s.prototype.once=function f(t,e,i){var n=new a(e,i||this,true),s=r?r+t:t;if(!this._events)this._events=r?{}:Object.create(null);if(!this._events[s])this._events[s]=n;else{if(!this._events[s].fn)this._events[s].push(n);else this._events[s]=[this._events[s],n]}return this};s.prototype.removeListener=function c(t,e,i,n){var a=r?r+t:t;if(!this._events||!this._events[a])return this;var s=this._events[a],o=[];if(e){if(s.fn){if(s.fn!==e||n&&!s.once||i&&s.context!==i){o.push(s)}}else{for(var h=0,l=s.length;h<l;h++){if(s[h].fn!==e||n&&!s[h].once||i&&s[h].context!==i){o.push(s[h])}}}}if(o.length){this._events[a]=o.length===1?o[0]:o}else{delete this._events[a]}return this};s.prototype.removeAllListeners=function p(t){if(!this._events)return this;if(t)delete this._events[r?r+t:t];else this._events=r?{}:Object.create(null);return this};s.prototype.off=s.prototype.removeListener;s.prototype.addListener=s.prototype.on;s.prototype.setMaxListeners=function d(){return this};s.prefixed=r;if("undefined"!==typeof e){e.exports=s}},{}],3:[function(t,e,i){var n=t("../SpineRuntime");var r=t("../mesh/");var a=t("../SpineUtil/Matrix.js");var s=t("../utils.js");var o=t("../sprites/Sprite.js");var h=t("../texture/Texture.js");var l=t("../display/Container.js");n.Bone.yDown=true;function u(t){l.call(this);if(!t){throw new Error("The spineData param is required.")}if(typeof t==="string"){throw new Error('spineData param cant be string. Please use PIXI.spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.')}this.spineData=t;this.skeleton=new n.Skeleton(t);this.skeleton.updateWorldTransform();this.stateData=new n.AnimationStateData(t);this.state=new n.AnimationState(this.stateData);this.slotContainers=[];for(var e=0,i=this.skeleton.slots.length;e<i;e++){var r=this.skeleton.slots[e];var a=r.attachment;var s=new l;this.slotContainers.push(s);this.addChild(s);if(a instanceof n.RegionAttachment){var o=a.rendererObject.name;var h=this.createSprite(r,a);r.currentSprite=h;r.currentSpriteName=o;s.addChild(h)}else if(a instanceof n.MeshAttachment){var u=this.createMesh(r,a);r.currentMesh=u;r.currentMeshName=a.name;s.addChild(u)}else{continue}}this.autoUpdate=true}u.fromAtlas=function(t){var e=atlasParser.AnimCache[t];if(!e){throw new Error('Spine data "'+t+'" does not exist in the animation cache')}return new u(e)};u.prototype=Object.create(l.prototype);u.prototype.constructor=u;e.exports=u;u.globalAutoUpdate=false;Object.defineProperties(u.prototype,{autoUpdate:{get:function(){return this.updateTransform===u.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?u.prototype.autoUpdateTransform:l.prototype.updateTransform}}});u.prototype.update=function(t){this.state.update(t);this.state.apply(this.skeleton);this.skeleton.updateWorldTransform();var e=this.skeleton.drawOrder;var i=this.skeleton.slots;for(var r=0,o=e.length;r<o;r++){this.children[r]=this.slotContainers[e[r]]}for(r=0,o=i.length;r<o;r++){var h=i[r];var l=h.attachment;var u=this.slotContainers[r];if(!l){u.visible=false;continue}var c=l.type;if(c===n.AttachmentType.region){if(l.rendererObject){if(!h.currentSpriteName||h.currentSpriteName!==l.rendererObject.name){var p=l.rendererObject.name;if(h.currentSprite!==undefined){h.currentSprite.visible=false}h.sprites=h.sprites||{};if(h.sprites[p]!==undefined){h.sprites[p].visible=true}else{var d=this.createSprite(h,l);u.addChild(d)}h.currentSprite=h.sprites[p];h.currentSpriteName=p}}if(u.transform){var v=u.transform;var m;if(u.transform.matrix2d){m=v.matrix2d;v._dirtyVersion++;v.version=v._dirtyVersion;v.isStatic=true;v.operMode=0}else if(PIXI.TransformManual){if(v.position){v=new PIXI.TransformManual;u.transform=v}m=v.localTransform}else{if(!v._dirtyLocal){v=new PIXI.TransformStatic;u.transform=v}m=v.localTransform;v._dirtyParentVersion=-1;v._dirtyLocal=1;v._versionLocal=1}h.bone.matrix.copy(m);m.tx+=h.bone.skeleton.x;m.ty+=h.bone.skeleton.y}else{var m=u.localTransform||new a;h.bone.matrix.copy(m);m.tx+=h.bone.skeleton.x;m.ty+=h.bone.skeleton.y;u.localTransform=m;u.displayObjectUpdateTransform=f}h.currentSprite.blendMode=h.blendMode;h.currentSprite.tint=s.rgb2hex([h.r*l.r,h.g*l.g,h.b*l.b])}else if(c===n.AttachmentType.skinnedmesh||c===n.AttachmentType.mesh||c===n.AttachmentType.linkedmesh){if(!h.currentMeshName||h.currentMeshName!==l.name){var g=l.name;if(h.currentMesh!==undefined){h.currentMesh.visible=false}h.meshes=h.meshes||{};if(h.meshes[g]!==undefined){h.meshes[g].visible=true}else{var x=this.createMesh(h,l);u.addChild(x)}h.currentMesh=h.meshes[g];h.currentMeshName=g}l.computeWorldVertices(h.bone.skeleton.x,h.bone.skeleton.y,h,h.currentMesh.vertices);if(PIXI.VERSION[0]!=="3"){h.currentMesh.dirty=true}}else{u.visible=false;continue}u.visible=true;u.alpha=h.a}};u.prototype.autoUpdateTransform=function(){if(u.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now();this.update(t)}else{this.lastTime=0}l.prototype.updateTransform.call(this)};u.prototype.createSprite=function(t,e){var i=e.rendererObject;var r=i.texture;var a=new o(r);a.scale.x=e.scaleX*e.width/i.originalWidth;a.scale.y=-e.scaleY*e.height/i.originalHeight;a.rotation=e.rotation*n.degRad;a.anchor.x=.5;a.anchor.y=.5;a.position.x=e.x;a.position.y=e.y;a.alpha=e.a;t.sprites=t.sprites||{};t.sprites[i.name]=a;return a};u.prototype.createMesh=function(t,e){var i=e.rendererObject;var n=i.page.rendererObject;var a=new h(n);var s=new r.Mesh(a,new Float32Array(e.uvs.length),new Float32Array(e.uvs),new Uint16Array(e.triangles),r.Mesh.DRAW_MODES.TRIANGLES);s.canvasPadding=1.5;s.alpha=e.a;t.meshes=t.meshes||{};t.meshes[e.name]=s;return s};u.prototype.hackTextureBySlotIndex=function(t,e,i){var r=this.skeleton.slots[t];if(!r){return false}var a=r.attachment;if(!a||!a.hackRegion){return false}var s=null;if(e){s=new n.AtlasRegion;s.texture=e;s.size=i}a.hackRegion(s);var o=a.rendererObject;if(r.currentSprite){var h=r.currentSprite;h.texture=o.texture;h.scale.x=a.width/o.originalWidth;h.scale.y=-a.height/o.originalHeight}if(r.currentMesh){var l=r.currentMesh;l.texture=o.texture;for(var u=0;u<a.uvs.length;u++){l.uvs[u]=a.uvs[u]}if(PIXI.VERSION[0]!=="3"){l.indexDirty=true}else{l.dirty=true}}return true};u.prototype.hackTextureBySlotName=function(t,e,i){var n=this.skeleton.findSlotIndex(t);if(n==-1){return false}return this.hackTextureBySlotIndex(n,e,i)};function f(){var t=this.parent.worldTransform;var e=this.worldTransform;var i=this.localTransform;e.a=i.a*t.a+i.b*t.c;e.b=i.a*t.b+i.b*t.d;e.c=i.c*t.a+i.d*t.c;e.d=i.c*t.b+i.d*t.d;e.tx=i.tx*t.a+i.ty*t.c+t.tx;e.ty=i.tx*t.b+i.ty*t.d+t.ty;this.worldAlpha=this.alpha*this.parent.worldAlpha;this._currentBounds=null}},{"../SpineRuntime":45,"../SpineUtil/Matrix.js":47,"../display/Container.js":54,"../mesh/":59,"../sprites/Sprite.js":63,"../texture/Texture.js":65,"../utils.js":67}],4:[function(t,e,i){var n=t("../SpineUtil");n.Animation=function(t,e,i){this.name=t;this.timelines=e;this.duration=i};n.Animation.prototype={apply:function(t,e,i,n,r){if(n&&this.duration!=0){i%=this.duration;e%=this.duration}var a=this.timelines;for(var s=0,o=a.length;s<o;s++)a[s].apply(t,e,i,r,1)},mix:function(t,e,i,n,r,a){if(n&&this.duration!=0){i%=this.duration;e%=this.duration}var s=this.timelines;for(var o=0,h=s.length;o<h;o++)s[o].apply(t,e,i,r,a)}};n.Animation.binarySearch=function(t,e,i){var n=0;var r=Math.floor(t.length/i)-2;if(!r)return i;var a=r>>>1;while(true){if(t[(a+1)*i]<=e)n=a+1;else r=a;if(n==r)return(n+1)*i;a=n+r>>>1}};n.Animation.binarySearch1=function(t,e){var i=0;var n=t.length-2;if(!n)return 1;var r=n>>>1;while(true){if(t[r+1]<=e)i=r+1;else n=r;if(i==n)return i+1;r=i+n>>>1}};n.Animation.linearSearch=function(t,e,i){for(var n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1};e.exports=n.Animation},{"../SpineUtil":52}],5:[function(t,e,i){var n=t("../SpineUtil");n.TrackEntry=t("./TrackEntry");n.AnimationState=function(t){this.data=t;this.tracks=[];this.events=[]};n.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var i=this.tracks[e];if(!i)continue;i.time+=t*i.timeScale;if(i.previous){var n=t*i.previous.timeScale;i.previous.time+=n;i.mixTime+=n}var r=i.next;if(r){r.time=i.lastTime-r.delay;if(r.time>=0)this.setCurrent(e,r)}else{if(!i.loop&&i.lastTime>=i.endTime)this.clearTrack(e)}}},apply:function(t){t.resetDrawOrder();for(var e=0;e<this.tracks.length;e++){var i=this.tracks[e];if(!i)continue;this.events.length=0;var n=i.time;var r=i.lastTime;var a=i.endTime;var s=i.loop;if(!s&&n>a)n=a;var o=i.previous;if(!o){if(i.mix==1)i.animation.apply(t,i.lastTime,n,s,this.events);else i.animation.mix(t,i.lastTime,n,s,this.events,i.mix)}else{var h=o.time;if(!o.loop&&h>o.endTime)h=o.endTime;o.animation.apply(t,h,h,o.loop,null);var l=i.mixTime/i.mixDuration*i.mix;if(l>=1){l=1;i.previous=null}i.animation.mix(t,i.lastTime,n,s,this.events,l)}for(var u=0,f=this.events.length;u<f;u++){var c=this.events[u];if(i.onEvent)i.onEvent(e,c);if(this.onEvent)this.onEvent(e,c)}if(s?r%a>n%a:r<a&&n>=a){var p=Math.floor(n/a);if(i.onComplete)i.onComplete(e,p);if(this.onComplete)this.onComplete(e,p)}i.lastTime=i.time}},clearTracks:function(){for(var t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){if(t>=this.tracks.length)return;var e=this.tracks[t];if(!e)return;if(e.onEnd)e.onEnd(t);if(this.onEnd)this.onEnd(t);this.tracks[t]=null},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];while(t>=this.tracks.length)this.tracks.push(null);return null},setCurrent:function(t,e){var i=this._expandToIndex(t);if(i){var n=i.previous;i.previous=null;if(i.onEnd)i.onEnd(t);if(this.onEnd)this.onEnd(t);e.mixDuration=this.data.getMix(i.animation,e.animation);if(e.mixDuration>0){e.mixTime=0;if(n&&i.mixTime/i.mixDuration<.5)e.previous=n;else e.previous=i}}this.tracks[t]=e;if(e.onStart)e.onStart(t);if(this.onStart)this.onStart(t)},setAnimationByName:function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+e;return this.setAnimation(t,n,i)},setAnimation:function(t,e,i){var r=new n.TrackEntry;r.animation=e;r.loop=i;r.endTime=e.duration;this.setCurrent(t,r);return r},addAnimationByName:function(t,e,i,n){var r=this.data.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;return this.addAnimation(t,r,i,n)},addAnimation:function(t,e,i,r){var a=new n.TrackEntry;a.animation=e;a.loop=i;a.endTime=e.duration;var s=this._expandToIndex(t);if(s){while(s.next)s=s.next;s.next=a}else this.tracks[t]=a;if(r<=0){if(s)r+=s.endTime-this.data.getMix(s.animation,e);else r=0}a.delay=r;return a},hasAnimationByName:function(t){var e=this.data.skeletonData.findAnimation(t);return e!==null},getCurrent:function(t){if(t>=this.tracks.length)return null;return this.tracks[t]}};e.exports=n.AnimationState},{"../SpineUtil":52,"./TrackEntry":39}],6:[function(t,e,i){var n=t("../SpineUtil");n.AnimationStateData=function(t){this.skeletonData=t;this.animationToMixTime={}};n.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,i){var n=this.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;var r=this.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;this.setMix(n,r,i)},setMix:function(t,e,i){this.animationToMixTime[t.name+":"+e.name]=i},getMix:function(t,e){var i=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(i)?this.animationToMixTime[i]:this.defaultMix}};e.exports=n.AnimationStateData},{"../SpineUtil":52}],7:[function(t,e,i){var n=t("../SpineUtil");var r=t("../texture/Texture.js");var a=t("../SpineUtil/Rectangle.js");n.AtlasReader=t("./AtlasReader");n.AtlasPage=t("./AtlasPage");n.AtlasRegion=t("./AtlasRegion");n.Atlas=function(t,e,i){this.pages=[];this.regions=[];if(typeof t==="string"){this.addSpineAtlas.call(this,t,e,i)}};n.Atlas.prototype={addTexture:function(t,e){var i=this.pages;var r=null;for(var a=0;a<i.length;a++){if(i[a].rendererObject===e.baseTexture){r=i[a];break}}if(r===null){r=new n.AtlasPage;r.name="texturePage";var s=e.baseTexture;r.width=s.realWidth;r.height=s.realHeight;r.rendererObject=s;r.format="RGBA8888";r.minFilter=r.magFilter="Nearest";r.uWrap=n.Atlas.TextureWrap.clampToEdge;r.vWrap=n.Atlas.TextureWrap.clampToEdge;i.push(r)}var o=new n.AtlasRegion;o.name=t;o.page=r;o.texture=e;o.index=-1;this.regions.push(o);return o},addTextureHash:function(t,e){for(var i in t){if(t.hasOwnProperty(i)){this.addTexture(e&&i.indexOf(".")!==-1?i.substr(0,i.lastIndexOf(".")):i,t[i])}}},addSpineAtlas:function(t,e,i){if(typeof e!=="function"){var s=e;var o=i;e=syncImageLoaderAdapter(s,o);i=null}this.texturesLoading=0;var h=this;var l=new n.AtlasReader(t);var u=[];u.length=4;var f=null;c();function c(){while(true){var t=l.readLine();if(t===null){return i&&i(h)}t=l.trim(t);if(!t.length)f=null;else if(!f){f=new n.AtlasPage;f.name=t;if(l.readTuple(u)==2){f.width=parseInt(u[0]);f.height=parseInt(u[1]);l.readTuple(u)}else{}f.format=n.Atlas.Format[u[0]];l.readTuple(u);f.minFilter=n.Atlas.TextureFilter[u[0]];f.magFilter=n.Atlas.TextureFilter[u[1]];var s=l.readValue();f.uWrap=n.Atlas.TextureWrap.clampToEdge;f.vWrap=n.Atlas.TextureWrap.clampToEdge;if(s=="x")f.uWrap=n.Atlas.TextureWrap.repeat;else if(s=="y")f.vWrap=n.Atlas.TextureWrap.repeat;else if(s=="xy")f.uWrap=f.vWrap=n.Atlas.TextureWrap.repeat;e(t,function(t){f.rendererObject=t;if(!t.hasLoaded){t.width=f.width;t.height=f.height}h.pages.push(f);if(!f.width||!f.height){f.width=t.realWidth;f.height=t.realHeight;if(!f.width||!f.height){console.log("ERROR spine atlas page "+f.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")}}c()});break}else{var o=new n.AtlasRegion;o.name=t;o.page=f;var p=l.readValue()==="true"?6:0;l.readTuple(u);var d=parseInt(u[0]);var v=parseInt(u[1]);l.readTuple(u);var m=parseInt(u[0]);var g=parseInt(u[1]);var x=f.rendererObject.resolution;d/=x;v/=x;m/=x;g/=x;var y=new a(d,v,p?g:m,p?m:g);if(l.readTuple(u)==4){o.splits=[parseInt(u[0]),parseInt(u[1]),parseInt(u[2]),parseInt(u[3])];if(l.readTuple(u)==4){o.pads=[parseInt(u[0]),parseInt(u[1]),parseInt(u[2]),parseInt(u[3])];l.readTuple(u)}}var w=parseInt(u[0])/x;var T=parseInt(u[1])/x;l.readTuple(u);var b=parseInt(u[0])/x;var S=parseInt(u[1])/x;var A=new a(0,0,w,T);var C=new a(b,T-g-S,m,g);var M=new a(d,v,m,g);var I=M.clone();C.width=w;C.height=T;o.texture=new r(o.page.rendererObject,M,I,C,p);o.index=parseInt(l.readValue());o.texture._updateUvs();h.regions.push(o)}}}},findRegion:function(t){var e=this.regions;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},dispose:function(){var t=this.pages;for(var e=0,i=t.length;e<i;e++)t[e].rendererObject.destroy(true)},updateUVs:function(t){var e=this.regions;for(var i=0,n=e.length;i<n;i++){var r=e[i];if(r.page!=t)continue;r.texture._updateUvs()}}};n.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6};n.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6};n.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2};e.exports=n.Atlas},{"../SpineUtil":52,"../SpineUtil/Rectangle.js":50,"../texture/Texture.js":65,"./AtlasPage":9,"./AtlasReader":10,"./AtlasRegion":11}],8:[function(t,e,i){var n=t("../SpineUtil");n.RegionAttachment=t("./RegionAttachment");n.MeshAttachment=t("./MeshAttachment");n.WeightedMeshAttachment=t("./WeightedMeshAttachment");n.BoundingBoxAttachment=t("./BoundingBoxAttachment");n.AtlasAttachmentParser=function(t){this.atlas=t};n.AtlasAttachmentParser.prototype={newRegionAttachment:function(t,e,i){var r=this.atlas.findRegion(i);if(!r)throw"Region not found in atlas: "+i+" (region attachment: "+e+")";var a=new n.RegionAttachment(e);a.rendererObject=r;a.setUVs(r.u,r.v,r.u2,r.v2,r.rotate);a.regionOffsetX=r.offsetX;a.regionOffsetY=r.spineOffsetY;a.regionWidth=r.width;a.regionHeight=r.height;a.regionOriginalWidth=r.originalWidth;a.regionOriginalHeight=r.originalHeight;return a},newMeshAttachment:function(t,e,i){var r=this.atlas.findRegion(i);if(!r)throw"Region not found in atlas: "+i+" (mesh attachment: "+e+")";var a=new n.MeshAttachment(e);a.rendererObject=r;return a},newWeightedMeshAttachment:function(t,e,i){var r=this.atlas.findRegion(i);if(!r)throw"Region not found in atlas: "+i+" (skinned mesh attachment: "+e+")";var a=new n.WeightedMeshAttachment(e);a.rendererObject=r;return a},newBoundingBoxAttachment:function(t,e){return new n.BoundingBoxAttachment(e)}};e.exports=n.AtlasAttachmentParser},{"../SpineUtil":52,"./BoundingBoxAttachment":16,"./MeshAttachment":27,"./RegionAttachment":28,"./WeightedMeshAttachment":44}],9:[function(t,e,i){var n=t("../SpineUtil");n.AtlasPage=function(){};n.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0};e.exports=n.AtlasPage},{"../SpineUtil":52}],10:[function(t,e,i){var n=t("../SpineUtil");n.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)};n.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){if(this.index>=this.lines.length)return null;return this.lines[this.index++]},readValue:function(){var t=this.readLine();var e=t.indexOf(":");if(e==-1)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine();var i=e.indexOf(":");if(i==-1)throw"Invalid line: "+e;var n=0,r=i+1;for(;n<3;n++){var a=e.indexOf(",",r);if(a==-1)break;t[n]=this.trim(e.substr(r,a-r));r=a+1}t[n]=this.trim(e.substring(r));return n+1}};e.exports=n.AtlasReader},{"../SpineUtil":52}],11:[function(t,e,i){var n=t("../SpineUtil");n.AtlasRegion=function(){};n.AtlasRegion.prototype={name:null,texture:null,page:null,index:0,splits:null,pads:null};Object.defineProperties(n.AtlasRegion.prototype,{x:{get:function(){return this.texture.frame.x}},y:{get:function(){return this.texture.frame.y}},width:{get:function(){var t=this.texture;return t.crop.width}},height:{get:function(){var t=this.texture;return t.crop.height}},u:{get:function(){return this.texture._uvs.x0}},v:{get:function(){return this.texture._uvs.y0}},u2:{get:function(){return this.texture._uvs.x2}},v2:{get:function(){return this.texture._uvs.y2}},rotate:{get:function(){return!!this.texture.rotate}},offsetX:{get:function(){var t=this.texture;return t.trim?t.trim.x:0}},offsetY:{get:function(){console.warn("Deprecation Warning: @Hackerham: I guess, if you are using SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on.");return this.spineOffsetY}},pixiOffsetY:{get:function(){var t=this.texture;return t.trim?t.trim.y:0}},spineOffsetY:{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)}},originalWidth:{get:function(){var t=this.texture;if(t.trim){return t.trim.width}return t.crop.width}},originalHeight:{get:function(){var t=this.texture;if(t.trim){return t.trim.height}return t.crop.height}}});e.exports=n.AtlasRegion},{"../SpineUtil":52}],12:[function(t,e,i){var n=t("../SpineUtil");n.Curves=t("./Curves");n.Animation=t("./Animation");n.AttachmentTimeline=function(t){this.curves=new n.Curves(t);this.frames=[];this.frames.length=t;this.attachmentNames=[];this.attachmentNames.length=t};n.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e;this.attachmentNames[t]=i},apply:function(t,e,i,r,a){var s=this.frames;if(i<s[0]){if(e>i)this.apply(t,e,Number.MAX_VALUE,null,0);return}else if(e>i)e=-1;var o=i>=s[s.length-1]?s.length-1:n.Animation.binarySearch1(s,i)-1;if(s[o]<e)return;var h=this.attachmentNames[o];t.slots[this.slotIndex].setAttachment(!h?null:t.getAttachmentBySlotIndex(this.slotIndex,h))}};e.exports=n.AttachmentTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],13:[function(t,e,i){var n=t("../SpineUtil");n.AttachmentType={region:0,boundingbox:1,mesh:2,weightedmesh:3,skinnedmesh:3,linkedmesh:4,weightedlinkedmesh:5};e.exports=n.AttachmentType},{"../SpineUtil":52}],14:[function(t,e,i){var n=t("../SpineUtil");var r=t("../SpineUtil/Matrix.js");n.Bone=function(t,e,i){this.data=t;this.skeleton=e;this.parent=i;this.matrix=new r;this.setToSetupPose()};n.Bone.yDown=false;n.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,shearX:0,shearY:0,flipX:false,flipY:false,worldSignX:1,worldSignY:1,update:function(){this.rotationIK=this.rotation;this.updateWorldTransform()},updateWorldTransform:function(){var t=this.rotationIK;var e=this.scaleX;var i=this.scaleY;var r=this.x;var a=this.y;var s=t+this.shearX;var o=t+90+this.shearY;var h=Math.cos(s*n.degRad)*e,l=Math.cos(o*n.degRad)*i,u=Math.sin(s*n.degRad)*e,f=Math.sin(o*n.degRad)*i;var c=this.parent;var p=this.matrix;var d=this.skeleton;if(!c){if(d.flipX){r=-r;h=-h;l=-l}if(d.flipY!==n.Bone.yDown){a=-a;u=-u;f=-f}p.a=h;p.c=l;p.b=u;p.d=f;p.tx=r;p.ty=a;this.worldSignX=n.signum(e);this.worldSignY=n.signum(i);return}var v=c.matrix.a,m=c.matrix.c,g=c.matrix.b,x=c.matrix.d;p.tx=v*r+m*a+c.matrix.tx;p.ty=g*r+x*a+c.matrix.ty;this.worldSignX=c.worldSignX*n.signum(e);this.worldSignY=c.worldSignY*n.signum(i);var y=this.data;if(y.inheritRotation&&y.inheritScale){p.a=v*h+m*u;p.c=v*l+m*f;p.b=g*h+x*u;p.d=g*l+x*f}else{if(y.inheritRotation){v=1;m=0;g=0;x=1;do{cos=Math.cos(c.rotationIK*n.degRad);sin=Math.sin(c.rotationIK*n.degRad);var w=v*cos+m*sin;m=v*-sin+m*cos;v=w;w=g*cos+x*sin;x=g*-sin+x*cos;g=w;if(!c.data.inheritRotation)break;c=c.parent}while(c!=null);p.a=v*h+m*u;p.c=v*l+m*f;p.b=g*h+x*u;p.d=g*l+x*f}else if(y.inheritScale){v=1;m=0;g=0;x=1;do{var T=c.rotationIK;cos=Math.cos(T*n.degRad);sin=Math.sin(T*n.degRad);var b=c.scaleX,S=c.scaleY;var A=cos*b,C=-sin*S,M=sin*b,I=cos*S;w=v*A+m*M;m=v*C+m*I;v=w;w=g*A+x*M;x=g*C+x*I;g=w;if(b<0){T=-T}else{sin=-sin}w=v*cos+m*sin;m=v*-sin+m*cos;v=w;w=g*cos+x*sin;x=g*-sin+x*cos;g=w;if(!c.data.inheritScale)break;c=c.parent}while(c!=null);p.a=v*h+m*u;p.c=v*l+m*f;p.b=g*h+x*u;p.d=g*l+x*f}else{p.a=h;p.c=l;p.b=u;p.d=f}if(d.flipX){p.a=-p.a;p.c=-p.c}if(d.flipY!==n.Bone.yDown){p.b=-p.b;p.d=-p.d}}},setToSetupPose:function(){var t=this.data;this.x=t.x;this.y=t.y;this.rotation=t.rotation;this.rotationIK=this.rotation;this.scaleX=t.scaleX;this.scaleY=t.scaleY;this.shearX=t.shearX;this.shearY=t.shearY},worldToLocal:function(t){var e=this.matrix;var i=t[0]-e.tx,n=e.ty;var r=1/(e.a*e.d-e.b*e.c);t[0]=i*e.a*r-n*e.c*r;t[1]=n*e.d*r-i*e.b*r},localToWorld:function(t){var e=t[0],i=t[1];var n=this.matrix;t[0]=e*n.a+i*n.c+n.tx;t[1]=e*n.b+i*n.d+n.ty},getWorldRotationX:function(){return Math.atan2(this.matrix.b,this.matrix.a)*n.radDeg},getWorldRotationY:function(){return Math.atan2(this.matrix.d,this.matrix.c)*n.radDeg},getWorldScaleX:function(){var t=this.matrix.a;var e=this.matrix.b;return Math.sqrt(t*t+e*e)},getWorldScaleY:function(){var t=this.matrix.c;var e=this.matrix.d;return Math.sqrt(t*t+e*e)}};Object.defineProperties(n.Bone.prototype,{worldX:{get:function(){return this.matrix.tx}},worldY:{get:function(){return this.matrix.ty}}});e.exports=n.Bone},{"../SpineUtil":52,"../SpineUtil/Matrix.js":47}],15:[function(t,e,i){var n=t("../SpineUtil");n.BoneData=function(t,e){this.name=t;this.parent=e};n.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,shearX:0,shearY:0,inheritScale:true,inheritRotation:true};e.exports=n.BoneData},{"../SpineUtil":52}],16:[function(t,e,i){var n=t("../SpineUtil");n.AttachmentType=t("./AttachmentType");n.BoundingBoxAttachment=function(t){this.name=t;this.vertices=[]};n.BoundingBoxAttachment.prototype={type:n.AttachmentType.boundingbox,computeWorldVertices:function(t,e,i,n){t+=i.worldX;e+=i.worldY;var r=i.matrix.a,a=i.matrix.c,s=i.matrix.b,o=i.matrix.d;var h=this.vertices;for(var l=0,u=h.length;l<u;l+=2){var f=h[l];var c=h[l+1];n[l]=f*r+c*a+t;n[l+1]=f*s+c*o+e}}};e.exports=n.BoundingBoxAttachment},{"../SpineUtil":52,"./AttachmentType":13}],17:[function(t,e,i){var n=t("../SpineUtil");n.Animation=t("./Animation");n.Curves=t("./Curves");n.ColorTimeline=function(t){this.curves=new n.Curves(t);this.frames=[];this.frames.length=t*5};n.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,i,n,r,a){t*=5;this.frames[t]=e;this.frames[t+1]=i;this.frames[t+2]=n;this.frames[t+3]=r;this.frames[t+4]=a},apply:function(t,e,i,r,a){var s=this.frames;if(i<s[0])return;var o,h,l,u;if(i>=s[s.length-5]){var f=s.length-1;o=s[f-3];h=s[f-2];l=s[f-1];u=s[f]}else{var c=n.Animation.binarySearch(s,i,5);var p=s[c-4];var d=s[c-3];var v=s[c-2];var m=s[c-1];var g=s[c];var x=1-(i-g)/(s[c-5]-g);x=this.curves.getCurvePercent(c/5-1,x);o=p+(s[c+1]-p)*x;h=d+(s[c+2]-d)*x;l=v+(s[c+3]-v)*x;u=m+(s[c+4]-m)*x}var y=t.slots[this.slotIndex];if(a<1){y.r+=(o-y.r)*a;y.g+=(h-y.g)*a;y.b+=(l-y.b)*a;y.a+=(u-y.a)*a}else{y.r=o;y.g=h;y.b=l;y.a=u}}};e.exports=n.ColorTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],18:[function(t,e,i){var n=t("../SpineUtil");n.Curves=function(t){this.curves=[]};n.Curves.prototype={setLinear:function(t){this.curves[t*19]=0},setStepped:function(t){this.curves[t*19]=1},setCurve:function(t,e,i,n,r){var a=1/10,s=a*a,o=s*a;var h=3*a,l=3*s,u=6*s,f=6*o;var c=-e*2+n,p=-i*2+r,d=(e-n)*3+1,v=(i-r)*3+1;var m=e*h+c*l+d*o,g=i*h+p*l+v*o;var x=c*u+d*f,y=p*u+v*f;var w=d*f,T=v*f;var b=t*19;var S=this.curves;S[b++]=2;var A=m,C=g;for(var M=b+19-1;b<M;b+=2){S[b]=A;S[b+1]=C;m+=x;g+=y;x+=w;y+=T;A+=m;C+=g}},getCurvePercent:function(t,e){e=e<0?0:e>1?1:e;var i=this.curves;var n=t*19;var r=i[n];if(r===0)return e;if(r==1)return 0;n++;var a=0;for(var s=n,o=n+19-1;n<o;n+=2){a=i[n];if(a>=e){var h,l;if(n==s){h=0;l=0}else{h=i[n-2];l=i[n-1]}return l+(i[n+1]-l)*(e-h)/(a-h)}}var u=i[n-1];return u+(1-u)*(e-a)/(1-a)}};e.exports=n.Curves},{"../SpineUtil":52}],19:[function(t,e,i){var n=t("../SpineUtil");n.Animation=t("./Animation");n.DrawOrderTimeline=function(t){this.frames=[];this.frames.length=t;this.drawOrders=[];this.drawOrders.length=t};n.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e;this.drawOrders[t]=i},apply:function(t,e,i,r,a){var s=this.frames;if(i<s[0])return;var o;if(i>=s[s.length-1])o=s.length-1;else o=n.Animation.binarySearch1(s,i)-1;var h=t.drawOrder;var l=t.slots;var u=this.drawOrders[o];if(u){for(var f=0,c=u.length;f<c;f++){h[f]=u[f]}}}};e.exports=n.DrawOrderTimeline},{"../SpineUtil":52,"./Animation":4}],20:[function(t,e,i){var n=t("../SpineUtil");n.Event=function(t){this.data=t};n.Event.prototype={intValue:0,floatValue:0,stringValue:null};e.exports=n.Event},{"../SpineUtil":52}],21:[function(t,e,i){var n=t("../SpineUtil");n.EventData=function(t){this.name=t};n.EventData.prototype={intValue:0,floatValue:0,stringValue:null};e.exports=n.EventData},{"../SpineUtil":52}],22:[function(t,e,i){var n=t("../SpineUtil");n.Animation=t("./Animation");n.EventTimeline=function(t){this.frames=[];this.frames.length=t;this.events=[];this.events.length=t};n.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e;this.events[t]=i},apply:function(t,e,i,r,a){if(!r)return;var s=this.frames;var o=s.length;if(e>i){this.apply(t,e,Number.MAX_VALUE,r,a);e=-1}else if(e>=s[o-1])return;if(i<s[0])return;var h;if(e<s[0])h=0;else{h=n.Animation.binarySearch1(s,e);var l=s[h];while(h>0){if(s[h-1]!=l)break;h--}}var u=this.events;for(;h<o&&i>=s[h];h++)r.push(u[h])}};e.exports=n.EventTimeline},{"../SpineUtil":52,"./Animation":4}],23:[function(t,e,i){var n=t("../SpineUtil");n.Animation=t("./Animation");n.Curves=t("./Curves");n.FfdTimeline=function(t){this.curves=new n.Curves(t);this.frames=[];this.frames.length=t;this.frameVertices=[];this.frameVertices.length=t};n.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e;this.frameVertices[t]=i},apply:function(t,e,i,r,a){var s=t.slots[this.slotIndex];var o=s.attachment;if(o&&(!o.applyFFD||!o.applyFFD(this.attachment)))return;var h=this.frames;if(i<h[0])return;var l=this.frameVertices;var u=l[0].length;var f=s.attachmentVertices;if(f.length!=u){f=s.attachmentVertices=[];for(var c=0;c<u;c++)f.push(0);a=1}if(i>=h[h.length-1]){var p=l[h.length-1];if(a<1){for(var d=0;d<u;d++)f[d]+=(p[d]-f[d])*a}else{for(var d=0;d<u;d++)f[d]=p[d]}return}var v=n.Animation.binarySearch1(h,i);var m=h[v];var g=1-(i-m)/(h[v-1]-m);g=this.curves.getCurvePercent(v-1,g<0?0:g>1?1:g);var x=l[v-1];var y=l[v];if(a<1){for(var d=0;d<u;d++){var w=x[d];f[d]+=(w+(y[d]-w)*g-f[d])*a}}else{for(var d=0;d<u;d++){var w=x[d];f[d]=w+(y[d]-w)*g}}}};e.exports=n.FfdTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],24:[function(t,e,i){var n=t("../SpineUtil");n.IkConstraint=function(t,e){this.data=t;this.mix=t.mix;this.bendDirection=t.bendDirection;this.bones=[];for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)};n.IkConstraint.prototype={
update:function(){this.apply()},apply:function(){var t=this.target;var e=this.bones;switch(e.length){case 1:n.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:n.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix);break}}};n.IkConstraint.apply1=function(t,e,i,r){var a=t.parent?t.parent.getWorldRotationX():0;var s=t.rotation;var o=Math.atan2(i-t.worldY,e-t.worldX)*n.radDeg-a;if(t.worldSignX!=t.worldSignY!=(t.skeleton.flipX!=(t.skeleton.flipY!=n.Bone.yDown)))o=360-o;if(o>180)o-=360;else if(o<-180)o+=360;t.rotationIK=s+(o-s)*r;t.updateWorldTransform()};n.IkConstraint.apply2=function(t,e,i,r,a,s){if(s==0)return;var o=t.x,h=t.y,l=t.scaleX,u=t.scaleY,f=e.scaleX,c=e.y;var p,d,v;if(l<0){l=-l;p=180;v=-1}else{p=0;v=1}if(u<0){u=-u;v=-v}if(f<0){f=-f;d=180}else d=0;var m=t.parent;var g=m.matrix;var x,y,w,T;if(m==null){x=i-o;y=r-h;w=e.worldX-o;T=e.worldY-h}else{var b=g.a,S=g.c,A=g.b,C=g.d,M=1/(b*C-S*A);var I=g.tx,_=g.ty,k=i-I,O=r-_;x=(k*C-O*S)*M-o;y=(O*b-k*A)*M-h;k=e.worldX-I;O=e.worldY-_;w=(k*C-O*S)*M-o;T=(O*b-k*A)*M-h}var D=Math.sqrt(w*w+T*T),U=e.data.length*f,E,R;t:if(Math.abs(l-u)<=1e-4){U*=l;var P=(x*x+y*y-D*D-U*U)/(2*D*U);if(P<-1)P=-1;else if(P>1)P=1;R=Math.acos(P)*a;var b=D+U*P,B=U*Math.sin(R);E=Math.atan2(y*b-x*B,x*b+y*B)}else{c=0;var b=l*U,S=u*U,L=Math.atan2(y,x);var N=b*b,j=S*S,Y=D*D,F=x*x+y*y;var X=j*Y+N*F-N*j,W=-2*j*D,V=j-N;var C=W*W-4*V*X;if(C>=0){var H=Math.sqrt(C);if(W<0)H=-H;H=-(W+H)/2;var G=H/V,q=X/H;var K=Math.abs(G)<Math.abs(q)?G:q;if(K*K<=F){var O=Math.sqrt(F-K*K)*a;E=L-Math.atan2(O,K);R=Math.atan2(O/u,(K-D)/l);break t}}var z=0,J=Infinity,Z=0,$=0;var Q=0,tt=0,et=0,it=0;var k=D+b,nt=k*k;if(nt>tt){Q=0;tt=nt;et=k}k=D-b;nt=k*k;if(nt<J){z=Math.PI;J=nt;Z=k}var rt=Math.acos(-b*D/(N-j));k=b*Math.cos(rt)+D;var O=S*Math.sin(rt);nt=k*k+O*O;if(nt<J){z=rt;J=nt;Z=k;$=O}if(nt>tt){Q=rt;tt=nt;et=k;it=O}if(F<=(J+tt)/2){E=L-Math.atan2($*a,Z);R=z*a}else{E=L-Math.atan2(it*a,et);R=Q*a}}var at=Math.atan2(c,e.x)*v;E=(E-at)*n.radDeg+p;R=(R+at)*n.radDeg*v+d;if(E>180)E-=360;else if(E<-180)E+=360;if(R>180)R-=360;else if(R<-180)R+=360;var st=t.rotation;t.rotationIK=st+(E-st)*s;t.updateWorldTransform();st=e.rotation;e.rotationIK=st+(R-st)*s;e.updateWorldTransform()};e.exports=n.IkConstraint},{"../SpineUtil":52}],25:[function(t,e,i){var n=t("../SpineUtil")||{};n.IkConstraintData=function(t){this.name=t;this.bones=[]};n.IkConstraintData.prototype={target:null,bendDirection:1,mix:1};e.exports=n.IkConstraintData},{"../SpineUtil":52}],26:[function(t,e,i){var n=t("../SpineUtil")||{};n.Animation=t("./Animation");n.Curves=t("./Curves");n.IkConstraintTimeline=function(t){this.curves=new n.Curves(t);this.frames=[];this.frames.length=t*3};n.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,n){t*=3;this.frames[t]=e;this.frames[t+1]=i;this.frames[t+2]=n},apply:function(t,e,i,r,a){var s=this.frames;if(i<s[0])return;var o=t.ikConstraints[this.ikConstraintIndex];if(i>=s[s.length-3]){o.mix+=(s[s.length-2]-o.mix)*a;o.bendDirection=s[s.length-1];return}var h=n.Animation.binarySearch(s,i,3);var l=s[h+-2];var u=s[h];var f=1-(i-u)/(s[h+-3]-u);f=this.curves.getCurvePercent(h/3-1,f);var c=l+(s[h+1]-l)*f;o.mix+=(c-o.mix)*a;o.bendDirection=s[h+-1]}};e.exports=n.IkConstraintTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],27:[function(t,e,i){var n=t("../SpineUtil")||{};n.AttachmentType=t("./AttachmentType");n.MeshAttachment=function(t){this.name=t};n.MeshAttachment.prototype={type:n.AttachmentType.mesh,parentMesh:null,inheritFFD:false,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionUVs.length;if(!this.uvs||this.uvs.length!=t){this.uvs=new n.Float32Array(t)}var e=this.rendererObject;if(!e)return;var i=e.texture;var r=i._uvs;var a=e.width,s=e.height,o=e.originalWidth,h=e.originalHeight;var l=e.offsetX,u=e.pixiOffsetY;for(var f=0;f<t;f+=2){var c=this.regionUVs[f],p=this.regionUVs[f+1];c=(c*o-l)/a;p=(p*h-u)/s;this.uvs[f]=(r.x0*(1-c)+r.x1*c)*(1-p)+(r.x3*(1-c)+r.x2*c)*p;this.uvs[f+1]=(r.y0*(1-c)+r.y1*c)*(1-p)+(r.y3*(1-c)+r.y2*c)*p}},computeWorldVertices:function(t,e,i,n){var r=i.bone;t+=r.worldX;e+=r.worldY;var a=r.matrix.a,s=r.matrix.c,o=r.matrix.b,h=r.matrix.d;var l=this.vertices;var u=l.length;if(i.attachmentVertices.length==u)l=i.attachmentVertices;for(var f=0;f<u;f+=2){var c=l[f];var p=l[f+1];n[f]=c*a+p*s+t;n[f+1]=c*o+p*h+e}},applyFFD:function(t){return this===t||this.inheritFFD&&parentMesh===t},setParentMesh:function(t){this.parentMesh=t;if(t!=null){this.vertices=t.vertices;this.regionUVs=t.regionUVs;this.triangles=t.triangles;this.hullLength=t.hullLength}},hackRegion:function(t){if(!t){if(!this.oldRegion)return;t=this.oldRegion}if(!this.oldRegion){this.oldRegion=this.rendererObject}this.rendererObject=t;this.updateUVs()}};e.exports=n.MeshAttachment},{"../SpineUtil":52,"./AttachmentType":13}],28:[function(t,e,i){var n=t("../SpineUtil");n.AttachmentType=t("./AttachmentType");n.RegionAttachment=function(t){this.name=t;this.offset=[];this.offset.length=8;this.uvs=[];this.uvs.length=8};n.RegionAttachment.prototype={type:n.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,i,n,r){var a=this.uvs;if(r){a[2]=t;a[3]=n;a[4]=t;a[5]=e;a[6]=i;a[7]=e;a[0]=i;a[1]=n}else{a[0]=t;a[1]=n;a[2]=t;a[3]=e;a[4]=i;a[5]=e;a[6]=i;a[7]=n}},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX;var e=this.height/this.regionOriginalHeight*this.scaleY;var i=-this.width/2*this.scaleX+this.regionOffsetX*t;var r=-this.height/2*this.scaleY+this.regionOffsetY*e;var a=i+this.regionWidth*t;var s=r+this.regionHeight*e;var o=this.rotation*n.degRad;var h=Math.cos(o);var l=Math.sin(o);var u=i*h+this.x;var f=i*l;var c=r*h+this.y;var p=r*l;var d=a*h+this.x;var v=a*l;var m=s*h+this.y;var g=s*l;var x=this.offset;x[0]=u-p;x[1]=c+f;x[2]=u-g;x[3]=m+f;x[4]=d-g;x[5]=m+v;x[6]=d-p;x[7]=c+v},computeVertices:function(t,e,i,n){t+=i.worldX;e+=i.worldY;var r=i.matrix.a,a=i.matrix.c,s=i.matrix.b,o=i.matrix.d;var h=this.offset;n[0]=h[0]*r+h[1]*a+t;n[1]=h[0]*s+h[1]*o+e;n[2]=h[2]*r+h[3]*a+t;n[3]=h[2]*s+h[3]*o+e;n[4]=h[4]*r+h[5]*a+t;n[5]=h[4]*s+h[5]*o+e;n[6]=h[6]*r+h[7]*a+t;n[7]=h[6]*s+h[7]*o+e},hackRegion:function(t){if(!t){if(!this.oldRegion)return;t=this.oldRegion}if(!this.oldRegion){this.oldRegion=this.rendererObject;this.oldRegion.size={width:this.width,height:this.height}}this.rendererObject=t;if(t.size){this.width=t.size.width;this.height=t.size.height}}};e.exports=n.RegionAttachment},{"../SpineUtil":52,"./AttachmentType":13}],29:[function(t,e,i){var n=t("../SpineUtil")||{};n.Animation=t("./Animation");n.Curves=t("./Curves");n.RotateTimeline=function(t){this.curves=new n.Curves(t);this.frames=[];this.frames.length=t*2};n.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i){t*=2;this.frames[t]=e;this.frames[t+1]=i},apply:function(t,e,i,r,a){var s=this.frames;if(i<s[0])return;var o=t.bones[this.boneIndex];if(i>=s[s.length-2]){var h=o.data.rotation+s[s.length-1]-o.rotation;while(h>180)h-=360;while(h<-180)h+=360;o.rotation+=h*a;return}var l=n.Animation.binarySearch(s,i,2);var u=s[l-1];var f=s[l];var c=1-(i-f)/(s[l-2]-f);c=this.curves.getCurvePercent(l/2-1,c);var h=s[l+1]-u;while(h>180)h-=360;while(h<-180)h+=360;h=o.data.rotation+(u+h*c)-o.rotation;while(h>180)h-=360;while(h<-180)h+=360;o.rotation+=h*a}};e.exports=n.RotateTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],30:[function(t,e,i){var n=t("../SpineUtil");n.Animation=t("./Animation");n.Curves=t("./Curves");n.ScaleTimeline=function(t){this.curves=new n.Curves(t);this.frames=[];this.frames.length=t*3};n.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,n){t*=3;this.frames[t]=e;this.frames[t+1]=i;this.frames[t+2]=n},apply:function(t,e,i,r,a){var s=this.frames;if(i<s[0])return;var o=t.bones[this.boneIndex];if(i>=s[s.length-3]){o.scaleX+=(o.data.scaleX*s[s.length-2]-o.scaleX)*a;o.scaleY+=(o.data.scaleY*s[s.length-1]-o.scaleY)*a;return}var h=n.Animation.binarySearch(s,i,3);var l=s[h-2];var u=s[h-1];var f=s[h];var c=1-(i-f)/(s[h+-3]-f);c=this.curves.getCurvePercent(h/3-1,c);o.scaleX+=(o.data.scaleX*(l+(s[h+1]-l)*c)-o.scaleX)*a;o.scaleY+=(o.data.scaleY*(u+(s[h+2]-u)*c)-o.scaleY)*a}};e.exports=n.ScaleTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],31:[function(t,e,i){var n=t("../SpineUtil");n.Animation=t("./Animation");n.Curves=t("./Curves");n.ShearTimeline=function(t){this.curves=new n.Curves(t);this.frames=[];this.frames.length=t*3};n.ShearTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,n){t*=3;this.frames[t]=e;this.frames[t+1]=i;this.frames[t+2]=n},apply:function(t,e,i,r,a){var s=this.frames;if(i<s[0])return;var o=t.bones[this.boneIndex];if(i>=s[s.length-3]){o.shearX+=(o.data.shearX+s[s.length-2]-o.shearX)*a;o.shearY+=(o.data.shearY+s[s.length-1]-o.shearY)*a;return}var h=n.Animation.binarySearch(s,i,3);var l=s[h-2];var u=s[h-1];var f=s[h];var c=1-(i-f)/(s[h+-3]-f);c=this.curves.getCurvePercent(h/3-1,c);o.shearX+=(o.data.shearX+(l+(s[h+1]-l)*c)-o.shearX)*a;o.shearY+=(o.data.shearY+(u+(s[h+2]-u)*c)-o.shearY)*a}};e.exports=n.ShearTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],32:[function(t,e,i){var n=t("../SpineUtil");n.Bone=t("./Bone");n.Slot=t("./Slot");n.IkConstraint=t("./IkConstraint");n.Skeleton=function(t){this.data=t;this.bones=[];for(var e=0,i=t.bones.length;e<i;e++){var r=t.bones[e];var a=!r.parent?null:this.bones[t.bones.indexOf(r.parent)];this.bones.push(new n.Bone(r,this,a))}this.slots=[];this.drawOrder=[];for(var e=0,i=t.slots.length;e<i;e++){var s=t.slots[e];var o=this.bones[t.bones.indexOf(s.boneData)];var h=new n.Slot(s,o);this.slots.push(h);this.drawOrder.push(e)}this.ikConstraints=[];for(var e=0,i=t.ikConstraints.length;e<i;e++)this.ikConstraints.push(new n.IkConstraint(t.ikConstraints[e],this));this.transformConstraints=[];for(var e=0,i=t.transformConstraints.length;e<i;e++)this.transformConstraints.push(new n.TransformConstraint(t.transformConstraints[e],this));this.boneCache=[];this.updateCache()};n.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:false,flipY:false,updateCache:function(){var t=this.ikConstraints;var e=t.length;var i=this.transformConstraints;var n=i.length;var r=this.boneCache;r.length=0;var a=this.bones;for(var s=0,o=a.length;s<o;s++){var h=a[s];r.push(h);for(var l=0;l<n;l++){if(i[l].bone==h){r.push(i[l])}}for(var l=0;l<e;l++){if(t[l].bones[t[l].bones.length-1]==h){r.push(t[l]);break}}}},updateWorldTransform:function(){var t=this.bones;for(var e=0,i=t.length;e<i;e++){var n=t[e];n.rotationIK=n.rotation}var r=this.boneCache;for(var e=0,i=r.length;e<i;e++){r[e].update()}},setToSetupPose:function(){this.setBonesToSetupPose();this.setSlotsToSetupPose()},setBonesToSetupPose:function(){var t=this.bones;for(var e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var n=this.ikConstraints;for(var e=0,i=n.length;e<i;e++){var r=n[e];r.bendDirection=r.data.bendDirection;r.mix=r.data.mix}var a=this.transformConstraints;for(var e=0,i=a.length;e<i;e++){var s=a[e];var o=s.data;s.rotateMix=o.rotateMix;s.translateMix=o.translateMix;s.scaleMix=o.scaleMix;s.shearMix=o.shearMix}},setSlotsToSetupPose:function(){var t=this.slots;for(var e=0,i=t.length;e<i;e++){t[e].setToSetupPose(e)}this.resetDrawOrder()},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){var e=this.bones;for(var i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return e[i];return null},findBoneIndex:function(t){var e=this.bones;for(var i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},findSlot:function(t){var e=this.slots;for(var i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return e[i];return null},findSlotIndex:function(t){var e=this.slots;for(var i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t){if(this.skin)t._attachAll(this,this.skin);else{var e=this.slots;for(var i=0,n=e.length;i<n;i++){var r=e[i];var a=r.data.attachmentName;if(a){var s=t.getAttachment(i,a);if(s)r.setAttachment(s)}}}}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var i=this.skin.getAttachment(t,e);if(i)return i}if(this.data.defaultSkin)return this.data.defaultSkin.getAttachment(t,e);return null},setAttachment:function(t,e){var i=this.slots;for(var n=0,r=i.length;n<r;n++){var a=i[n];if(a.data.name==t){var s=null;if(e){s=this.getAttachmentBySlotIndex(n,e);if(!s)throw"Attachment not found: "+e+", for slot: "+t}a.setAttachment(s);return}}throw"Slot not found: "+t},findIkConstraint:function(t){var e=this.ikConstraints;for(var i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return e[i];return null},findTransformConstraint:function(t){var e=this.transformConstraints;for(var i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return e[i];return null},update:function(t){this.time+=t},resetDrawOrder:function(){for(var t=0,e=this.drawOrder.length;t<e;t++){this.drawOrder[t]=t}}};e.exports=n.Skeleton},{"../SpineUtil":52,"./Bone":14,"./IkConstraint":24,"./Slot":37}],33:[function(t,e,i){var n=t("../SpineRuntime")||{};n.AttachmentType=t("./AttachmentType");n.SkeletonBounds=function(){this.polygonPool=[];this.polygons=[];this.boundingBoxes=[]};n.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){var i=t.slots;var r=i.length;var a=t.x,s=t.y;var o=this.boundingBoxes;var h=this.polygonPool;var l=this.polygons;o.length=0;for(var u=0,f=l.length;u<f;u++)h.push(l[u]);l.length=0;for(var u=0;u<r;u++){var c=i[u];var p=c.attachment;if(p.type!=n.AttachmentType.boundingbox)continue;o.push(p);var d=h.length,v;if(d>0){v=h[d-1];h.splice(d-1,1)}else v=[];l.push(v);v.length=p.vertices.length;p.computeWorldVertices(a,s,c.bone,v)}if(e)this.aabbCompute()},aabbCompute:function(){var t=this.polygons;var e=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,r=Number.MIN_VALUE;for(var a=0,s=t.length;a<s;a++){var o=t[a];for(var h=0,l=o.length;h<l;h+=2){var u=o[h];var f=o[h+1];e=Math.min(e,u);i=Math.min(i,f);n=Math.max(n,u);r=Math.max(r,f)}}this.minX=e;this.minY=i;this.maxX=n;this.maxY=r},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,i,n){var r=this.minX,a=this.minY,s=this.maxX,o=this.maxY;if(t<=r&&i<=r||e<=a&&n<=a||t>=s&&i>=s||e>=o&&n>=o)return false;var h=(n-e)/(i-t);var l=h*(r-t)+e;if(l>a&&l<o)return true;l=h*(s-t)+e;if(l>a&&l<o)return true;var u=(a-e)/h+t;if(u>r&&u<s)return true;u=(o-e)/h+t;if(u>r&&u<s)return true;return false},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){var i=this.polygons;for(var n=0,r=i.length;n<r;n++)if(this.polygonContainsPoint(i[n],t,e))return this.boundingBoxes[n];return null},intersectsSegment:function(t,e,i,n){var r=this.polygons;for(var a=0,s=r.length;a<s;a++)if(r[a].intersectsSegment(t,e,i,n))return this.boundingBoxes[a];return null},polygonContainsPoint:function(t,e,i){var n=t.length;var r=n-2;var a=false;for(var s=0;s<n;s+=2){var o=t[s+1];var h=t[r+1];if(o<i&&h>=i||h<i&&o>=i){var l=t[s];if(l+(i-o)/(h-o)*(t[r]-l)<e)a=!a}r=s}return a},polygonIntersectsSegment:function(t,e,i,n,r){var a=t.length;var s=e-n,o=i-r;var h=e*r-i*n;var l=t[a-2],u=t[a-1];for(var f=0;f<a;f+=2){var c=t[f],p=t[f+1];var d=l*p-u*c;var v=l-c,m=u-p;var g=s*m-o*v;var x=(h*v-s*d)/g;if((x>=l&&x<=c||x>=c&&x<=l)&&(x>=e&&x<=n||x>=n&&x<=e)){var y=(h*m-o*d)/g;if((y>=u&&y<=p||y>=p&&y<=u)&&(y>=i&&y<=r||y>=r&&y<=i))return true}l=c;u=p}return false},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return e==-1?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}};e.exports=n.SkeletonBounds},{"../SpineRuntime":45,"./AttachmentType":13}],34:[function(t,e,i){var n=t("../SpineUtil");n.SkeletonData=function(){this.bones=[];this.slots=[];this.skins=[];this.events=[];this.animations=[];this.ikConstraints=[];this.transformConstraints=[]};n.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){var e=this.bones;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},findBoneIndex:function(t){var e=this.bones;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},findSlot:function(t){var e=this.slots;for(var i=0,n=e.length;i<n;i++){if(e[i].name==t)return this.slots[i]}return null},findSlotIndex:function(t){var e=this.slots;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},findSkin:function(t){var e=this.skins;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},findEvent:function(t){var e=this.events;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},findAnimation:function(t){var e=this.animations;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},findIkConstraint:function(t){var e=this.ikConstraints;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},findTransformConstraint:function(t){var e=this.transformConstraints;for(var i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null}};e.exports=n.SkeletonData},{"../SpineUtil":52}],35:[function(t,e,i){var n=t("../SpineUtil");n.SkeletonData=t("./SkeletonData");n.BoneData=t("./BoneData");n.IkConstraintData=t("./IkConstraintData");n.TransformConstraintData=t("./TransformConstraintData");n.SlotData=t("./SlotData");n.Skin=t("./Skin");n.EventData=t("./EventData");n.AttachmentType=t("./AttachmentType");n.ColorTimeline=t("./ColorTimeline");n.AttachmentTimeline=t("./AttachmentTimeline");n.RotateTimeline=t("./RotateTimeline");n.ScaleTimeline=t("./ScaleTimeline");n.TranslateTimeline=t("./TranslateTimeline");n.ShearTimeline=t("./ShearTimeline");n.IkConstraintTimeline=t("./IkConstraintTimeline");n.TransformConstraintTimeline=t("./TransformConstraintTimeline");n.FfdTimeline=t("./FfdTimeline");n.DrawOrderTimeline=t("./DrawOrderTimeline");n.EventTimeline=t("./EventTimeline");n.Event=t("./Event");n.Animation=t("./Animation");function r(t,e,i,n){this.mesh=t;this.skin=e;this.slotIndex=i;this.parent=n}n.SkeletonJsonParser=function(t){if(t.pages){this.attachmentLoader=new n.AtlasAttachmentLoader(t)}else{this.attachmentLoader=t}if(!t.newRegionAttachment){console.warn("SkeletonJsonParser accepts AtlasAttachmentLoader or atlas as first parameter")}this.linkedMeshes=[]};n.SkeletonJsonParser.prototype={scale:1,readSkeletonData:function(t,e){var i=new n.SkeletonData;i.name=e;var r=this.scale;var a=t["skeleton"];if(a){i.hash=a["hash"];i.version=a["spine"];i.width=a["width"]||0;i.height=a["height"]||0}var s=t["bones"];for(var o=0,h=s.length;o<h;o++){var l=s[o];var u=null;if(l["parent"]){u=i.findBone(l["parent"]);if(!u)throw"Parent bone not found: "+l["parent"]}var f=new n.BoneData(l["name"],u);f.length=(l["length"]||0)*this.scale;f.x=(l["x"]||0)*this.scale;f.y=(l["y"]||0)*this.scale;f.rotation=l["rotation"]||0;f.scaleX=l.hasOwnProperty("scaleX")?l["scaleX"]:1;f.scaleY=l.hasOwnProperty("scaleY")?l["scaleY"]:1;f.shearX=l["shearX"]||0;f.shearY=l["shearY"]||0;f.inheritScale=l.hasOwnProperty("inheritScale")?l["inheritScale"]:true;f.inheritRotation=l.hasOwnProperty("inheritRotation")?l["inheritRotation"]:true;i.bones.push(f)}var c=t["ik"];if(c){for(var o=0,h=c.length;o<h;o++){var p=c[o];var d=new n.IkConstraintData(p["name"]);var s=p["bones"];for(var v=0,m=s.length;v<m;v++){var g=i.findBone(s[v]);if(!g)throw new Error("IK bone not found: "+s[v]);d.bones.push(g)}d.target=i.findBone(p["target"]);if(!d.target)throw new Error("Target bone not found: "+p["target"]);d.bendDirection=!p.hasOwnProperty("bendPositive")||p["bendPositive"]?1:-1;d.mix=p.hasOwnProperty("mix")?p["mix"]:1;i.ikConstraints.push(d)}}var x=t["transform"];if(x){for(var o=0,h=x.length;o<h;o++){var y=x[o];var w=new n.TransformConstraintData(y["name"]);w.bone=i.findBone(y["bone"]);if(!w.bone)throw new Error("Transform bone not found: "+w["bone"]);w.target=i.findBone(y["target"]);if(!w.target)throw new Error("Target bone not found: "+w["target"]);w.offsetRotation=y["rotation"]||0;w.offsetX=(y["offsetX"]||0)*r;w.offsetY=(y["offsetY"]||0)*r;w.offsetScaleX=(y["scaleX"]||0)*r;w.offsetScaleY=(y["scaleY"]||0)*r;w.offsetShearY=(y["offsetShearY"]||0)*r;w.rotateMix=y.hasOwnProperty("rotateMix")?y["rotateMix"]:1;w.translateMix=y.hasOwnProperty("translateMix")?y["translateMix"]:1;w.scaleMix=y.hasOwnProperty("scaleMix")?y["scaleMix"]:1;w.shearMix=y.hasOwnProperty("shearMix")?y["shearMix"]:1;i.transformConstraints.push(w)}}var T=t["slots"];for(var o=0,h=T.length;o<h;o++){var b=T[o];var f=i.findBone(b["bone"]);if(!f)throw"Slot bone not found: "+b["bone"];var S=new n.SlotData(b["name"],f);var A=b["color"];if(A){S.r=this.toColor(A,0);S.g=this.toColor(A,1);S.b=this.toColor(A,2);S.a=this.toColor(A,3)}S.attachmentName=b["attachment"];S.blendMode=b["blend"]&&n.SlotData.BLEND_MODE_MAP[b["blend"]]||n.SlotData.BLEND_MODE_MAP["normal"];i.slots.push(S)}var C=t["skins"];for(var M in C){if(!C.hasOwnProperty(M))continue;var I=C[M];var _=new n.Skin(M);for(var k in I){if(!I.hasOwnProperty(k))continue;var O=i.findSlotIndex(k);var D=I[k];for(var U in D){if(!D.hasOwnProperty(U))continue;var E=this.readAttachment(_,O,U,D[U]);if(E)_.addAttachment(O,U,E)}}i.skins.push(_);if(_.name=="default")i.defaultSkin=_}var R=this.linkedMeshes;for(var o=0,h=R.size;o<h;o++){var P=R[o];var _=P.skin?i.findSkin(P.skin):i.defaultSkin;var u=_.getAttachment(P.slotIndex,P.parent);P.mesh.setParentMesh(u);P.mesh.updateUVs()}R.length=0;var B=t["events"];for(var L in B){if(!B.hasOwnProperty(L))continue;var N=B[L];var j=new n.EventData(L);j.intValue=N["int"]||0;j.floatValue=N["float"]||0;j.stringValue=N["string"]||null;i.events.push(j)}var Y=t["animations"];for(var F in Y){if(!Y.hasOwnProperty(F))continue;this.readAnimation(F,Y[F],i)}return i},readAttachment:function(t,e,i,a){i=a["name"]||i;var s=n.AttachmentType[a["type"]||"region"];var o=a["path"]||i;var h=this.scale;if(s==n.AttachmentType.region){var l=this.attachmentLoader.newRegionAttachment(t,i,o);if(!l)return null;l.path=o;l.x=(a["x"]||0)*h;l.y=(a["y"]||0)*h;l.scaleX=a.hasOwnProperty("scaleX")?a["scaleX"]:1;l.scaleY=a.hasOwnProperty("scaleY")?a["scaleY"]:1;l.rotation=a["rotation"]||0;l.width=(a["width"]||0)*h;l.height=(a["height"]||0)*h;var u=a["color"];if(u){l.r=this.toColor(u,0);l.g=this.toColor(u,1);l.b=this.toColor(u,2);l.a=this.toColor(u,3)}l.updateOffset();return l}else if(s==n.AttachmentType.boundingbox){var f=this.attachmentLoader.newBoundingBoxAttachment(t,i);var c=a["vertices"];for(var p=0,d=c.length;p<d;p++)f.vertices.push(c[p]*h);return f}else if(s==n.AttachmentType.mesh||s==n.AttachmentType.linkedmesh){var v=this.attachmentLoader.newMeshAttachment(t,i,o);if(!v)return null;v.path=o;u=a["color"];if(u){v.r=this.toColor(u,0);v.g=this.toColor(u,1);v.b=this.toColor(u,2);v.a=this.toColor(u,3)}v.width=(a["width"]||0)*h;v.height=(a["height"]||0)*h;var m=a["parent"];if(!m){v.vertices=this.getFloatArray(a,"vertices",h);v.triangles=this.getIntArray(a,"triangles");v.regionUVs=this.getFloatArray(a,"uvs",1);v.updateUVs();v.hullLength=(a["hull"]||0)*2;if(a["edges"])v.edges=this.getIntArray(a,"edges")}else{v.inheritFFD=!!a["ffd"];this.linkedMeshes.push(new r(v,a["skin"]||null,e,m))}return v}else if(s==n.AttachmentType.weightedmesh||s==n.AttachmentType.weightedlinkedmesh){var v=this.attachmentLoader.newWeightedMeshAttachment(t,i,o);if(!v)return null;v.path=o;u=a["color"];if(u){v.r=this.toColor(u,0);v.g=this.toColor(u,1);v.b=this.toColor(u,2);v.a=this.toColor(u,3)}v.width=(a["width"]||0)*h;v.height=(a["height"]||0)*h;var m=a["parent"];if(!m){var g=this.getFloatArray(a,"uvs",1);var c=this.getFloatArray(a,"vertices",1);var x=[];var y=[];for(var p=0,d=c.length;p<d;){var w=c[p++]|0;y[y.length]=w;for(var T=p+w*4;p<T;){y[y.length]=c[p];x[x.length]=c[p+1]*h;x[x.length]=c[p+2]*h;x[x.length]=c[p+3];p+=4}}v.bones=y;v.weights=x;v.triangles=this.getIntArray(a,"triangles");v.regionUVs=g;v.updateUVs();v.hullLength=(a["hull"]||0)*2;if(a["edges"])v.edges=this.getIntArray(a,"edges")}else{v.inheritFFD=!!a["ffd"];this.linkedMeshes.push(new r(v,a["skin"]||null,e,m))}return v}throw"Unknown attachment type: "+s},readAnimation:function(t,e,i){var r=[];var a=0;var s=e["slots"];for(var o in s){if(!s.hasOwnProperty(o))continue;var h=s[o];var l=i.findSlotIndex(o);for(var u in h){if(!h.hasOwnProperty(u))continue;var f=h[u];if(u=="color"){var c=new n.ColorTimeline(f.length);c.slotIndex=l;var p=0;for(var d=0,v=f.length;d<v;d++){var m=f[d];var g=m["color"];var x=this.toColor(g,0);var y=this.toColor(g,1);var w=this.toColor(g,2);var T=this.toColor(g,3);c.setFrame(p,m["time"],x,y,w,T);this.readCurve(c,p,m);p++}r.push(c);a=Math.max(a,c.frames[c.getFrameCount()*5-5])}else if(u=="attachment"){var c=new n.AttachmentTimeline(f.length);c.slotIndex=l;var p=0;for(var d=0,v=f.length;d<v;d++){var m=f[d];c.setFrame(p++,m["time"],m["name"])}r.push(c);a=Math.max(a,c.frames[c.getFrameCount()-1])}else throw"Invalid timeline type for a slot: "+u+" ("+o+")"}}var b=e["bones"];for(var S in b){if(!b.hasOwnProperty(S))continue;var A=i.findBoneIndex(S);if(A==-1)throw"Bone not found: "+S;var C=b[S];for(var u in C){if(!C.hasOwnProperty(u))continue;var f=C[u];if(u=="rotate"){var c=new n.RotateTimeline(f.length);c.boneIndex=A;var p=0;for(var d=0,v=f.length;d<v;d++){var m=f[d];c.setFrame(p,m["time"],m["angle"]);this.readCurve(c,p,m);p++}r.push(c);a=Math.max(a,c.frames[c.getFrameCount()*2-2])}else if(u=="translate"||u=="scale"||u=="shear"){var c;var M=1;if(u=="scale"){c=new n.ScaleTimeline(f.length)}else if(u=="shear"){c=new n.ShearTimeline(f.length)}else{c=new n.TranslateTimeline(f.length);M=this.scale}c.boneIndex=A;var p=0;for(var d=0,v=f.length;d<v;d++){var m=f[d];var I=(m["x"]||0)*M;var _=(m["y"]||0)*M;c.setFrame(p,m["time"],I,_);this.readCurve(c,p,m);p++}r.push(c);a=Math.max(a,c.frames[c.getFrameCount()*3-3])}else if(u=="flipX"||u=="flipY"){throw"flipX and flipY are not supported in spine v3: ("+S+")"}else throw"Invalid timeline type for a bone: "+u+" ("+S+")"}}var k=e["ik"];for(var O in k){if(!k.hasOwnProperty(O))continue;var D=i.findIkConstraint(O);var f=k[O];var c=new n.IkConstraintTimeline(f.length);c.ikConstraintIndex=i.ikConstraints.indexOf(D);var p=0;for(var d=0,v=f.length;d<v;d++){var m=f[d];var U=m.hasOwnProperty("mix")?m["mix"]:1;var E=!m.hasOwnProperty("bendPositive")||m["bendPositive"]?1:-1;c.setFrame(p,m["time"],U,E);this.readCurve(c,p,m);p++}r.push(c);a=Math.max(a,c.frames[c.getFrameCount()*3-3])}var R=e["transform"];for(var P in R){if(!R.hasOwnProperty(P))continue;var B=i.findTransformConstraint(P);var f=R[P];var c=new n.TransformConstraintTimeline(f.length);c.transformConstraintIndex=i.transformConstraints.indexOf(B);var p=0;for(var d=0,v=f.length;d<v;d++){var m=f[d];var L=m.hasOwnProperty("rotateMix")?m["rotateMix"]:1;var N=m.hasOwnProperty("translateMix")?m["translateMix"]:1;var j=m.hasOwnProperty("scaleMix")?m["scaleMix"]:1;var Y=m.hasOwnProperty("shearMix")?m["shearMix"]:1;c.setFrame(p,m["time"],N,j,Y);this.readCurve(c,p,m);p++}r.push(c);a=Math.max(a,c.frames[c.getFrameCount()*5-5])}var F=e["ffd"];for(var X in F){var W=i.findSkin(X);var h=F[X];for(o in h){var l=i.findSlotIndex(o);var V=h[o];for(var H in V){var f=V[H];var c=new n.FfdTimeline(f.length);var G=W.getAttachment(l,H);if(!G)throw"FFD attachment not found: "+H;c.slotIndex=l;c.attachment=G;var q=G.type==n.AttachmentType.mesh;var K;if(q)K=G.vertices.length;else K=G.weights.length/3*2;var p=0;for(var d=0,v=f.length;d<v;d++){var m=f[d];var z;if(!m["vertices"]){if(q)z=G.vertices;else{z=[];for(var J=0;J<K;++J)z.push(0)}}else{var Z=m["vertices"];z=[];for(var J=0;J<K;++J)z.push(0);var $=m["offset"]||0;var Q=Z.length;if(this.scale==1){for(var tt=0;tt<Q;tt++)z[tt+$]=Z[tt]}else{for(var tt=0;tt<Q;tt++)z[tt+$]=Z[tt]*this.scale}if(q){var et=G.vertices;for(var tt=0,Q=z.length;tt<Q;tt++)z[tt]+=et[tt]}}c.setFrame(p,m["time"],z);this.readCurve(c,p,m);p++}r[r.length]=c;a=Math.max(a,c.frames[c.getFrameCount()-1])}}}var it=e["drawOrder"];if(!it)it=e["draworder"];if(it){var c=new n.DrawOrderTimeline(it.length);var nt=i.slots.length;var p=0;for(var d=0,v=it.length;d<v;d++){var rt=it[d];var at=null;if(rt["offsets"]){at=[];at.length=nt;for(var tt=nt-1;tt>=0;tt--)at[tt]=-1;var st=rt["offsets"];var ot=[];ot.length=nt-st.length;var ht=0,lt=0;for(var tt=0,Q=st.length;tt<Q;tt++){var ut=st[tt];var l=i.findSlotIndex(ut["slot"]);if(l==-1)throw"Slot not found: "+ut["slot"];while(ht!=l)ot[lt++]=ht++;at[ht+ut["offset"]]=ht++}while(ht<nt)ot[lt++]=ht++;for(var tt=nt-1;tt>=0;tt--)if(at[tt]==-1)at[tt]=ot[--lt]}c.setFrame(p++,rt["time"],at)}r.push(c);a=Math.max(a,c.frames[c.getFrameCount()-1])}var ft=e["events"];if(ft){var c=new n.EventTimeline(ft.length);var p=0;for(var d=0,v=ft.length;d<v;d++){var ct=ft[d];var pt=i.findEvent(ct["name"]);if(!pt)throw"Event not found: "+ct["name"];var dt=new n.Event(pt);dt.intValue=ct.hasOwnProperty("int")?ct["int"]:pt.intValue;dt.floatValue=ct.hasOwnProperty("float")?ct["float"]:pt.floatValue;dt.stringValue=ct.hasOwnProperty("string")?ct["string"]:pt.stringValue;c.setFrame(p++,ct["time"],dt)}r.push(c);a=Math.max(a,c.frames[c.getFrameCount()-1])}i.animations.push(new n.Animation(t,r,a))},readCurve:function(t,e,i){var n=i["curve"];if(!n)t.curves.setLinear(e);else if(n=="stepped")t.curves.setStepped(e);else if(n instanceof Array)t.curves.setCurve(e,n[0],n[1],n[2],n[3])},toColor:function(t,e){if(t.length!=8)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(e*2,e*2+2),16)/255},getFloatArray:function(t,e,i){var r=t[e];var a=new n.Float32Array(r.length);var s=0,o=r.length;if(i==1){for(;s<o;s++)a[s]=r[s]}else{for(;s<o;s++)a[s]=r[s]*i}return a},getIntArray:function(t,e){var i=t[e];var r=new n.Uint16Array(i.length);for(var a=0,s=i.length;a<s;a++)r[a]=i[a]|0;return r}};e.exports=n.SkeletonJsonParser},{"../SpineUtil":52,"./Animation":4,"./AttachmentTimeline":12,"./AttachmentType":13,"./BoneData":15,"./ColorTimeline":17,"./DrawOrderTimeline":19,"./Event":20,"./EventData":21,"./EventTimeline":22,"./FfdTimeline":23,"./IkConstraintData":25,"./IkConstraintTimeline":26,"./RotateTimeline":29,"./ScaleTimeline":30,"./ShearTimeline":31,"./SkeletonData":34,"./Skin":36,"./SlotData":38,"./TransformConstraintData":41,"./TransformConstraintTimeline":42,"./TranslateTimeline":43}],36:[function(t,e,i){var n=t("../SpineUtil");n.Skin=function(t){this.name=t;this.attachments={}};n.Skin.prototype={addAttachment:function(t,e,i){this.attachments[t+":"+e]=i},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var i in e.attachments){var n=i.indexOf(":");var r=parseInt(i.substring(0,n));var a=i.substring(n+1);var s=t.slots[r];if(s.attachment&&s.attachment.name==a){var o=this.getAttachment(r,a);if(o)s.setAttachment(o)}}}};e.exports=n.Skin},{"../SpineUtil":52}],37:[function(t,e,i){var n=t("../SpineUtil");n.Slot=function(t,e){this.data=t;this.bone=e;this.setToSetupPose()};n.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(t){this.attachment=t;this._attachmentTime=this.bone.skeleton.time;this.attachmentVertices.length=0},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r;this.g=t.g;this.b=t.b;this.a=t.a;this.blendMode=t.blendMode;var e=this.bone.skeleton.data.slots;
for(var i=0,n=e.length;i<n;i++){if(e[i]==t){this.setAttachment(!t.attachmentName?null:this.bone.skeleton.getAttachmentBySlotIndex(i,t.attachmentName));break}}}};e.exports=n.Slot},{"../SpineUtil":52}],38:[function(t,e,i){var n=t("../SpineUtil");var r=t("../SpineUtil/blend.js");n.SlotData=function(t,e){this.name=t;this.boneData=e};n.SlotData.BLEND_MODE_MAP={multiply:r.MULTIPLY,screen:r.SCREEN,additive:r.ADD,normal:r.NORMAL};n.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,blendMode:r.NORMAL};e.exports=n.SlotData},{"../SpineUtil":52,"../SpineUtil/blend.js":51}],39:[function(t,e,i){var n=t("../SpineUtil");n.TrackEntry=function(){};n.TrackEntry.prototype={next:null,previous:null,animation:null,loop:false,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null};e.exports=n.TrackEntry},{"../SpineUtil":52}],40:[function(t,e,i){var n=t("../SpineUtil");var r=[0,0];n.TransformConstraint=function(t,e){this.data=t;this.translateMix=t.translateMix;this.rotateMix=t.rotateMix;this.scaleMix=t.scaleMix;this.shearMix=t.shearMix;this.offsetX=t.offsetX;this.offsetY=t.offsetY;this.offsetScaleX=t.offsetScaleX;this.offsetScaleY=t.offsetScaleY;this.offsetShearY=t.offsetShearY;this.bone=e.findBone(t.bone.name);this.target=e.findBone(t.target.name)};n.TransformConstraint.prototype={update:function(){this.apply()},apply:function(){var t=this.bone.matrix;var e=this.target.matrix;var i=this.rotateMix;if(i>0){var a=t.a,s=t.c,o=t.b,h=t.d;var l=Math.atan2(e.b,e.a)-Math.atan2(o,a);if(l>Math.PI)l-=Math.PI*2;else if(l<-Math.PI)l+=Math.PI*2;l*=i;var u=Math.cos(l),f=Math.sin(l);t.a=u*a-f*o;t.c=u*s-f*h;t.b=f*a+u*o;t.d=f*s+u*h}var c=this.rotateMix;if(c>0){var p=Math.sqrt(t.a*t.a+t.b*t.b);var d=Math.sqrt(e.a*e.a+e.b*e.b);var v=p>1e-5?(p+(d-p+this.offsetScaleX)*c)/p:0;t.a*=v;t.b*=v;p=Math.sqrt(t.c*t.c+t.d*t.d);d=Math.sqrt(t.c*t.c+t.d*t.d);v=p>1e-5?(p+(d-p+this.offsetScaleY)*c)/p:0;t.c*=v;t.d*=v}var m=this.shearMix;if(m>0){var s=t.c,h=t.d;var g=Math.atan2(h,s);var l=Math.atan2(e.d,e.c)-Math.atan2(e.b,target.a)-(g-Math.atan2(t.b,t.a));if(l>Math.PI)l-=Math.PI*2;else if(l<-Math.PI)l+=Math.PI*2;l=g+(l+this.offsetShearY*n.degRad)*m;var v=Math.sqrt(s*s+h*h);t.c=Math.cos(l)*v;t.d=Math.sin(l)*v}var x=this.translateMix;if(x>0){r[0]=this.offsetX;r[1]=this.offsetY;this.target.localToWorld(r);t.tx+=(r[0]-t.tx)*x;t.ty+=(r[1]-t.ty)*x}}};e.exports=n.TransformConstraint},{"../SpineUtil":52}],41:[function(t,e,i){var n=t("../SpineUtil")||{};n.TransformConstraintData=function(t){this.name=t;this.bone=null};n.TransformConstraintData.prototype={target:null,rotateMix:1,translateMix:1,scaleMix:1,shearMix:1,offsetRotation:0,offsetX:0,offsetY:0,offsetScaleX:0,offsetScaleY:0,offsetShearY:0};e.exports=n.TransformConstraintData},{"../SpineUtil":52}],42:[function(t,e,n){var r=t("../SpineUtil")||{};r.Animation=t("./Animation");r.Curves=t("./Curves");r.TransformConstraintTimeline=function(t){this.curves=new r.Curves(t);this.frames=[];this.frames.length=t*3};r.TransformConstraintTimeline.prototype={transformConstraintIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,i,n,r,a){t*=5;this.frames[t]=e;this.frames[t+1]=i;this.frames[t+2]=n;this.frames[t+3]=r;this.frames[t+4]=a},apply:function(t,e,n,a,s){var o=this.frames;if(n<o[0])return;var h=t.transformConstraints[this.transformConstraintIndex];if(n>=o[o.length-5]){h.rotateMix+=(o[i-3]-h.rotateMix)*s;h.translateMix+=(o[i-2]-h.translateMix)*s;h.scaleMix+=(o[i-1]-h.scaleMix)*s;h.shearMix+=(o[i]-h.shearMix)*s;return}var l=r.Animation.binarySearch(o,n,5);var u=o[l];var f=1-(n-u)/(o[l+-5]-u);f=this.curves.getCurvePercent(l/5-1,f);var c=o[l+-4];var p=o[l+-3];var d=o[l+-2];var v=o[l+-1];h.rotateMix+=(c+(o[l+1]-c)*f-h.rotateMix)*s;h.translateMix+=(p+(o[l+2]-p)*f-h.translateMix)*s;h.scaleMix+=(d+(o[l+3]-d)*f-h.scaleMix)*s;h.shearMix+=(v+(o[l+4]-v)*f-h.shearMix)*s}};e.exports=r.TransformConstraintTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],43:[function(t,e,i){var n=t("../SpineUtil");n.Animation=t("./Animation");n.Curves=t("./Curves");n.TranslateTimeline=function(t){this.curves=new n.Curves(t);this.frames=[];this.frames.length=t*3};n.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,n){t*=3;this.frames[t]=e;this.frames[t+1]=i;this.frames[t+2]=n},apply:function(t,e,i,r,a){var s=this.frames;if(i<s[0])return;var o=t.bones[this.boneIndex];if(i>=s[s.length-3]){o.x+=(o.data.x+s[s.length-2]-o.x)*a;o.y+=(o.data.y+s[s.length-1]-o.y)*a;return}var h=n.Animation.binarySearch(s,i,3);var l=s[h-2];var u=s[h-1];var f=s[h];var c=1-(i-f)/(s[h+-3]-f);c=this.curves.getCurvePercent(h/3-1,c);o.x+=(o.data.x+l+(s[h+1]-l)*c-o.x)*a;o.y+=(o.data.y+u+(s[h+2]-u)*c-o.y)*a}};e.exports=n.TranslateTimeline},{"../SpineUtil":52,"./Animation":4,"./Curves":18}],44:[function(t,e,i){var n=t("../SpineUtil")||{};n.AttachmentType=t("./AttachmentType");n.WeightedMeshAttachment=function(t){this.name=t};n.WeightedMeshAttachment.prototype={type:n.AttachmentType.weightedmesh,parentMesh:null,inheritFFD:false,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,edges:null,width:0,height:0,updateUVs:function(t,e,i,r,a){var s=this.regionU2-this.regionU,o=this.regionV2-this.regionV;var h=this.regionUVs.length;if(!this.uvs||this.uvs.length!=h){this.uvs=new n.Float32Array(h)}var l=this.rendererObject;if(!l)return;var u=l.texture;var f=u._uvs;var c=l.width,p=l.height,d=l.originalWidth,v=l.originalHeight;var m=l.offsetX,g=l.pixiOffsetY;for(var x=0;x<h;x+=2){var t=this.regionUVs[x],e=this.regionUVs[x+1];t=(t*d-m)/c;e=(e*v-g)/p;this.uvs[x]=(f.x0*(1-t)+f.x1*t)*(1-e)+(f.x3*(1-t)+f.x2*t)*e;this.uvs[x+1]=(f.y0*(1-t)+f.y1*t)*(1-e)+(f.y3*(1-t)+f.y2*t)*e}},computeWorldVertices:function(t,e,i,n){var r=i.bone.skeleton.bones;var a=this.weights;var s=this.bones;var o=0,h=0,l=0,u=0,f=s.length,c;var p,d,v,m,g;var x;if(!i.attachmentVertices.length){for(;h<f;o+=2){p=0;d=0;c=s[h++]+h;for(;h<c;h++,l+=3){x=r[s[h]].matrix;v=a[l];m=a[l+1];g=a[l+2];p+=(v*x.a+m*x.c+x.tx)*g;d+=(v*x.b+m*x.d+x.ty)*g}n[o]=p+t;n[o+1]=d+e}}else{var y=i.attachmentVertices;for(;h<f;o+=2){p=0;d=0;c=s[h++]+h;for(;h<c;h++,l+=3,u+=2){x=r[s[h]].matrix;v=a[l]+y[u];m=a[l+1]+y[u+1];g=a[l+2];p+=(v*x.a+m*x.c+x.tx)*g;d+=(v*x.b+m*x.d+x.ty)*g}n[o]=p+t;n[o+1]=d+e}}},applyFFD:function(t){return this===t||this.inheritFFD&&parentMesh===t},setParentMesh:function(t){this.parentMesh=t;if(t!=null){this.bones=t.bones;this.weights=t.weights;this.regionUVs=t.regionUVs;this.triangles=t.triangles;this.hullLength=t.hullLength}}};e.exports=n.WeightedMeshAttachment},{"../SpineUtil":52,"./AttachmentType":13}],45:[function(t,e,i){var n=t("../SpineUtil");n.Animation=t("./Animation");n.AnimationStateData=t("./AnimationStateData");n.AnimationState=t("./AnimationState");n.AtlasAttachmentParser=t("./AtlasAttachmentParser");n.Atlas=t("./Atlas");n.AtlasPage=t("./AtlasPage");n.AtlasReader=t("./AtlasReader");n.AtlasRegion=t("./AtlasRegion");n.AttachmentTimeline=t("./AttachmentTimeline");n.AttachmentType=t("./AttachmentType");n.BoneData=t("./BoneData");n.Bone=t("./Bone");n.BoundingBoxAttachment=t("./BoundingBoxAttachment");n.ColorTimeline=t("./ColorTimeline");n.Curves=t("./Curves");n.DrawOrderTimeline=t("./DrawOrderTimeline");n.EventData=t("./EventData");n.Event=t("./Event");n.EventTimeline=t("./EventTimeline");n.FfdTimeline=t("./FfdTimeline");n.IkConstraintData=t("./IkConstraintData");n.IkConstraint=t("./IkConstraint");n.IkConstraintTimeline=t("./IkConstraintTimeline");n.TransformConstraintData=t("./TransformConstraintData");n.TransformConstraint=t("./TransformConstraint");n.TransformConstraintTimeline=t("./TransformConstraintTimeline");n.MeshAttachment=t("./MeshAttachment");n.RegionAttachment=t("./RegionAttachment");n.RotateTimeline=t("./RotateTimeline");n.ScaleTimeline=t("./ScaleTimeline");n.ShearTimeline=t("./ShearTimeline");n.SkeletonBounds=t("./SkeletonBounds");n.SkeletonData=t("./SkeletonData");n.Skeleton=t("./Skeleton");n.SkeletonJsonParser=t("./SkeletonJsonParser");n.Skin=t("./Skin.js");n.WeightedMeshAttachment=t("./WeightedMeshAttachment");n.SlotData=t("./SlotData");n.Slot=t("./Slot");n.TrackEntry=t("./TrackEntry");n.TranslateTimeline=t("./TranslateTimeline");e.exports=n},{"../SpineUtil":52,"./Animation":4,"./AnimationState":5,"./AnimationStateData":6,"./Atlas":7,"./AtlasAttachmentParser":8,"./AtlasPage":9,"./AtlasReader":10,"./AtlasRegion":11,"./AttachmentTimeline":12,"./AttachmentType":13,"./Bone":14,"./BoneData":15,"./BoundingBoxAttachment":16,"./ColorTimeline":17,"./Curves":18,"./DrawOrderTimeline":19,"./Event":20,"./EventData":21,"./EventTimeline":22,"./FfdTimeline":23,"./IkConstraint":24,"./IkConstraintData":25,"./IkConstraintTimeline":26,"./MeshAttachment":27,"./RegionAttachment":28,"./RotateTimeline":29,"./ScaleTimeline":30,"./ShearTimeline":31,"./Skeleton":32,"./SkeletonBounds":33,"./SkeletonData":34,"./SkeletonJsonParser":35,"./Skin.js":36,"./Slot":37,"./SlotData":38,"./TrackEntry":39,"./TransformConstraint":40,"./TransformConstraintData":41,"./TransformConstraintTimeline":42,"./TranslateTimeline":43,"./WeightedMeshAttachment":44}],46:[function(t,e,i){var n=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1];var r=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1];var a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1];var s=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1];var o=[];var h=t("./Matrix");var l=[];function u(t){if(t<0){return-1}if(t>0){return 1}return 0}function f(){for(var t=0;t<16;t++){var e=[];l.push(e);for(var i=0;i<16;i++){var f=u(n[t]*n[i]+a[t]*r[i]);var c=u(r[t]*n[i]+s[t]*r[i]);var p=u(n[t]*a[i]+a[t]*s[i]);var d=u(r[t]*a[i]+s[t]*s[i]);for(var v=0;v<16;v++){if(n[v]===f&&r[v]===c&&a[v]===p&&s[v]===d){e.push(v);break}}}}for(t=0;t<16;t++){var m=new h;m.set(n[t],r[t],a[t],s[t],0,0);o.push(m)}}f();var c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return n[t]},uY:function(t){return r[t]},vX:function(t){return a[t]},vY:function(t){return s[t]},inv:function(t){if(t&8){return t&15}return-t&7},add:function(t,e){return l[t][e]},sub:function(t,e){return l[t][c.inv(e)]},rotate180:function(t){return t^4},isSwapWidthHeight:function(t){return(t&3)===2},byDirection:function(t,e){if(Math.abs(t)*2<=Math.abs(e)){if(e>=0){return c.S}else{return c.N}}else if(Math.abs(e)*2<=Math.abs(t)){if(t>0){return c.E}else{return c.W}}else{if(e>0){if(t>0){return c.SE}else{return c.SW}}else if(t>0){return c.NE}else{return c.NW}}},matrixAppendRotationInv:function(t,e,i,n){var r=o[c.inv(e)];i=i||0;n=n||0;r.tx=i;r.ty=n;t.append(r)}};e.exports=c},{"./Matrix":47}],47:[function(t,e,i){var n=t("./Point");function r(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0}r.prototype.constructor=r;e.exports=r;r.prototype.fromArray=function(t){this.a=t[0];this.b=t[1];this.c=t[3];this.d=t[4];this.tx=t[2];this.ty=t[5]};r.prototype.set=function(t,e,i,n,r,a){this.a=t;this.b=e;this.c=i;this.d=n;this.tx=r;this.ty=a;return this};r.prototype.toArray=function(t,e){if(!this.array){this.array=new Float32Array(9)}var i=e||this.array;if(t){i[0]=this.a;i[1]=this.b;i[2]=0;i[3]=this.c;i[4]=this.d;i[5]=0;i[6]=this.tx;i[7]=this.ty;i[8]=1}else{i[0]=this.a;i[1]=this.c;i[2]=this.tx;i[3]=this.b;i[4]=this.d;i[5]=this.ty;i[6]=0;i[7]=0;i[8]=1}return i};r.prototype.apply=function(t,e){e=e||new n;var i=t.x;var r=t.y;e.x=this.a*i+this.c*r+this.tx;e.y=this.b*i+this.d*r+this.ty;return e};r.prototype.applyInverse=function(t,e){e=e||new n;var i=1/(this.a*this.d+this.c*-this.b);var r=t.x;var a=t.y;e.x=this.d*i*r+-this.c*i*a+(this.ty*this.c-this.tx*this.d)*i;e.y=this.a*i*a+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i;return e};r.prototype.translate=function(t,e){this.tx+=t;this.ty+=e;return this};r.prototype.scale=function(t,e){this.a*=t;this.d*=e;this.c*=t;this.b*=e;this.tx*=t;this.ty*=e;return this};r.prototype.rotate=function(t){var e=Math.cos(t);var i=Math.sin(t);var n=this.a;var r=this.c;var a=this.tx;this.a=n*e-this.b*i;this.b=n*i+this.b*e;this.c=r*e-this.d*i;this.d=r*i+this.d*e;this.tx=a*e-this.ty*i;this.ty=a*i+this.ty*e;return this};r.prototype.append=function(t){var e=this.a;var i=this.b;var n=this.c;var r=this.d;this.a=t.a*e+t.b*n;this.b=t.a*i+t.b*r;this.c=t.c*e+t.d*n;this.d=t.c*i+t.d*r;this.tx=t.tx*e+t.ty*n+this.tx;this.ty=t.tx*i+t.ty*r+this.ty;return this};r.prototype.setTransform=function(t,e,i,n,r,a,s,o,h){var l,u,f,c,p,d,v,m,g,x;p=Math.sin(s);d=Math.cos(s);v=Math.cos(h);m=Math.sin(h);g=-Math.sin(o);x=Math.cos(o);l=d*r;u=p*r;f=-p*a;c=d*a;this.a=v*l+m*f;this.b=v*u+m*c;this.c=g*l+x*f;this.d=g*u+x*c;this.tx=t+(i*l+n*f);this.ty=e+(i*u+n*c);return this};r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a;var n=this.c;this.a=i*t.a+this.b*t.c;this.b=i*t.b+this.b*t.d;this.c=n*t.a+this.d*t.c;this.d=n*t.b+this.d*t.d}this.tx=e*t.a+this.ty*t.c+t.tx;this.ty=e*t.b+this.ty*t.d+t.ty;return this};r.prototype.invert=function(){var t=this.a;var e=this.b;var i=this.c;var n=this.d;var r=this.tx;var a=t*n-e*i;this.a=n/a;this.b=-e/a;this.c=-i/a;this.d=t/a;this.tx=(i*this.ty-n*r)/a;this.ty=-(t*this.ty-e*r)/a;return this};r.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;return this};r.prototype.clone=function(){var t=new r;t.a=this.a;t.b=this.b;t.c=this.c;t.d=this.d;t.tx=this.tx;t.ty=this.ty;return t};r.prototype.copy=function(t){t.a=this.a;t.b=this.b;t.c=this.c;t.d=this.d;t.tx=this.tx;t.ty=this.ty;return t};r.IDENTITY=new r;r.TEMP_MATRIX=new r},{"./Point":48}],48:[function(t,e,i){function n(t,e){this.x=t||0;this.y=e||0}n.prototype.constructor=n;e.exports=n;n.prototype.clone=function(){return new n(this.x,this.y)};n.prototype.copy=function(t){this.set(t.x,t.y)};n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y};n.prototype.set=function(t,e){this.x=t||0;this.y=e||(e!==0?this.x:0)}},{}],49:[function(t,e,i){var n=t("./Point"),r=t("../const");function a(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i){e[i]=arguments[i]}}if(e[0]instanceof n){var r=[];for(var a=0,s=e.length;a<s;a++){r.push(e[a].x,e[a].y)}e=r}this.closed=true;this.points=e;this.type=0}a.prototype.constructor=a;e.exports=a;a.prototype.clone=function(){return new a(this.points.slice())};a.prototype.contains=function(t,e){var i=false;var n=this.points.length/2;for(var r=0,a=n-1;r<n;a=r++){var s=this.points[r*2],o=this.points[r*2+1],h=this.points[a*2],l=this.points[a*2+1],u=o>e!==l>e&&t<(h-s)*(e-o)/(l-o)+s;if(u){i=!i}}return i}},{"../const":53,"./Point":48}],50:[function(t,e,i){function n(t,e,i,n){this.x=t||0;this.y=e||0;this.width=i||0;this.height=n||0;this.type=1}n.prototype.constructor=n;e.exports=n;n.EMPTY=new n(0,0,0,0);n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)};n.prototype.contains=function(t,e){if(this.width<=0||this.height<=0){return false}if(t>=this.x&&t<this.x+this.width){if(e>=this.y&&e<this.y+this.height){return true}}return false}},{}],51:[function(t,e,i){e.exports={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16}},{}],52:[function(t,e,i){e.exports={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:typeof Float32Array==="undefined"?Array:Float32Array,Uint16Array:typeof Uint16Array==="undefined"?Array:Uint16Array,signum:function(t){if(t>0)return 1;if(t<0)return-1;return 0}}},{}],53:[function(t,e,i){e.exports={PI_2:Math.PI*2,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:false,forceFXAA:false,autoResize:false,transparent:false,backgroundColor:0,clearBeforeRender:true,preserveDrawingBuffer:false,roundPixels:false},RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1}}},{}],54:[function(t,e,i){var n=t("../utils.js"),r=t("../SpineUtil/Matrix.js"),a=t("../SpineUtil/Rectangle.js"),s=t("./DisplayObject"),o=new r;function h(){s.call(this);this.children=[]}h.prototype=Object.create(s.prototype);h.prototype.constructor=h;e.exports=h;Object.defineProperties(h.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;if(e!==0){this.scale.x=t/e}else{this.scale.x=1}this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;if(e!==0){this.scale.y=t/e}else{this.scale.y=1}this._height=t}}});h.prototype.onChildrenChange=function(){};h.prototype.addChild=function(t){var e=arguments.length;if(e>1){for(var i=0;i<e;i++){this.addChild(arguments[i])}}else{if(t.parent){t.parent.removeChild(t)}t.parent=this;this.children.push(t);this.onChildrenChange(this.children.length-1);t.emit("added",this)}return t};h.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length){if(t.parent){t.parent.removeChild(t)}t.parent=this;this.children.splice(e,0,t);this.onChildrenChange(e);t.emit("added",this);return t}else{throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)}};h.prototype.swapChildren=function(t,e){if(t===e){return}var i=this.getChildIndex(t);var n=this.getChildIndex(e);if(i<0||n<0){throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.")}this.children[i]=e;this.children[n]=t;this.onChildrenChange(i<n?i:n)};h.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return e};h.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length){throw new Error("The supplied index is out of bounds")}var i=this.getChildIndex(t);n.removeItems(this.children,i,1);this.children.splice(e,0,t);this.onChildrenChange(e)};h.prototype.getChildAt=function(t){if(t<0||t>=this.children.length){throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller")}return this.children[t]};h.prototype.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=0;i<e;i++){this.removeChild(arguments[i])}}else{var r=this.children.indexOf(t);if(r===-1){return}t.parent=null;n.removeItems(this.children,r,1);this.onChildrenChange(r);t.emit("removed",this)}return t};h.prototype.removeChildAt=function(t){var e=this.getChildAt(t);e.parent=null;n.removeItems(this.children,t,1);this.onChildrenChange(t);e.emit("removed",this);return e};h.prototype.removeChildren=function(t,e){var i=t||0;var n=typeof e==="number"?e:this.children.length;var r=n-i;var a,s;if(r>0&&r<=n){a=this.children.splice(i,r);for(s=0;s<a.length;++s){a[s].parent=null}this.onChildrenChange(t);for(s=0;s<a.length;++s){a[s].emit("removed",this)}return a}else if(r===0&&this.children.length===0){return[]}else{throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}};h.prototype.generateTexture=function(t,e,i){var n=this.getLocalBounds();var r=new RenderTexture(t,n.width|0,n.height|0,i,e);o.tx=-n.x;o.ty=-n.y;r.render(this,o);return r};h.prototype.updateTransform=function(){if(!this.visible){return}this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;t<e;++t){this.children[t].updateTransform()}};h.prototype.containerUpdateTransform=h.prototype.updateTransform;h.prototype.getBounds=function(){if(!this._currentBounds){if(this.children.length===0){return a.EMPTY}var t=Infinity;var e=Infinity;var i=-Infinity;var n=-Infinity;var r;var s;var o;var h=false;for(var l=0,u=this.children.length;l<u;++l){var f=this.children[l];if(!f.visible){continue}r=this.children[l].getBounds();if(r===a.EMPTY){continue}h=true;t=t<r.x?t:r.x;e=e<r.y?e:r.y;s=r.width+r.x;o=r.height+r.y;i=i>s?i:s;n=n>o?n:o}if(!h){this._currentBounds=a.EMPTY;return this._currentBounds}var c=this._bounds;c.x=t;c.y=e;c.width=i-t;c.height=n-e;this._currentBounds=c}return this._currentBounds};h.prototype.containerGetBounds=h.prototype.getBounds;h.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=r.IDENTITY;for(var e=0,i=this.children.length;e<i;++e){this.children[e].updateTransform()}this.worldTransform=t;this._currentBounds=null;return this.getBounds(r.IDENTITY)};h.prototype.renderWebGL=function(t){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}var e,i;if(this._mask||this._filters){t.currentRenderer.flush();if(this._filters&&this._filters.length){t.filterManager.pushFilter(this,this._filters)}if(this._mask){t.maskManager.pushMask(this,this._mask)}t.currentRenderer.start();this._renderWebGL(t);for(e=0,i=this.children.length;e<i;e++){this.children[e].renderWebGL(t)}t.currentRenderer.flush();if(this._mask){t.maskManager.popMask(this,this._mask)}if(this._filters){t.filterManager.popFilter()}t.currentRenderer.start()}else{this._renderWebGL(t);for(e=0,i=this.children.length;e<i;++e){this.children[e].renderWebGL(t)}}};h.prototype._renderWebGL=function(t){};h.prototype._renderCanvas=function(t){};h.prototype.renderCanvas=function(t){if(!this.visible||this.alpha<=0||!this.renderable){return}if(this._mask){t.maskManager.pushMask(this._mask,t)}t.context.save();this._renderCanvas(t);t.context.restore();for(var e=0,i=this.children.length;e<i;++e){this.children[e].renderCanvas(t)}if(this._mask){t.maskManager.popMask(t)}};h.prototype.destroy=function(t){s.prototype.destroy.call(this);if(t){for(var e=0,i=this.children.length;e<i;++e){this.children[e].destroy(t)}}this.removeChildren();this.children=null}},{"../SpineUtil/Matrix.js":47,"../SpineUtil/Rectangle.js":50,"../utils.js":67,"./DisplayObject":55}],55:[function(t,e,i){var n=t("../SpineUtil/Matrix.js"),r=t("../SpineUtil/Point.js"),a=t("../SpineUtil/Rectangle.js"),s=t("eventemitter3"),o=t("../const"),h=new n,l={worldTransform:new n,worldAlpha:1,children:[]};function u(){s.call(this);this.position=new r;this.scale=new r(1,1);this.pivot=new r(0,0);this.skew=new r(0,0);this.rotation=0;this.alpha=1;this.visible=true;this.renderable=true;this.parent=null;this.worldAlpha=1;this.worldTransform=new n;this.filterArea=null;this._sr=0;this._cr=1;this._bounds=new a(0,0,1,1);this._currentBounds=null;this._mask=null}u.prototype=Object.create(s.prototype);u.prototype.constructor=u;e.exports=u;Object.defineProperties(u.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible){return false}t=t.parent}while(t);return true}},mask:{get:function(){return this._mask},set:function(t){if(this._mask){this._mask.renderable=true}this._mask=t;if(this._mask){this._mask.renderable=false}}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}});u.prototype.updateTransform=function(){var t=this.parent.worldTransform;var e=this.worldTransform;var i,n,r,a,s,l;if(this.skew.x||this.skew.y){h.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y);e.a=h.a*t.a+h.b*t.c;e.b=h.a*t.b+h.b*t.d;e.c=h.c*t.a+h.d*t.c;e.d=h.c*t.b+h.d*t.d;e.tx=h.tx*t.a+h.ty*t.c+t.tx;e.ty=h.tx*t.b+h.ty*t.d+t.ty}else{if(this.rotation%o.PI_2){if(this.rotation!==this.rotationCache){this.rotationCache=this.rotation;this._sr=Math.sin(this.rotation);this._cr=Math.cos(this.rotation)}i=this._cr*this.scale.x;n=this._sr*this.scale.x;r=-this._sr*this.scale.y;a=this._cr*this.scale.y;s=this.position.x;l=this.position.y;if(this.pivot.x||this.pivot.y){s-=this.pivot.x*i+this.pivot.y*r;l-=this.pivot.x*n+this.pivot.y*a}e.a=i*t.a+n*t.c;e.b=i*t.b+n*t.d;e.c=r*t.a+a*t.c;e.d=r*t.b+a*t.d;e.tx=s*t.a+l*t.c+t.tx;e.ty=s*t.b+l*t.d+t.ty}else{i=this.scale.x;a=this.scale.y;s=this.position.x-this.pivot.x*i;l=this.position.y-this.pivot.y*a;e.a=i*t.a;e.b=i*t.b;e.c=a*t.c;e.d=a*t.d;e.tx=s*t.a+l*t.c+t.tx;e.ty=s*t.b+l*t.d+t.ty}}this.worldAlpha=this.alpha*this.parent.worldAlpha;this._currentBounds=null};u.prototype.displayObjectUpdateTransform=u.prototype.updateTransform;u.prototype.getBounds=function(t){return a.EMPTY};u.prototype.getLocalBounds=function(){return this.getBounds(n.IDENTITY)};u.prototype.toGlobal=function(t){if(!this.parent){this.parent=l;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}return this.worldTransform.apply(t)};u.prototype.toLocal=function(t,e,i){if(e){t=e.toGlobal(t)}if(!this.parent){this.parent=l;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}return this.worldTransform.applyInverse(t,i)};u.prototype.renderWebGL=function(t){};u.prototype.renderCanvas=function(t){};u.prototype.generateTexture=function(t,e,i){var n=this.getLocalBounds();var r=new RenderTexture(t,n.width|0,n.height|0,e,i);h.tx=-n.x;h.ty=-n.y;r.render(this,h);return r};u.prototype.setParent=function(t){if(!t||!t.addChild){throw new Error("setParent: Argument must be a Container")}t.addChild(this);return t};u.prototype.setTransform=function(t,e,i,n,r,a,s,o,h){this.position.x=t||0;this.position.y=e||0;this.scale.x=!i?1:i;this.scale.y=!n?1:n;this.rotation=r||0;this.skew.x=a||0;this.skew.y=s||0;this.pivot.x=o||0;this.pivot.y=h||0;return this};u.prototype.destroy=function(){this.position=null;this.scale=null;this.pivot=null;this.skew=null;this.parent=null;this._bounds=null;this._currentBounds=null;this._mask=null;this.worldTransform=null;this.filterArea=null}},{"../SpineUtil/Matrix.js":47,"../SpineUtil/Point.js":48,"../SpineUtil/Rectangle.js":50,"../const":53,eventemitter3:2}],56:[function(t,e,i){var n=t("../SpineUtil/Point.js"),r=t("../const.js"),a=t("../SpineUtil/Polygon.js"),s=t("../display/Container.js"),o=new n,h=new a;function l(t,e,i,n,a){s.call(this);this._texture=null;this.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]);this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]);this.indices=n||new Uint16Array([0,1,3,2]);this.dirty=true;this.blendMode=r.BLEND_MODES.NORMAL;this.canvasPadding=0;this.drawMode=a||l.DRAW_MODES.TRIANGLE_MESH;this.texture=t;this.shader=null}l.prototype=Object.create(s.prototype);l.prototype.constructor=l;e.exports=l;Object.defineProperties(l.prototype,{texture:{get:function(){return this._texture},set:function(t){if(this._texture===t){return}this._texture=t;if(t){if(t.baseTexture.hasLoaded){this._onTextureUpdate()}else{t.once("update",this._onTextureUpdate,this)}}}}});l.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh);t.plugins.mesh.render(this)};l.prototype._renderCanvas=function(t){var e=t.context;var i=this.worldTransform;var n=t.resolution;if(t.roundPixels){e.transform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0)}else{e.transform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n)}if(this.drawMode===l.DRAW_MODES.TRIANGLE_MESH){this._renderCanvasTriangleMesh(e)}else{this._renderCanvasTriangles(e)}};l.prototype._renderCanvasTriangleMesh=function(t){var e=this.vertices;var i=this.uvs;var n=e.length/2;for(var r=0;r<n-2;r++){var a=r*2;this._renderCanvasDrawTriangle(t,e,i,a,a+2,a+4)}};l.prototype._renderCanvasTriangles=function(t){var e=this.vertices;var i=this.uvs;var n=this.indices;var r=n.length;for(var a=0;a<r;a+=3){var s=n[a]*2,o=n[a+1]*2,h=n[a+2]*2;this._renderCanvasDrawTriangle(t,e,i,s,o,h)}};l.triArray=new Float32Array(12);l.prototype._renderCanvasDrawTriangle=function(t,e,i,n,r,a){var s=this._texture.baseTexture;var o=s.source;var h=s.width;var u=s.height;if(t.drawImageTriArr){l.triArray[0]=i[n]*s.width;l.triArray[1]=i[n+1]*s.height;l.triArray[2]=e[n];l.triArray[3]=e[n+1];l.triArray[4]=i[r]*s.width;l.triArray[5]=i[r+1]*s.height;l.triArray[6]=e[r];l.triArray[7]=e[r+1];l.triArray[8]=i[a]*s.width;l.triArray[9]=i[a+1]*s.height;l.triArray[10]=e[a];l.triArray[11]=e[a+1];t.drawImageTriArr(o,l.triArray);return}var f=e[n],c=e[r],p=e[a];var d=e[n+1],v=e[r+1],m=e[a+1];var g=i[n]*s.width,x=i[r]*s.width,y=i[a]*s.width;var w=i[n+1]*s.height,T=i[r+1]*s.height,b=i[a+1]*s.height;if(this.canvasPadding>0){var S=this.canvasPadding/this.worldTransform.a;var A=this.canvasPadding/this.worldTransform.d;var C=(f+c+p)/3;var M=(d+v+m)/3;var I=f-C;var _=d-M;var k=Math.sqrt(I*I+_*_);f=C+I/k*(k+S);d=M+_/k*(k+A);I=c-C;_=v-M;k=Math.sqrt(I*I+_*_);c=C+I/k*(k+S);v=M+_/k*(k+A);I=p-C;_=m-M;k=Math.sqrt(I*I+_*_);p=C+I/k*(k+S);m=M+_/k*(k+A)}t.save();t.beginPath();t.moveTo(f,d);t.lineTo(c,v);t.lineTo(p,m);t.closePath();t.clip();var O=g*T+w*y+x*b-T*y-w*x-g*b;var D=f*T+w*p+c*b-T*p-w*c-f*b;var U=g*c+f*y+x*p-c*y-f*x-g*p;var E=g*T*p+w*c*y+f*x*b-f*T*y-w*x*p-g*c*b;var R=d*T+w*m+v*b-T*m-w*v-d*b;var P=g*v+d*y+x*m-v*y-d*x-g*m;var B=g*T*m+w*v*y+d*x*b-d*T*y-w*x*m-g*v*b;t.transform(D/O,R/O,U/O,P/O,E/O,B/O);t.drawImage(o,0,0,h*s.resolution,u*s.resolution,0,0,h,u);t.restore()};l.prototype.renderMeshFlat=function(t){var e=this.context;var i=t.vertices;var n=i.length/2;e.beginPath();for(var r=1;r<n-2;r++){var a=r*2;var s=i[a],o=i[a+2],h=i[a+4];var l=i[a+1],u=i[a+3],f=i[a+5];e.moveTo(s,l);e.lineTo(o,u);e.lineTo(h,f)}e.fillStyle="#FF0000";e.fill();e.closePath()};l.prototype._onTextureUpdate=function(){this.updateFrame=true};l.prototype.getBounds=function(t){if(!this._currentBounds){var e=t||this.worldTransform;var i=e.a;var n=e.b;var r=e.c;var a=e.d;var s=e.tx;var o=e.ty;var h=-Infinity;var l=-Infinity;var u=Infinity;var f=Infinity;var c=this.vertices;for(var p=0,d=c.length;p<d;p+=2){var v=c[p],m=c[p+1];var g=i*v+r*m+s;var x=a*m+n*v+o;u=g<u?g:u;f=x<f?x:f;h=g>h?g:h;l=x>l?x:l}if(u===-Infinity||l===Infinity){return Rectangle.EMPTY}var y=this._bounds;y.x=u;y.width=h-u;y.y=f;y.height=l-f;this._currentBounds=y}return this._currentBounds};l.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y)){return false}this.worldTransform.applyInverse(t,o);var e=this.vertices;var i=h.points;var n,r;if(this.drawMode===l.DRAW_MODES.TRIANGLES){var a=this.indices;r=this.indices.length;for(n=0;n<r;n+=3){var s=a[n]*2,u=a[n+1]*2,f=a[n+2]*2;i[0]=e[s];i[1]=e[s+1];i[2]=e[u];i[3]=e[u+1];i[4]=e[f];i[5]=e[f+1];if(h.contains(o.x,o.y)){return true}}}else{r=e.length;for(n=0;n<r;n+=6){i[0]=e[n];i[1]=e[n+1];i[2]=e[n+2];i[3]=e[n+3];i[4]=e[n+4];i[5]=e[n+5];if(h.contains(o.x,o.y)){return true}}}return false};l.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../SpineUtil/Point.js":48,"../SpineUtil/Polygon.js":49,"../const.js":53,"../display/Container.js":54}],57:[function(t,e,i){var n=t("./Mesh");function r(t,e,i){n.call(this,t);this._ready=true;this.segmentsX=e||10;this.segmentsY=i||10;this.drawMode=n.DRAW_MODES.TRIANGLES;this.refresh()}r.prototype=Object.create(n.prototype);r.prototype.constructor=r;e.exports=r;r.prototype.refresh=function(){var t=this.segmentsX*this.segmentsY;var e=[];var i=[];var n=[];var r=[];var a=this.texture;var s=this.segmentsX-1;var o=this.segmentsY-1;var h=0;var l=a.width/s;var u=a.height/o;for(h=0;h<t;h++){var f=h%this.segmentsX;var c=h/this.segmentsX|0;e.push(f*l,c*u);n.push(a._uvs.x0+(a._uvs.x1-a._uvs.x0)*(f/(this.segmentsX-1)),a._uvs.y0+(a._uvs.y3-a._uvs.y0)*(c/(this.segmentsY-1)))}var p=s*o;for(h=0;h<p;h++){var d=h%s;var v=h/s|0;var m=v*this.segmentsX+d;var g=v*this.segmentsX+d+1;var x=(v+1)*this.segmentsX+d;var y=(v+1)*this.segmentsX+d+1;r.push(m,g,x);r.push(g,y,x)}this.vertices=new Float32Array(e);this.uvs=new Float32Array(n);this.colors=new Float32Array(i);this.indices=new Uint16Array(r)};r.prototype._onTextureUpdate=function(){n.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}}},{"./Mesh":56}],58:[function(t,e,i){var n=t("./Mesh");var r=t("../SpineUtil/Point.js");function a(t,e){n.call(this,t);this.points=e;this.vertices=new Float32Array(e.length*4);this.uvs=new Float32Array(e.length*4);this.colors=new Float32Array(e.length*2);this.indices=new Uint16Array(e.length*2);this._ready=true;this.refresh()}a.prototype=Object.create(n.prototype);
a.prototype.constructor=a;e.exports=a;a.prototype.refresh=function(){var t=this.points;if(t.length<1||!this._texture._uvs){return}var e=this.uvs;var i=this.indices;var n=this.colors;var a=this._texture._uvs;var s=new r(a.x0,a.y0);var o=new r(a.x2-a.x0,a.y2-a.y0);e[0]=0+s.x;e[1]=0+s.y;e[2]=0+s.x;e[3]=1*o.y+s.y;n[0]=1;n[1]=1;i[0]=0;i[1]=1;var h=t.length,l,u,f;for(var c=1;c<h;c++){l=t[c];u=c*4;f=c/(h-1);e[u]=f*o.x+s.x;e[u+1]=0+s.y;e[u+2]=f*o.x+s.x;e[u+3]=1*o.y+s.y;u=c*2;n[u]=1;n[u+1]=1;u=c*2;i[u]=u;i[u+1]=u+1}this.dirty=true};a.prototype._onTextureUpdate=function(){n.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}};a.prototype.updateTransform=function(){var t=this.points;if(t.length<1){return}var e=t[0];var i;var n=0;var r=0;var a=this.vertices;var s=t.length,o,h,l,u,f;for(var c=0;c<s;c++){o=t[c];h=c*4;if(c<t.length-1){i=t[c+1]}else{i=o}r=-(i.x-e.x);n=i.y-e.y;l=(1-c/(s-1))*10;if(l>1){l=1}u=Math.sqrt(n*n+r*r);f=this._texture.height/2;n/=u;r/=u;n*=f;r*=f;a[h]=o.x+n;a[h+1]=o.y+r;a[h+2]=o.x-n;a[h+3]=o.y-r;e=o}this.containerUpdateTransform()}},{"../SpineUtil/Point.js":48,"./Mesh":56}],59:[function(t,e,i){e.exports={Mesh:t("./Mesh"),Plane:t("./Plane"),Rope:t("./Rope")}},{"./Mesh":56,"./Plane":57,"./Rope":58}],60:[function(t,e,i){var n=t("../utils"),r=t("../SpineUtil/Matrix.js"),a=t("../const"),s=t("eventemitter3");function o(t,e,i,n){s.call(this);if(n){for(var o in a.DEFAULT_RENDER_OPTIONS){if(typeof n[o]==="undefined"){n[o]=a.DEFAULT_RENDER_OPTIONS[o]}}}else{n=a.DEFAULT_RENDER_OPTIONS}this.type=a.RENDERER_TYPE.UNKNOWN;this.width=e||800;this.height=i||600;this.resolution=n.resolution;this.transparent=n.transparent;this.autoResize=n.autoResize||false;this.blendModes=null;this.preserveDrawingBuffer=n.preserveDrawingBuffer;this.clearBeforeRender=n.clearBeforeRender;this.roundPixels=n.roundPixels;this._backgroundColor=0;this._backgroundColorRgb=[0,0,0];this._backgroundColorString="#000000";this.backgroundColor=n.backgroundColor||this._backgroundColor;this._tempDisplayObjectParent={worldTransform:new r,worldAlpha:1,children:[]};this._lastObjectRendered=this._tempDisplayObjectParent}o.prototype=Object.create(s.prototype);o.prototype.constructor=o;e.exports=o;Object.defineProperties(o.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t;this._backgroundColorString=n.hex2string(t);n.hex2rgb(t,this._backgroundColorRgb)}}});o.prototype.resize=function(t,e){this.width=t*this.resolution;this.height=e*this.resolution;this.view.width=this.width;this.view.height=this.height;if(this.autoResize){this.view.style.width=this.width/this.resolution+"px";this.view.style.height=this.height/this.resolution+"px"}};o.prototype.destroy=function(t){if(t&&this.view.parentNode){this.view.parentNode.removeChild(this.view)}this.type=a.RENDERER_TYPE.UNKNOWN;this.width=0;this.height=0;this.view=null;this.resolution=0;this.transparent=false;this.autoResize=false;this.blendModes=null;this.preserveDrawingBuffer=false;this.clearBeforeRender=false;this.roundPixels=false;this._backgroundColor=0;this._backgroundColorRgb=null;this._backgroundColorString=null}},{"../SpineUtil/Matrix.js":47,"../const":53,"../utils":67,eventemitter3:2}],61:[function(t,e,i){var n=t("../SystemRenderer"),r=t("../../utils"),a=t("../../SpineUtil/Matrix.js"),s=t("../../const");function o(t,e,i){i=i||{};n.call(this,"Canvas",t,e,i);this.type=s.RENDERER_TYPE.CANVAS;this.refresh=true;this._mapBlendModes();this._tempDisplayObjectParent={worldTransform:new a,worldAlpha:1}}o.prototype=Object.create(n.prototype);o.prototype.constructor=o;e.exports=o;o.prototype.setContext=function(t){this.context=t};o.prototype.render=function(t){var e=t.parent;this._lastObjectRendered=t;t.parent=this._tempDisplayObjectParent;t.updateTransform();t.parent=e;this.renderDisplayObject(t,this.context)};o.prototype.destroy=function(t){n.prototype.destroy.call(this,t);this.context=null;this.refresh=true};o.prototype.renderDisplayObject=function(t,e){var i=this.context;this.context=e;t.renderCanvas(this);this.context=i};o.prototype._mapBlendModes=function(){if(!this.blendModes){this.blendModes={};this.blendModes[s.BLEND_MODES.NORMAL]="source-over";this.blendModes[s.BLEND_MODES.ADD]="lighter";this.blendModes[s.BLEND_MODES.MULTIPLY]="multiply";this.blendModes[s.BLEND_MODES.SCREEN]="screen";this.blendModes[s.BLEND_MODES.OVERLAY]="overlay";this.blendModes[s.BLEND_MODES.DARKEN]="darken";this.blendModes[s.BLEND_MODES.LIGHTEN]="lighten";this.blendModes[s.BLEND_MODES.COLOR_DODGE]="color-dodge";this.blendModes[s.BLEND_MODES.COLOR_BURN]="color-burn";this.blendModes[s.BLEND_MODES.HARD_LIGHT]="hard-light";this.blendModes[s.BLEND_MODES.SOFT_LIGHT]="soft-light";this.blendModes[s.BLEND_MODES.DIFFERENCE]="difference";this.blendModes[s.BLEND_MODES.EXCLUSION]="exclusion";this.blendModes[s.BLEND_MODES.HUE]="hue";this.blendModes[s.BLEND_MODES.SATURATION]="saturate";this.blendModes[s.BLEND_MODES.COLOR]="color";this.blendModes[s.BLEND_MODES.LUMINOSITY]="luminosity"}}},{"../../SpineUtil/Matrix.js":47,"../../const":53,"../../utils":67,"../SystemRenderer":60}],62:[function(t,e,i){var n=t("../../../utils");var r={};e.exports=r;r.getTintedTexture=function(t,e){var i=t.texture;e=r.roundColor(e);var n="#"+("00000"+(e|0).toString(16)).substr(-6);i.tintCache=i.tintCache||{};if(i.tintCache[n]){return i.tintCache[n]}var a=r.canvas||document.createElement("canvas");r.tintMethod(i,e,a);if(r.convertTintToImage){var s=new Image;s.src=a.toDataURL();i.tintCache[n]=s}else{i.tintCache[n]=a;r.canvas=null}return a};r.tintWithMultiply=function(t,e,i){var n=i.getContext("2d");var r=t.baseTexture.resolution;var a=t.crop.clone();a.x*=r;a.y*=r;a.width*=r;a.height*=r;i.width=a.width;i.height=a.height;n.fillStyle="#"+("00000"+(e|0).toString(16)).substr(-6);n.fillRect(0,0,a.width,a.height);n.globalCompositeOperation="multiply";n.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);n.globalCompositeOperation="destination-atop";n.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height)};r.tintWithOverlay=function(t,e,i){var n=i.getContext("2d");var r=t.baseTexture.resolution;var a=t.crop.clone();a.x*=r;a.y*=r;a.width*=r;a.height*=r;i.width=a.width;i.height=a.height;n.globalCompositeOperation="copy";n.fillStyle="#"+("00000"+(e|0).toString(16)).substr(-6);n.fillRect(0,0,a.width,a.height);n.globalCompositeOperation="destination-atop";n.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height)};r.tintWithPerPixel=function(t,e,i){var r=i.getContext("2d");var a=t.baseTexture.resolution;var s=t.crop.clone();s.x*=a;s.y*=a;s.width*=a;s.height*=a;i.width=s.width;i.height=s.height;r.globalCompositeOperation="copy";r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);var o=n.hex2rgb(e);var h=o[0],l=o[1],u=o[2];var f=r.getImageData(0,0,s.width,s.height);var c=f.data;for(var p=0;p<c.length;p+=4){c[p+0]*=h;c[p+1]*=l;c[p+2]*=u}r.putImageData(f,0,0)};r.roundColor=function(t){var e=r.cacheStepsPerColorChannel;var i=n.hex2rgb(t);i[0]=Math.min(255,i[0]/e*e);i[1]=Math.min(255,i[1]/e*e);i[2]=Math.min(255,i[2]/e*e);return n.rgb2hex(i)};r.cacheStepsPerColorChannel=8;r.convertTintToImage=false;r.canUseMultiply=true;r.tintMethod=r.canUseMultiply?r.tintWithMultiply:r.tintWithPerPixel},{"../../../utils":67}],63:[function(t,e,i){var n=t("../texture/Texture"),r=t("../display/Container"),a=t("../renderers/canvas/utils/CanvasTinter"),s=t("../utils"),o=t("../const"),h=t("../SpineUtil/Matrix.js"),l=t("../SpineUtil/Point.js"),u=t("../SpineUtil/GroupD8.js"),f=new l,u=u,c=new h;function p(t){r.call(this);this.anchor=new l;this._texture=null;this._width=0;this._height=0;this.tint=16777215;this.blendMode=o.BLEND_MODES.NORMAL;this.shader=null;this.cachedTint=16777215;this.texture=t||n.EMPTY}p.prototype=Object.create(r.prototype);p.prototype.constructor=p;e.exports=p;Object.defineProperties(p.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(t){var e=s.sign(this.scale.x)||1;this.scale.x=e*t/this.texture._frame.width;this._width=t}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(t){var e=s.sign(this.scale.y)||1;this.scale.y=e*t/this.texture._frame.height;this._height=t}},texture:{get:function(){return this._texture},set:function(t){if(this._texture===t){return}this._texture=t;this.cachedTint=16777215;if(t){if(t.baseTexture.hasLoaded){this._onTextureUpdate()}else{t.once("update",this._onTextureUpdate,this)}}}}});p.prototype._onTextureUpdate=function(){if(this._width){this.scale.x=s.sign(this.scale.x)*this._width/this.texture.frame.width}if(this._height){this.scale.y=s.sign(this.scale.y)*this._height/this.texture.frame.height}};p.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite);t.plugins.sprite.render(this)};p.prototype.getBounds=function(t){if(!this._currentBounds){var e=this._texture._frame.width;var i=this._texture._frame.height;var n=e*(1-this.anchor.x);var r=e*-this.anchor.x;var a=i*(1-this.anchor.y);var s=i*-this.anchor.y;var o=t||this.worldTransform;var h=o.a;var l=o.b;var u=o.c;var f=o.d;var c=o.tx;var p=o.ty;var d,v,m,g;var x=h*r+u*s+c;var y=f*s+l*r+p;var w=h*n+u*s+c;var T=f*s+l*n+p;var b=h*n+u*a+c;var S=f*a+l*n+p;var A=h*r+u*a+c;var C=f*a+l*r+p;d=x;d=w<d?w:d;d=b<d?b:d;d=A<d?A:d;m=y;m=T<m?T:m;m=S<m?S:m;m=C<m?C:m;v=x;v=w>v?w:v;v=b>v?b:v;v=A>v?A:v;g=y;g=T>g?T:g;g=S>g?S:g;g=C>g?C:g;if(this.children.length){var M=this.containerGetBounds();n=M.x;r=M.x+M.width;a=M.y;s=M.y+M.height;d=d<n?d:n;m=m<a?m:a;v=v>r?v:r;g=g>s?g:s}var I=this._bounds;I.x=d;I.width=v-d;I.y=m;I.height=g-m;this._currentBounds=I}return this._currentBounds};p.prototype.getLocalBounds=function(){this._bounds.x=-this._texture._frame.width*this.anchor.x;this._bounds.y=-this._texture._frame.height*this.anchor.y;this._bounds.width=this._texture._frame.width;this._bounds.height=this._texture._frame.height;return this._bounds};p.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,f);var e=this._texture._frame.width;var i=this._texture._frame.height;var n=-e*this.anchor.x;var r;if(f.x>n&&f.x<n+e){r=-i*this.anchor.y;if(f.y>r&&f.y<r+i){return true}}return false};p.prototype._renderCanvas=function(t){if(this.texture.crop.width<=0||this.texture.crop.height<=0){return}var e=t.blendModes[this.blendMode];if(e!==t.context.globalCompositeOperation){t.context.globalCompositeOperation=e}if(this.texture.valid){var i=this._texture,n=this.worldTransform,r,s,h=i.crop.width,l=i.crop.height;t.context.globalAlpha=this.worldAlpha;var f=i.baseTexture.scaleMode===o.SCALE_MODES.LINEAR;if(t.smoothProperty&&t.context[t.smoothProperty]!==f){t.context[t.smoothProperty]=f}if((i.rotate&3)===2){h=i.crop.height;l=i.crop.width}if(i.trim){r=i.crop.width/2+i.trim.x-this.anchor.x*i.trim.width;s=i.crop.height/2+i.trim.y-this.anchor.y*i.trim.height}else{r=(.5-this.anchor.x)*i._frame.width;s=(.5-this.anchor.y)*i._frame.height}if(i.rotate){n.copy(c);n=c;u.matrixAppendRotationInv(n,i.rotate,r,s);r=0;s=0}r-=h/2;s-=l/2;if(t.roundPixels){t.context.transform(n.a,n.b,n.c,n.d,n.tx*t.resolution|0,n.ty*t.resolution|0);r=r|0;s=s|0}else{t.context.transform(n.a,n.b,n.c,n.d,n.tx*t.resolution,n.ty*t.resolution)}var p=i.baseTexture.resolution;if(this.tint!==16777215){if(this.cachedTint!==this.tint){this.cachedTint=this.tint;this.tintedTexture=a.getTintedTexture(this,this.tint)}t.context.drawImage(this.tintedTexture,0,0,h*p,l*p,r*t.resolution,s*t.resolution,h*t.resolution,l*t.resolution)}else{t.context.drawImage(i.baseTexture.source,i.crop.x*p,i.crop.y*p,h*p,l*p,r*t.resolution,s*t.resolution,h*t.resolution,l*t.resolution)}}};p.prototype.destroy=function(t,e){r.prototype.destroy.call(this);this.anchor=null;if(t){this._texture.destroy(e)}this._texture=null;this.shader=null};p.fromFrame=function(t){var e=s.TextureCache[t];if(!e){throw new Error('The frameId "'+t+'" does not exist in the texture cache')}return new p(e)};p.fromImage=function(t,e,i){return new p(n.fromImage(t,e,i))}},{"../SpineUtil/GroupD8.js":46,"../SpineUtil/Matrix.js":47,"../SpineUtil/Point.js":48,"../const":53,"../display/Container":54,"../renderers/canvas/utils/CanvasTinter":62,"../texture/Texture":65,"../utils":67}],64:[function(t,e,i){var n=t("../utils"),r=t("../const"),a=t("eventemitter3");function s(t,e,i){a.call(this);this.resolution=i||1;this.width=100;this.height=100;this.realWidth=100;this.realHeight=100;this.scaleMode=e||r.SCALE_MODES.DEFAULT;this.hasLoaded=false;this.isLoading=false;this.source=null;this.premultipliedAlpha=true;this.imageUrl=null;this.isPowerOfTwo=false;this.mipmap=false;this._glTextures={};if(t){this.loadSource(t)}}s.prototype=Object.create(a.prototype);s.prototype.constructor=s;e.exports=s;s.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.height;this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=n.isPowerOfTwo(this.realWidth,this.realHeight);this.emit("update",this)};s.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=false;this.isLoading=false;if(e&&this.source){this.source.onload=null;this.source.onerror=null}this.source=t;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height){this._sourceLoaded()}else if(!t.getContext){this.isLoading=true;var i=this;t.onload=function(){t.onload=null;t.onerror=null;if(!i.isLoading){return}i.isLoading=false;i._sourceLoaded();i.emit("loaded",i)};t.onerror=function(){t.onload=null;t.onerror=null;if(!i.isLoading){return}i.isLoading=false;i.emit("error",i)};if(t.complete&&t.src){this.isLoading=false;t.onload=null;t.onerror=null;if(t.width&&t.height){this._sourceLoaded();if(e){this.emit("loaded",this)}}else{if(e){this.emit("error",this)}}}}};s.prototype._sourceLoaded=function(){this.hasLoaded=true;this.update()};s.prototype.destroy=function(){if(this.imageUrl){delete n.BaseTextureCache[this.imageUrl];delete n.TextureCache[this.imageUrl];this.imageUrl=null;if(!navigator.isCocoonJS){this.source.src=""}}else if(this.source&&this.source._pixiId){delete n.BaseTextureCache[this.source._pixiId]}this.source=null;this.dispose()};s.prototype.dispose=function(){this.emit("dispose",this)};s.prototype.updateSourceImage=function(t){this.source.src=t;this.loadSource(this.source)};s.fromImageObj=function(t){var e=new s(t);e.hasLoaded=true;e.update();return e};s.fromImage=function(t,e,i){var r=n.BaseTextureCache[t];if(e===undefined&&t.indexOf("data:")!==0){e=true}if(!r){var a=new Image;if(e){a.crossOrigin=""}r=new s(a,i);r.imageUrl=t;a.src=t;n.BaseTextureCache[t]=r;r.resolution=n.getResolutionOfUrl(t)}return r};s.fromCanvas=function(t,e){if(!t._pixiId){t._pixiId="canvas_"+n.uid()}var i=n.BaseTextureCache[t._pixiId];if(!i){i=new s(t,e);n.BaseTextureCache[t._pixiId]=i}return i}},{"../const":53,"../utils":67,eventemitter3:2}],65:[function(t,e,i){var n=t("./BaseTexture"),r=t("./TextureUvs"),a=t("eventemitter3"),s=t("../SpineUtil/Rectangle.js"),o=t("../utils");function h(t,e,i,n,r){a.call(this);this.noFrame=false;if(!e){this.noFrame=true;e=new s(0,0,1,1)}if(t instanceof h){t=t.baseTexture}this.baseTexture=t;this._frame=e;this.trim=n;this.valid=false;this.requiresUpdate=false;this._uvs=null;this.width=0;this.height=0;this.crop=i||e;this._rotate=+(r||0);if(r===true){this._rotate=2}else{if(this._rotate%2!==0){throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually"}}if(t.hasLoaded){if(this.noFrame){e=new s(0,0,t.width,t.height);t.on("update",this.onBaseTextureUpdated,this)}this.frame=e}else{t.once("loaded",this.onBaseTextureLoaded,this)}}h.prototype=Object.create(a.prototype);h.prototype.constructor=h;e.exports=h;Object.defineProperties(h.prototype,{frame:{get:function(){return this._frame},set:function(t){this._frame=t;this.noFrame=false;this.width=t.width;this.height=t.height;if(!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)){throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)}this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded;if(this.trim){this.width=this.trim.width;this.height=this.trim.height;this._frame.width=this.trim.width;this._frame.height=this.trim.height}else{this.crop=t}if(this.valid){this._updateUvs()}}},rotate:{get:function(){return this._rotate},set:function(t){this._rotate=t;if(this.valid){this._updateUvs()}}}});h.prototype.update=function(){this.baseTexture.update()};h.prototype.onBaseTextureLoaded=function(t){if(this.noFrame){this.frame=new s(0,0,t.width,t.height)}else{this.frame=this._frame}this.emit("update",this)};h.prototype.onBaseTextureUpdated=function(t){this._frame.width=t.width;this._frame.height=t.height;this.emit("update",this)};h.prototype.destroy=function(t){if(this.baseTexture){if(t){this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this);this.baseTexture.off("loaded",this.onBaseTextureLoaded,this);this.baseTexture=null}this._frame=null;this._uvs=null;this.trim=null;this.crop=null;this.valid=false;this.off("dispose",this.dispose,this);this.off("update",this.update,this)};h.prototype.clone=function(){return new h(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)};h.prototype._updateUvs=function(){if(!this._uvs){this._uvs=new r}this._uvs.set(this.crop,this.baseTexture,this.rotate)};h.fromImage=function(t,e,i){var r=o.TextureCache[t];if(!r){r=new h(n.fromImage(t,e,i));o.TextureCache[t]=r}return r};h.fromFrame=function(t){var e=o.TextureCache[t];if(!e){throw new Error('The frameId "'+t+'" does not exist in the texture cache')}return e};h.fromCanvas=function(t,e){return new h(n.fromCanvas(t,e))};h.fromVideo=function(t,e){if(typeof t==="string"){return h.fromVideoUrl(t,e)}else{return new h(VideoBaseTexture.fromVideo(t,e))}};h.fromVideoUrl=function(t,e){return new h(VideoBaseTexture.fromUrl(t,e))};h.addTextureToCache=function(t,e){o.TextureCache[e]=t};h.removeTextureFromCache=function(t){var e=o.TextureCache[t];delete o.TextureCache[t];delete o.BaseTextureCache[t];return e};h.EMPTY=new h(new n)},{"../SpineUtil/Rectangle.js":50,"../utils":67,"./BaseTexture":64,"./TextureUvs":66,eventemitter3:2}],66:[function(t,e,i){function n(){this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1}e.exports=n;var r=t("../SpineUtil/GroupD8");n.prototype.set=function(t,e,i){var n=e.width;var a=e.height;if(i){var s=r.isSwapWidthHeight(i);var o=(s?t.height:t.width)/2/n;var h=(s?t.width:t.height)/2/a;var l=t.x/n+o;var u=t.y/a+h;i=r.add(i,r.NW);this.x0=l+o*r.uX(i);this.y0=u+h*r.uY(i);i=r.add(i,2);this.x1=l+o*r.uX(i);this.y1=u+h*r.uY(i);i=r.add(i,2);this.x2=l+o*r.uX(i);this.y2=u+h*r.uY(i);i=r.add(i,2);this.x3=l+o*r.uX(i);this.y3=u+h*r.uY(i)}else{this.x0=t.x/n;this.y0=t.y/a;this.x1=(t.x+t.width)/n;this.y1=t.y/a;this.x2=(t.x+t.width)/n;this.y2=(t.y+t.height)/a;this.x3=t.x/n;this.y3=(t.y+t.height)/a}}},{"../SpineUtil/GroupD8":46}],67:[function(t,e,i){e.exports={hex2string:function(t){t=t.toString(16);t="000000".substr(0,6-t.length)+t;return"#"+t},hex2rgb:function(t,e){e=e||[];e[0]=(t>>16&255)/255;e[1]=(t>>8&255)/255;e[2]=(t&255)/255;return e},removeItems:function(t,e,i){var n=t.length;if(e>=n||i===0){return}i=e+i>n?n-e:i;for(var r=e,a=n-i;r<a;++r){t[r]=t[r+i]}t.length=a},isPowerOfTwo:function(t,e){return t>0&&(t&t-1)===0&&e>0&&(e&e-1)===0},rgb2hex:function(t){return(t[0]*255<<16)+(t[1]*255<<8)+t[2]*255}}},{}]},{},[1]);function UISpine(){}UISpine.prototype=new UISkeletonAnimation;UISpine.prototype.initUISpine=UISkeletonAnimation.prototype.initUISkeletonAnimation;UISpine.prototype.onComplete=function(t,e){if(e>=this.repeatTimes){if(this.onDone){this.onDone()}}else if(this.onOneCycle){this.onOneCycle()}if(this.repeatTimes>1&&e>=this.repeatTimes){var i=this.spineInstance.state.tracks[t];i.animation.apply(this.spineInstance.skeleton,i.lastTime,i.endTime,false,i.events);this.spineInstance.state.clearTrack(t)}};UISpine.prototype.doPlay=UISpine.prototype.gotoAndPlay=function(t,e,i,n,r,a){var s=this;this.animationName=t;if(this.spineInstance){this.onDone=i;this.onOneCycle=n;this.repeatTimes=e?e:Math.MAX_VALUE;this.spineInstance.state.setAnimationByName(0,t,this.repeatTimes!=1);this.spineInstance.state.onComplete=this.onComplete.bind(this)}return this};UISpine.prototype.pause=function(){if(this.spineInstance){this.spineInstance.state.timeScale=0}return this};UISpine.prototype.resume=function(){if(this.spineInstance){this.spineInstance.state.timeScale=1}return this};UISpine.prototype.createArmature=function(t,e,i,n){if(this.spineInstance){this.spineInstance=null}var r=new spine.SpineRuntime.Atlas(e,function(e,i){i(spine.BaseTexture.fromImageObj(t))});var a=new spine.SpineRuntime.AtlasAttachmentParser(r);var s=new spine.SpineRuntime.SkeletonJsonParser(a);var o=s.readSkeletonData(i);this.spineInstance=new spine.Spine(o);this.animationNames=[];this.spineInstance.spineData.animations.forEach(function(t){this.animationNames.push(t.name)},this);this.skinNames=[];this.spineInstance.spineData.skins.forEach(function(t){this.skinNames.push(t.name)},this);this.animationName=this.animationName&&this.animationNames.indexOf(this.animationName)>-1?this.animationName:this.animationNames[0];this.skinName=this.skinName&&this.skinNames.indexOf(this.skinName)>=0?this.skinName:this.skinNames[0];if(!spine.renderer){spine.renderer=new spine.CanvasRenderer}return};UISpine.prototype.update=function(t){var e=t.timeStep*this.animTimeScale;this.spineInstance.update(e/1e3)};UISpine.prototype.destroyArmature=function(){if(this.spineInstance){this.spineInstance=null;this.animationNames=null;this.animationName=void 0;this.skinName=void 0}};UISpine.prototype.paintSelfOnly=function(t){if(!this.spineInstance){return}var e=this.h;var i=this.w>>1;t.translate(i,e);t.scale(this.animationScaleX,this.animationScaleY);if(!this.isPaused()){this.update(t)}spine.renderer.setContext(t);spine.renderer.render(this.spineInstance);if(isNaN(t.needRedraw)){t.needRedraw=1}t.needRedraw++;return};UISpine.prototype.setSkin=function(t){if(this.spineInstance){this.skinName=t;this.spineInstance.skeleton.setSkin(null);this.spineInstance.skeleton.setSkinByName(t)}return this};UISpine.prototype.getBound=function(){if(!this.spineInstance){return{x:this.left,y:this.top,width:this.w,height:this.h}}var t=this.spineInstance.skeleton.findSlot("BoundingBox");if(t){var e=t.attachment.vertices;return{x:e[0],y:e[1],width:e[4]-e[0],height:e[5]-e[1]}}else{var i=this.spineInstance.getBounds();return{x:this.x+this.w/2+i.x,y:this.y+this.h+i.y,width:i.width,height:i.height}}};UISpine.prototype.getCurrentSkinKey=function(){if(this.spineInstance){return this.skinName}};UISpine.prototype.getCurrentAnimKey=function(){if(this.spineInstance){return this.animationName}};UISpine.prototype.getSkins=function(){if(this.spineInstance){return this.skinNames}return["default"]};UISpine.prototype.getDuration=UISpine.prototype.getAnimationDuration=function(t){if(!this.spineInstance)return 0;return this.spineInstance.state.tracks[0].animation.endTime};UISpine.prototype.replaceSlotImage=function(t,e,i){if(!this.spineInstance||!e){return}var n=this.spineInstance.skeleton.findSlotIndex(t);if(n<0){return}var r=this.spineInstance.skeleton.slots[n];var a=spine.BaseTexture.fromImageObj(e);if(r.currentSprite){r.currentSprite.texture.baseTexture=a}return this};function UISpineCreator(){var t=["ui-spine","ui-spine",null,true];ShapeCreator.apply(this,t);this.createShape=function(t){var e=new UISpine;return e.initUISpine(this.type,200,200)};return}ShapeFactoryGet().addShapeCreator(new UISpineCreator);

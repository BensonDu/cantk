var __extends=this&&this.__extends||function(t,i){for(var e in i)if(i.hasOwnProperty(e))t[e]=i[e];function a(){this.constructor=t}t.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)};var Matrix=function(){function t(t,i,e,a,n,s){if(t===void 0){t=1}if(i===void 0){i=0}if(e===void 0){e=0}if(a===void 0){a=1}if(n===void 0){n=0}if(s===void 0){s=0}this.a=t;this.b=i;this.c=e;this.d=a;this.tx=n;this.ty=s}var i=t.prototype;i.prepend=function(t,i,e,a,n,s){var r=this.tx;if(t!=1||i!=0||e!=0||a!=1){var o=this.a;var l=this.c;this.a=o*t+this.b*e;this.b=o*i+this.b*a;this.c=l*t+this.d*e;this.d=l*i+this.d*a}this.tx=r*t+this.ty*e+n;this.ty=r*i+this.ty*a+s;return this};i.append=function(t,i,e,a,n,s){var r=this.a;var o=this.b;var l=this.c;var h=this.d;if(t!=1||i!=0||e!=0||a!=1){this.a=t*r+i*l;this.b=t*o+i*h;this.c=e*r+a*l;this.d=e*o+a*h}this.tx=n*r+s*l+this.tx;this.ty=n*o+s*h+this.ty;return this};i.prependTransform=function(t,i,e,a,n,s,r,o,l){if(n%360){var h=n;var u=egret.NumberUtils.cos(h);var f=egret.NumberUtils.sin(h)}else{u=1;f=0}if(o||l){this.tx-=o;this.ty-=l}if(s||r){this.prepend(u*e,f*e,-f*a,u*a,0,0);this.prepend(egret.NumberUtils.cos(r),egret.NumberUtils.sin(r),-egret.NumberUtils.sin(s),egret.NumberUtils.cos(s),t,i)}else{this.prepend(u*e,f*e,-f*a,u*a,t,i)}return this};i.appendTransform=function(t,i,e,a,n,s,r,o,l){if(n%360){var h=n;var u=egret.NumberUtils.cos(h);var f=egret.NumberUtils.sin(h)}else{u=1;f=0}if(s||r){this.append(egret.NumberUtils.cos(r),egret.NumberUtils.sin(r),-egret.NumberUtils.sin(s),egret.NumberUtils.cos(s),t,i);this.append(u*e,f*e,-f*a,u*a,0,0)}else{this.append(u*e,f*e,-f*a,u*a,t,i)}if(o||l){this.tx-=o*this.a+l*this.c;this.ty-=o*this.b+l*this.d}return this};i.rotate=function(t){var i=Math.cos(t);var e=Math.sin(t);var a=this.a;var n=this.c;var s=this.tx;this.a=a*i-this.b*e;this.b=a*e+this.b*i;this.c=n*i-this.d*e;this.d=n*e+this.d*i;this.tx=s*i-this.ty*e;this.ty=s*e+this.ty*i;return this};i.skew=function(t,i){this.append(egret.NumberUtils.cos(i),egret.NumberUtils.sin(i),-egret.NumberUtils.sin(t),egret.NumberUtils.cos(t),0,0);return this};i.scale=function(t,i){this.a*=t;this.d*=i;this.c*=t;this.b*=i;this.tx*=t;this.ty*=i;return this};i.translate=function(t,i){this.tx+=t;this.ty+=i;return this};i.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this};i.identityMatrix=function(t){this.a=t.a;this.b=t.b;this.c=t.c;this.d=t.d;this.tx=t.tx;this.ty=t.ty;return this};i.invert=function(){var t=this.a;var i=this.b;var e=this.c;var a=this.d;var n=this.tx;var s=t*a-i*e;this.a=a/s;this.b=-i/s;this.c=-e/s;this.d=t/s;this.tx=(e*this.ty-a*n)/s;this.ty=-(t*this.ty-i*n)/s;return this};t.transformCoords=function(t,i,e){var a=egret.Point.identity;a.x=t.a*i+t.c*e+t.tx;a.y=t.d*e+t.b*i+t.ty;return a};i.toArray=function(t){if(!this.array){this.array=new Float32Array(9)}if(t){this.array[0]=this.a;this.array[1]=this.b;this.array[2]=0;this.array[3]=this.c;this.array[4]=this.d;this.array[5]=0;this.array[6]=this.tx;this.array[7]=this.ty;this.array[8]=1}else{this.array[0]=this.a;this.array[1]=this.b;this.array[2]=this.tx;this.array[3]=this.c;this.array[4]=this.d;this.array[5]=this.ty;this.array[6]=0;this.array[7]=0;this.array[8]=1}return this.array};i.setTo=function(t,i,e,a,n,s){this.a=t;this.b=i;this.c=e;this.d=a;this.tx=n;this.ty=s};i.copyFrom=function(t){this.identityMatrix(t)};i.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)};i.concat=function(t){var i=this.a;var e=this.b;var a=this.c;var n=this.d;var s=this.tx;var r=this.ty;var o=t.a;var l=t.b;var h=t.c;var u=t.d;var f=t.tx;var _=t.ty;var m=i*o;var d=0;var c=0;var p=n*u;var v=s*o+f;var g=r*u+_;if(e!=0||a!=0||l!=0||h!=0){m+=e*h;p+=a*l;d+=i*l+e*u;c+=a*o+n*h;v+=r*h;g+=s*l}this.a=m;this.b=d;this.c=c;this.d=p;this.tx=v;this.ty=g};i.deltaTransformPoint=function(t){var i=this;var e=i.a*t.x+i.c*t.y;var a=i.b*t.x+i.d*t.y;return new egret.Point(e,a)};i.transformPoint=function(t){var i=this;var e=i.a*t.x+i.c*t.y+i.tx;var a=i.b*t.x+i.d*t.y+i.ty;return new egret.Point(e,a)};i.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};i.createBox=function(t,i,e,a,n){if(e===void 0){e=0}if(a===void 0){a=0}if(n===void 0){n=0}var s=this;if(e!==0){e=e/egret.Matrix.DEG_TO_RAD;var r=egret.NumberUtils.cos(e);var o=egret.NumberUtils.sin(e);s.a=r*t;s.b=o*i;s.c=-o*t;s.d=r*i}else{s.a=t;s.b=0;s.c=0;s.d=i}s.tx=a;s.ty=n};i.createGradientBox=function(t,i,e,a,n){if(e===void 0){e=0}if(a===void 0){a=0}if(n===void 0){n=0}this.createBox(t/1638.4,i/1638.4,e,a+t/2,n+i/2)};t.identity=new t;t.DEG_TO_RAD=Math.PI/180;return t}();var NumberUtils=function(){function t(){}var i=t.prototype;t.isNumber=function(t){return typeof t==="number"&&!isNaN(t)};t.sin=function(i){var e=Math.floor(i);var a=e+1;var n=t.sinInt(e);var s=t.sinInt(a);return(i-e)*s+(a-i)*n};t.sinInt=function(t){t=t%360;if(t<0){t+=360}if(t<90){return egret_sin_map[t]}if(t<180){return egret_cos_map[t-90]}if(t<270){return-egret_sin_map[t-180]}return-egret_cos_map[t-270]};t.cos=function(i){var e=Math.floor(i);var a=e+1;var n=t.cosInt(e);var s=t.cosInt(a);return(i-e)*s+(a-i)*n};t.cosInt=function(t){t=t%360;if(t<0){t+=360}if(t<90){return egret_cos_map[t]}if(t<180){return-egret_sin_map[t-90]}if(t<270){return-egret_cos_map[t-180]}return egret_sin_map[t-270]};return t}();var egret_sin_map={};var egret_cos_map={};for(var NumberUtils_i=0;NumberUtils_i<=90;NumberUtils_i++){egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*Matrix.DEG_TO_RAD);egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*Matrix.DEG_TO_RAD)}var Rectangle=function(){function t(t,i,e,a){if(t===void 0){t=0}if(i===void 0){i=0}if(e===void 0){e=0}if(a===void 0){a=0}this.x=t;this.y=i;this.width=e;this.height=a}var i=t.prototype;Object.defineProperty(i,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t;this.x=t},enumerable:true,configurable:true});Object.defineProperty(i,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:true,configurable:true});Object.defineProperty(i,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t;this.y=t},enumerable:true,configurable:true});Object.defineProperty(i,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:true,configurable:true});Object.defineProperty(i,"topLeft",{get:function(){return new egret.Point(this.left,this.top)},set:function(t){this.top=t.y;this.left=t.x},enumerable:true,configurable:true});Object.defineProperty(i,"bottomRight",{get:function(){return new egret.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y;this.right=t.x},enumerable:true,configurable:true});i.initialize=function(t,i,e,a){this.x=t;this.y=i;this.width=e;this.height=a;return this};i.contains=function(t,i){return this.x<=t&&this.x+this.width>=t&&this.y<=i&&this.y+this.height>=i};i.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)};i.setEmpty=function(){this.x=0;this.y=0;this.width=0;this.height=0};i.clone=function(){return new t(this.x,this.y,this.width,this.height)};i.containsPoint=function(t){if(this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y){return true}return false};i.setTo=function(t,i,e,a){this.initialize(t,i,e,a)};i.copyFrom=function(t){this.x=t.x;this.y=t.y;this.width=t.width;this.height=t.height};i.inflate=function(t,i){this.x-=t;this.width+=2*t;this.y-=i;this.height+=2*i};i.isEmpty=function(){return this.width==0||this.height==0};i.containsRect=function(t){var i=t.x+t.width;var e=t.y+t.height;var a=this.x+this.width;var n=this.y+this.height;return t.x>=this.x&&t.x<a&&t.y>=this.y&&t.y<n&&i>this.x&&i<=a&&e>this.y&&e<=n};i.equals=function(t){if(this===t){return true}return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height};i.inflatePoint=function(t){this.inflate(t.x,t.y)};i.intersection=function(t){var i=this.clone();var e=i.x;var a=i.y;var n=t.x;var s=t.y;var r=Math.max(e,n);var o=Math.min(e+i.width,n+t.width);if(r<=o){var l=Math.max(a,s);var h=Math.min(a+i.height,s+t.height);if(l<=h){i.setTo(r,l,o-r,h-l);return i}}i.setEmpty();return i};i.offset=function(t,i){this.x+=t;this.y+=i};i.offsetPoint=function(t){this.offset(t.x,t.y)};i.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};i.union=function(t){var i=this.clone();if(t.isEmpty()){return i}if(i.isEmpty()){i.copyFrom(t);return i}var e=Math.min(i.x,t.x);var a=Math.min(i.y,t.y);i.setTo(e,a,Math.max(i.right,t.right)-e,Math.max(i.bottom,t.bottom)-a);return i};t.identity=new t(0,0,0,0);return t}();function DisplayObject(){this.visible;this.parent;this.name;this.x;this.y;this.width;this.height;this.scaleX;this.scaleY;this.anchorX;this.anchorY;this.anchorOffsetX;this.anchorOffsetY;this.rotation;this.alpha;this.worldAlpha;this.blendMode;this.needDraw;this.localMatrix;this.worldTransform}DisplayObject.create=function(){var t=new DisplayObject;t.init();return t};var BlendMode={NORMAL:"normal",ADD:"add",ERASE:"erase",ERASE_REVERSE:"eraseReverse"};DisplayObject.prototype.blendModes={};DisplayObject.prototype.blendModes[BlendMode.NORMAL]="source-over";DisplayObject.prototype.blendModes[BlendMode.ADD]="lighter";DisplayObject.prototype.blendModes[BlendMode.ERASE]="destination-out";DisplayObject.prototype.blendModes[BlendMode.ERASE_REVERSE]="destination-in";DisplayObject.prototype.init=function(){this.scaleX=1;this.scaleY=1;this.x=0;this.y=0;this.width=0;this.height=0;this.anchorOffsetX=0;this.anchorOffsetY=0;this.anchorX=0;this.anchorY=0;this.skewX=0;this.skewY=0;this.name="";this.rotation=0;this.alpha=1;this.worldAlpha=1;this.blendMode=null;this.parent=null;this.visible=true;this.needDraw=false;this.localMatrix=null;this.worldTransform=new Matrix};DisplayObject.prototype.setParent=function(t){this.parent=t;return this};DisplayObject.prototype.getParent=function(){return this.parent};DisplayObject.prototype.setScale=function(t,i){this.scaleX=t;this.scaleY=i;return this};DisplayObject.prototype.setAnchorOffset=function(t,i){this.anchorOffsetX=t;this.anchorOffsetY=i;return this};DisplayObject.prototype.setAnchor=function(t,i){this.anchorX=t;this.anchorY=i;return this};DisplayObject.prototype.isVisible=function(){return this.visible};DisplayObject.prototype.setVisible=function(t){this.visible=t;return this};DisplayObject.prototype.setRotation=function(t){this.rotation=t;return this};DisplayObject.prototype.setAlpha=function(t){this.alpha=t;return this};DisplayObject.prototype.setSkewX=function(t){this.skewX=t;return this};DisplayObject.prototype.setSkewY=function(t){this.skewY=t;return this};DisplayObject.prototype.setBlend=function(t){this.blendMode=t;return this};DisplayObject.prototype.getBlend=function(t){return this.blendMode};DisplayObject.prototype.setWidth=function(t){this.width=t;return this};DisplayObject.prototype.getWidth=function(){return this.width};DisplayObject.prototype.setHeight=function(t){this.height=t;return this};DisplayObject.prototype.getHeight=function(){return this.height};DisplayObject.prototype.setWorldAlpha=function(t){this.worldAlpha=t;return this};DisplayObject.prototype.getWorldAlpha=function(){return this.worldAlpha};DisplayObject.prototype.needDraw=function(){return!!this.needDraw};DisplayObject.prototype.setNeedDraw=function(t){this.needDraw=t;return this};DisplayObject.prototype.setTransform=function(t){this.localMatrix=t;return this};DisplayObject.prototype.draw=function(t){var i,e;if(!this.visible){return}if(this.blendMode){e=this.blendModes[this.blendMode]}else{e=this.blendModes[BlendMode.NORMAL]}t.save();t.globalAlpha=this.alpha;t.globalCompositeOperation=e;i=this.worldTransform;t.transform(i.a,i.b,i.c,i.d,i.tx,i.ty);this.drawSelf(t);t.restore();return};DisplayObject.prototype.getOffsetPoint=function(){var t=this.anchorOffsetX;var i=this.anchorOffsetY;return{x:t,y:i}};DisplayObject.prototype.calcWorldTransform=function(){var t;var i;var e;t=this.parent;e=this.localMatrix;i=this.worldTransform;if(t){i.identityMatrix(t.worldTransform)}else{i.identityMatrix(new Matrix)}var a=this.getOffsetPoint();var n=a.x;var s=a.y;if(e){i.append(e.a,e.b,e.c,e.d,e.tx,e.ty);i.append(1,0,0,1,-n,-s)}else{i.appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,n,s)}if(t){this.worldAlpha=t.worldAlpha*this.alpha}else{this.worldAlpha=this.alpha}return};DisplayObject.prototype.doTransform=function(t){if(!this.visible){return}this.calcWorldTransform();if(this.needDraw){this.draw(t)}return};function DisplayObjectContainer(){DisplayObject.call(this);this.children;this.isContainer}__extends(DisplayObjectContainer,DisplayObject);DisplayObjectContainer.prototype.init=function(){DisplayObject.prototype.init.call(this);this.children=[];this.visible=true;this.isContainer=true};DisplayObjectContainer.prototype.getChildCount=function(){return this.children.length};DisplayObjectContainer.prototype.addChild=function(t,i){var e;e=this.children.length;if(t.parent===this){e--}return this.addChildAt(t,e)};DisplayObjectContainer.prototype.addChildAt=function(t,i){if(t===this){return}if(t.parent===this){this.setChildIndex(t,i)}else{if(t.parent){this.parent.removeChild(t)}this.children.splice(i,0,t);t.setParent(this)}return t};DisplayObjectContainer.prototype.setChildIndex=function(t,i){var e;e=this.children.indexOf(t);if(e>=0){this.children.splice(e,1);if(i<0||this.children.length<=i){this.children.push(t)}else{this.children.splice(i,0,t)}}return};DisplayObjectContainer.prototype.removeAllChild=function(){this.children=[]};DisplayObjectContainer.prototype.removeChild=function(t){var i;i=this.children.indexOf(t);if(i>=0){return this.removeChildByIndex(i)}return};DisplayObjectContainer.prototype.removeChildByIndex=function(t){var i;i=this.children[t];i.setParent(null);this.children.splice(t,1);return i};DisplayObjectContainer.prototype.getChildIndex=function(t){return this.children.indexOf(t)};DisplayObjectContainer.prototype.updateTransform=function(t){if(!this.visible){return}this.doTransform(t);if(this.isContainer&&this.children.length){for(var i=0,e=this.children.length;i<e;i++){var a=this.children[i];if(a.isContainer){a.updateTransform(t)}else{a.doTransform(t)}}}};DisplayObjectContainer.prototype.drawSelf=function(t){};DisplayObjectContainer.create=function(){var t=new DisplayObjectContainer;t.init();return t};var MainContext=function(){function t(){this.timeScale=1;this.container=null}t.prototype.setObjectContainer=function(t){this.container=t};t.prototype.run=function(){var t=this;var i=Date.now();function e(){var a=Date.now();var n=a-i;t.renderLoop(n);dragonBones.WorldClock.clock.advanceTime(n/1e3);window.requestAnimationFrame(e);i=a}window.requestAnimationFrame(e)};t.prototype.setScale=function(t,i){this.container.scaleX=t;this.container.scaleY=i};t.prototype.setPosition=function(t,i){this.container.x=t;this.container.y=i};t.prototype.renderLoop=function(t){this.container.updateTransform(t)};return t}();MainContext.instance=new MainContext;function Bitmap(){DisplayObject.call(this);this.texture;this.needDraw}__extends(Bitmap,DisplayObject);Bitmap.prototype.init=function(){DisplayObject.prototype.init.call(this);this.needDraw=true};Bitmap.prototype.setTexture=function(t){this.texture=t;if(t){this.setWidth(t.dw);this.setHeight(t.dh)}return this};Bitmap.prototype.getTexture=function(){return this.texture};Bitmap.prototype.drawSelf=function(t){var i;var e;var a;var n;var s;var r;var o;var l;var h;if(!this.texture){return}texture=this.texture;i=texture.dw;e=texture.dh;a=texture.dx;n=texture.dy;s=texture.sx;r=texture.sy;o=texture.sw;l=texture.sh;t.drawImage(texture.texture,s,r,o,l,a,n,i,e);return};Bitmap.create=function(t){var i=new Bitmap;i.xname=t;i.init();return i};var __define=this.__define||function(t,i,e,a){Object.defineProperty(t,i,{configurable:true,enumerable:true,get:e,set:a})};var dragonBones;(function(t){var i=function(){function t(){}var i=__define,e=t,a=e.prototype;t.DATA_VERSION="4.0";t.DATA_VERSION_4_5="4.5";t.PARENT_COORDINATE_DATA_VERSION="3.0";t.VERSION="4.5.10";return t}();t.DragonBones=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(t){this._animationStateCount=0;this._updateTimelineStates=false;this._updateFFDTimelineStates=false;this._armature=t;this._animationList=[];this._animationStateList=[];this._timeScale=1;this._isPlaying=false;this.tweenEnabled=true}var e=__define,a=i,n=a.prototype;n.dispose=function(){if(!this._armature){return}this._resetAnimationStateList();this._animationList.length=0;this._armature=null;this._animationDataList=null;this._animationList=null;this._animationStateList=null};n._resetAnimationStateList=function(){var i=this._animationStateList.length;var e;while(i--){e=this._animationStateList[i];e._resetTimelineStateList();t.AnimationState._returnObject(e)}this._animationStateList.length=0};n.gotoAndPlay=function(e,a,n,s,r,o,l,h,u){if(a===void 0){a=-1}if(n===void 0){n=-1}if(s===void 0){s=NaN}if(r===void 0){r=0}if(o===void 0){o=null}if(l===void 0){l=i.SAME_LAYER_AND_GROUP}if(h===void 0){h=true}if(u===void 0){u=true}if(!this._animationDataList){return null}var f=this._animationDataList.length;var _;while(f--){if(this._animationDataList[f].name==e){_=this._animationDataList[f];break}}if(!_){return null}var m=this._isPlaying==false;this._isPlaying=true;this._isFading=true;a=a<0?_.fadeTime<0?.3:_.fadeTime:a;var d;if(n<0){d=_.scale<0?1:_.scale}else{d=n*1e3/_.duration}s=isNaN(s)?_.playTimes:s;var c;switch(l){case i.NONE:break;case i.SAME_LAYER:f=this._animationStateList.length;while(f--){c=this._animationStateList[f];if(c.layer==r){c.fadeOut(a,h)}}break;case i.SAME_GROUP:f=this._animationStateList.length;while(f--){c=this._animationStateList[f];if(c.group==o){c.fadeOut(a,h)}}break;case i.ALL:f=this._animationStateList.length;while(f--){c=this._animationStateList[f];c.fadeOut(a,h)}break;case i.SAME_LAYER_AND_GROUP:default:f=this._animationStateList.length;while(f--){c=this._animationStateList[f];if(c.layer==r&&c.group==o){c.fadeOut(a,h)}}break}this._lastAnimationState=t.AnimationState._borrowObject();this._lastAnimationState._layer=r;this._lastAnimationState._group=o;this._lastAnimationState.autoTween=this.tweenEnabled;this._lastAnimationState._fadeIn(this._armature,_,a,1/d,s,u);this.addState(this._lastAnimationState);var p=this._armature.getSlots(false);f=p.length;while(f--){var v=p[f];if(v.childArmature){v.childArmature.animation.gotoAndPlay(e,a)}}if(m){this._armature.advanceTime(0)}return this._lastAnimationState};n.gotoAndStop=function(t,e,a,n,s,r,o,l){if(a===void 0){a=-1}if(n===void 0){n=0}if(s===void 0){s=-1}if(r===void 0){r=0}if(o===void 0){o=null}if(l===void 0){l=i.ALL}var h=this.gotoAndPlay(t,n,s,NaN,r,o,l);if(a>=0){h.setCurrentTime(h.totalTime*a)}else{h.setCurrentTime(e)}h.lastFrameAutoTween=false;h.stop();return h};n.play=function(){if(!this._animationDataList||this._animationDataList.length==0){return}if(!this._lastAnimationState){this.gotoAndPlay(this._animationDataList[0].name)}else if(!this._isPlaying){this._isPlaying=true}else{this.gotoAndPlay(this._lastAnimationState.name)}};n.stop=function(){this._isPlaying=false};n.getState=function(t,i){if(i===void 0){i=0}var e=this._animationStateList.length;while(e--){var a=this._animationStateList[e];if(a.name==t&&a.layer==i){return a}}return null};n.hasAnimation=function(t){var i=this._animationDataList.length;while(i--){if(this._animationDataList[i].name==t){return true}}return false};n._advanceTime=function(t){if(!this._isPlaying){return}if(this._updateTimelineStates){this._updateTimelineStates=false;this.updateTimelineStates()}else if(this._updateFFDTimelineStates){this._updateFFDTimelineStates=false;this.updateFFDTimelineStates()}var i=false;t*=this._timeScale;var e=this._animationStateList.length;while(e--){var a=this._animationStateList[e];if(a._advanceTime(t)){this.removeState(a)}else if(a.fadeState!=1){i=true}}this._isFading=i};n.updateTimelineStates=function(){var t=this._animationStateList.length;while(t--){this._animationStateList[t]._updateTimelineStates()}};n.updateFFDTimelineStates=function(){var t=this._animationStateList.length;while(t--){this._animationStateList[t]._updateFFDTimeline()}};n.addState=function(t){if(this._animationStateList.indexOf(t)<0){this._animationStateList.unshift(t);this._animationStateCount=this._animationStateList.length}};n.removeState=function(i){var e=this._animationStateList.indexOf(i);if(e>=0){this._animationStateList.splice(e,1);t.AnimationState._returnObject(i);if(this._lastAnimationState==i){if(this._animationStateList.length>0){this._lastAnimationState=this._animationStateList[0]}else{this._lastAnimationState=null}}this._animationStateCount=this._animationStateList.length}};e(n,"movementList",function(){return this._animationList});e(n,"movementID",function(){return this.lastAnimationName});e(n,"lastAnimationState",function(){return this._lastAnimationState});e(n,"lastAnimationName",function(){return this._lastAnimationState?this._lastAnimationState.name:null});e(n,"animationList",function(){return this._animationList});e(n,"isPlaying",function(){return this._isPlaying&&!this.isComplete});e(n,"isComplete",function(){if(this._lastAnimationState){if(!this._lastAnimationState.isComplete){return false}var t=this._animationStateList.length;while(t--){if(!this._animationStateList[t].isComplete){return false}}return true}return true});e(n,"timeScale",function(){return this._timeScale},function(t){if(isNaN(t)||t<0){t=1}this._timeScale=t});e(n,"animationDataList",function(){return this._animationDataList},function(t){this._animationDataList=t;this._animationList.length=0;for(var i=0,e=this._animationDataList.length;i<e;i++){var a=this._animationDataList[i];this._animationList[this._animationList.length]=a.name}});i.NONE="none";i.SAME_LAYER="sameLayer";i.SAME_GROUP="sameGroup";i.SAME_LAYER_AND_GROUP="sameLayerAndGroup";i.ALL="all";return i}();t.Animation=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._layer=0;this._currentFrameIndex=0;this._currentFramePosition=0;this._currentFrameDuration=0;this._currentPlayTimes=0;this._totalTime=0;this._currentTime=0;this._lastTime=0;this._fadeState=0;this._playTimes=0;this._timelineStateList=[];this._slotTimelineStateList=[];this._ffdTimelineStateList=[];this._boneMasks=[]}var e=__define,a=i,n=a.prototype;i._borrowObject=function(){if(i._pool.length==0){return new i}return i._pool.pop()};i._returnObject=function(t){t.clear();if(i._pool.indexOf(t)<0){i._pool[i._pool.length]=t}};i._clear=function(){var e=i._pool.length;while(e--){i._pool[e].clear()}i._pool.length=0;t.TimelineState._clear()};n.clear=function(){this._resetTimelineStateList();this._boneMasks.length=0;this._armature=null;this._clip=null};n._resetTimelineStateList=function(){var i=this._timelineStateList.length;while(i--){t.TimelineState._returnObject(this._timelineStateList[i])}this._timelineStateList.length=0;i=this._slotTimelineStateList.length;while(i--){t.SlotTimelineState._returnObject(this._slotTimelineStateList[i])}this._slotTimelineStateList.length=0;i=this._ffdTimelineStateList.length;while(i--){t.FFDTimelineState._returnObject(this._ffdTimelineStateList[i])}this._ffdTimelineStateList.length=0};n.containsBoneMask=function(t){return this._boneMasks.length==0||this._boneMasks.indexOf(t)>=0};n.addBoneMask=function(t,i){if(i===void 0){i=true}this.addBoneToBoneMask(t);if(i){var e=this._armature.getBone(t);if(e){var a=this._armature.getBones(false);var n=a.length;while(n--){var s=a[n];if(e.contains(s)){this.addBoneToBoneMask(s.name)}}}}this._updateTimelineStates();return this};n.removeBoneMask=function(t,i){if(i===void 0){i=true}this.removeBoneFromBoneMask(t);if(i){var e=this._armature.getBone(t);if(e){var a=this._armature.getBones(false);var n=a.length;while(n--){var s=a[n];if(e.contains(s)){this.removeBoneFromBoneMask(s.name)}}}}this._updateTimelineStates();return this};n.removeAllMixingTransform=function(){this._boneMasks.length=0;this._updateTimelineStates();return this};n.addBoneToBoneMask=function(t){if(this._clip.getTimeline(t)&&this._boneMasks.indexOf(t)<0){this._boneMasks.push(t)}};n.removeBoneFromBoneMask=function(t){var i=this._boneMasks.indexOf(t);if(i>=0){this._boneMasks.splice(i,1)}};n._updateTimelineStates=function(){var t;var i;var e;var a=this._timelineStateList.length;var n;while(a--){t=this._timelineStateList[a];if(!this._armature.getBone(t.name)){this.removeTimelineState(t)}}a=this._slotTimelineStateList.length;while(a--){i=this._slotTimelineStateList[a];if(!this._armature.getSlot(i.name)){this.removeSlotTimelineState(i)}}if(this._boneMasks.length>0){a=this._timelineStateList.length;while(a--){t=this._timelineStateList[a];if(this._boneMasks.indexOf(t.name)<0){this.removeTimelineState(t)}}for(a=0,n=this._boneMasks.length;a<n;a++){var s=this._boneMasks[a];this.addTimelineState(s)}}else{for(a=0,n=this._clip.timelineList.length;a<n;a++){var r=this._clip.timelineList[a];this.addTimelineState(r.name)}}for(a=0,n=this._clip.slotTimelineList.length;a<n;a++){var o=this._clip.slotTimelineList[a];this.addSlotTimelineState(o.name)}this._updateFFDTimeline()};n._updateFFDTimeline=function(){var i=0,e=0;var a;var n;var s={};e=this._ffdTimelineStateList.length;for(i=0;i<e;++i){a=this._ffdTimelineStateList[i];n=this._armature.getSlot(a.name);if(!n||n.displayIndex!=a.displayIndex){this._ffdTimelineStateList.splice(i,1);t.FFDTimelineState._returnObject(o)}else{s[a.name]=a}}if(this._clip.ffdTimelineList){e=this._clip.ffdTimelineList.length;for(i=0;i<e;++i){var r=this._clip.ffdTimelineList[i];n=this._armature.getSlot(r.name);if(!s[r.name]&&n&&n.displayList.length>0&&n.displayIndex>=0&&n.displayIndex==r.displayIndex){var o=t.FFDTimelineState._borrowObject();o._fadeIn(n,this,r);this._ffdTimelineStateList.push(o);s[r.name]=o}}}var l=this._armature.getSlots(false);for(i=0,e=l.length;i<e;++i){n=l[i];if(n._meshData&&!s[n.name]){n._updateFFD(null,0)}}};n.addTimelineState=function(i){var e=this._armature.getBone(i);if(e){for(var a=0,n=this._timelineStateList.length;a<n;a++){var s=this._timelineStateList[a];if(s.name==i){return}}var r=t.TimelineState._borrowObject();r._fadeIn(e,this,this._clip.getTimeline(i));this._timelineStateList.push(r)}};n.removeTimelineState=function(i){var e=this._timelineStateList.indexOf(i);this._timelineStateList.splice(e,1);t.TimelineState._returnObject(i)};n.addSlotTimelineState=function(i){var e=this._armature.getSlot(i);if(e){for(var a=0,n=this._slotTimelineStateList.length;a<n;a++){var s=this._slotTimelineStateList[a];if(s.name==i){return}}var r=t.SlotTimelineState._borrowObject();r._fadeIn(e,this,this._clip.getSlotTimeline(i));this._slotTimelineStateList.push(r)}};n.removeSlotTimelineState=function(i){var e=this._slotTimelineStateList.indexOf(i);this._slotTimelineStateList.splice(e,1);t.SlotTimelineState._returnObject(i)};n.play=function(){this._isPlaying=true;return this};n.stop=function(){this._isPlaying=false;return this};n._fadeIn=function(t,i,e,a,n,s){this._armature=t;this._clip=i;this._pausePlayheadInFade=s;this._name=this._clip.name;this._totalTime=this._clip.duration;this.autoTween=this._clip.autoTween;this.setTimeScale(a);this.setPlayTimes(n);this._isComplete=false;this._currentFrameIndex=-1;this._currentPlayTimes=-1;if(Math.round(this._totalTime*this._clip.frameRate*.001)<2||a==Infinity){this._currentTime=this._totalTime}else{this._currentTime=-1}this._time=0;this._boneMasks.length=0;this._isFadeOut=false;this._fadeWeight=0;this._fadeTotalWeight=1;this._fadeState=-1;this._fadeCurrentTime=0;this._fadeBeginTime=this._fadeCurrentTime;this._fadeTotalTime=e*this._timeScale;this._isPlaying=true;this.displayControl=true;this.lastFrameAutoTween=true;this.additiveBlending=false;this.weight=1;this.fadeOutTime=e;this._updateTimelineStates();return this};n.fadeOut=function(t,i){if(!this._armature){return null}if(isNaN(t)||t<0){t=0}this._pausePlayheadInFade=i;if(this._isFadeOut){if(t>this._fadeTotalTime/this._timeScale-(this._fadeCurrentTime-this._fadeBeginTime)){return this}}else{for(var e=0,a=this._timelineStateList.length;e<a;e++){var n=this._timelineStateList[e];n._fadeOut()}}this._isFadeOut=true;this._fadeTotalWeight=this._fadeWeight;this._fadeState=-1;this._fadeBeginTime=this._fadeCurrentTime;this._fadeTotalTime=this._fadeTotalWeight>=0?t*this._timeScale:0;this.displayControl=false;return this};n._advanceTime=function(t){t*=this._timeScale;this.advanceFadeTime(t);if(this._fadeWeight){this.advanceTimelinesTime(t)}return this._isFadeOut&&this._fadeState==1};n.advanceFadeTime=function(i){var e=false;var a=false;if(this._fadeBeginTime>=0){var n=this._fadeState;this._fadeCurrentTime+=i<0?-i:i;if(this._fadeCurrentTime>=this._fadeBeginTime+this._fadeTotalTime){if(this._fadeWeight==1||this._fadeWeight==0){n=1;if(this._pausePlayheadInFade){this._pausePlayheadInFade=false;this._currentTime=-1}}this._fadeWeight=this._isFadeOut?0:1}else if(this._fadeCurrentTime>=this._fadeBeginTime){n=0;this._fadeWeight=(this._fadeCurrentTime-this._fadeBeginTime)/this._fadeTotalTime*this._fadeTotalWeight;if(this._isFadeOut){this._fadeWeight=this._fadeTotalWeight-this._fadeWeight}}else{n=-1;this._fadeWeight=this._isFadeOut?1:0}if(this._fadeState!=n){if(this._fadeState==-1){e=true}if(n==1){a=true}this._fadeState=n}}var s;if(e){if(this._isFadeOut){if(this._armature.hasEventListener(t.AnimationEvent.FADE_OUT)){s=new t.AnimationEvent(t.AnimationEvent.FADE_OUT);s.animationState=this;this._armature._eventList.push(s)}}else{this.hideBones();if(this._armature.hasEventListener(t.AnimationEvent.FADE_IN)){s=new t.AnimationEvent(t.AnimationEvent.FADE_IN);s.animationState=this;this._armature._eventList.push(s)}}}if(a){if(this._isFadeOut){if(this._armature.hasEventListener(t.AnimationEvent.FADE_OUT_COMPLETE)){s=new t.AnimationEvent(t.AnimationEvent.FADE_OUT_COMPLETE);s.animationState=this;this._armature._eventList.push(s)}}else{if(this._armature.hasEventListener(t.AnimationEvent.FADE_IN_COMPLETE)){s=new t.AnimationEvent(t.AnimationEvent.FADE_IN_COMPLETE);s.animationState=this;this._armature._eventList.push(s)}}}};n.advanceTimelinesTime=function(i){if(this._isPlaying&&!this._pausePlayheadInFade){this._time+=i}var e=false;var a=false;var n=false;var s=false;var r=0;var o=this._time*1e3;if(this._playTimes==0){s=false;r=Math.ceil(Math.abs(o)/this._totalTime)||1;if(o>=0){o-=Math.floor(o/this._totalTime)*this._totalTime}else{o-=Math.ceil(o/this._totalTime)*this._totalTime}if(o<0){o+=this._totalTime}}else{var l=this._playTimes*this._totalTime;if(o>=l){o=l;s=true}else if(o<=-l){o=-l;s=true}else{s=false}if(o<0){o+=l}r=Math.ceil(o/this._totalTime)||1;if(o>=0){o-=Math.floor(o/this._totalTime)*this._totalTime}else{o-=Math.ceil(o/this._totalTime)*this._totalTime}if(s){o=this._totalTime}}this._isComplete=s;var h=this._time*1e3/this._totalTime;var u=0;var f=0;for(u=0,f=this._timelineStateList.length;u<f;u++){var _=this._timelineStateList[u];_._update(h);this._isComplete=_._isComplete&&this._isComplete}for(u=0,f=this._slotTimelineStateList.length;u<f;u++){var m=this._slotTimelineStateList[u];m._update(h);this._isComplete=_._isComplete&&this._isComplete}for(u=0,f=this._ffdTimelineStateList.length;u<f;u++){var d=this._ffdTimelineStateList[u];d._update(h);this._isComplete=d._isComplete&&this._isComplete}if(this._currentTime!=o){if(this._currentPlayTimes!=r){if(this._currentPlayTimes>0&&r>1){n=true}this._currentPlayTimes=r}if(this._currentTime<0){e=true}if(this._isComplete){a=true}this._lastTime=this._currentTime;this._currentTime=o;this.updateMainTimeline(s)}var c;if(e){if(this._armature.hasEventListener(t.AnimationEvent.START)){c=new t.AnimationEvent(t.AnimationEvent.START);c.animationState=this;this._armature._eventList.push(c)}}if(a){if(this._armature.hasEventListener(t.AnimationEvent.COMPLETE)){c=new t.AnimationEvent(t.AnimationEvent.COMPLETE);c.animationState=this;this._armature._eventList.push(c)}if(this.autoFadeOut){this.fadeOut(this.fadeOutTime,true);
}}else if(n){if(this._armature.hasEventListener(t.AnimationEvent.LOOP_COMPLETE)){c=new t.AnimationEvent(t.AnimationEvent.LOOP_COMPLETE);c.animationState=this;this._armature._eventList.push(c)}}};n.updateMainTimeline=function(t){var i=this._clip.frameList;if(i.length>0){var e;var a;for(var n=0,s=this._clip.frameList.length;n<s;++n){if(this._currentFrameIndex<0){this._currentFrameIndex=0}else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration||this._currentTime<this._lastTime){this._currentFrameIndex++;this._lastTime=this._currentTime;if(this._currentFrameIndex>=i.length){if(t){this._currentFrameIndex--;break}else{this._currentFrameIndex=0}}}else{break}a=i[this._currentFrameIndex];if(e){this._armature._arriveAtFrame(e,null,this,true)}this._currentFrameDuration=a.duration;this._currentFramePosition=a.position;e=a}if(a){this._armature._arriveAtFrame(a,null,this,false)}}};n.hideBones=function(){for(var t=0,i=this._clip.hideTimelineNameMap.length;t<i;t++){var e=this._clip.hideTimelineNameMap[t];var a=this._armature.getBone(e);if(a){a._hideSlots()}}var n;for(t=0,i=this._clip.hideSlotTimelineNameMap.length;t<i;t++){n=this._clip.hideSlotTimelineNameMap[t];var s=this._armature.getSlot(n);if(s){s._resetToOrigin()}}};n.setAdditiveBlending=function(t){this.additiveBlending=t;return this};n.setAutoFadeOut=function(t,i){if(i===void 0){i=-1}this.autoFadeOut=t;if(i>=0){this.fadeOutTime=i*this._timeScale}return this};n.setWeight=function(t){if(isNaN(t)||t<0){t=1}this.weight=t;return this};n.setFrameTween=function(t,i){this.autoTween=t;this.lastFrameAutoTween=i;return this};n.setCurrentTime=function(t){if(t<0||isNaN(t)){t=0}this._time=t;this._currentTime=this._time*1e3;return this};n.setTimeScale=function(t){if(isNaN(t)||t==Infinity){t=1}this._timeScale=t;return this};n.setPlayTimes=function(t){if(t===void 0){t=0}if(Math.round(this._totalTime*.001*this._clip.frameRate)<2){this._playTimes=t<0?-1:1}else{this._playTimes=t<0?-t:t}this.autoFadeOut=t<0?true:false;return this};e(n,"name",function(){return this._name});e(n,"layer",function(){return this._layer});e(n,"group",function(){return this._group});e(n,"clip",function(){return this._clip});e(n,"isComplete",function(){return this._isComplete});e(n,"isPlaying",function(){return this._isPlaying&&!this._isComplete});e(n,"currentPlayTimes",function(){return this._currentPlayTimes<0?0:this._currentPlayTimes});e(n,"totalTime",function(){return this._totalTime*.001});e(n,"currentTime",function(){return this._currentTime<0?0:this._currentTime*.001});e(n,"fadeWeight",function(){return this._fadeWeight});e(n,"fadeState",function(){return this._fadeState});e(n,"fadeTotalTime",function(){return this._fadeTotalTime});e(n,"timeScale",function(){return this._timeScale});e(n,"playTimes",function(){return this._playTimes});i._pool=[];return i}();t.AnimationState=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this.skin=null;this.name=null;this.displayIndex=0;this._isComplete=false;this._animationState=null;this._totalTime=0;this._currentTime=0;this._currentFrameIndex=0;this._currentFramePosition=0;this._currentFrameDuration=0;this._tweenEasing=NaN;this._tweenCurve=null;this._tweenVertices=false;this._offset=0;this._durationVertices=[];this._updateVertices=[];this._rawAnimationScale=1;this._updateMode=0;this._slot=null;this._timelineData=null}var e=__define,a=i,n=a.prototype;i._borrowObject=function(){if(i._pool.length==0){return new i}return i._pool.pop()};i._returnObject=function(t){if(i._pool.indexOf(t)<0){i._pool[i._pool.length]=t}t.clear()};i._clear=function(){var t=i._pool.length;while(t--){i._pool[t].clear()}i._pool.length=0};n.clear=function(){this._slot=null;this._animationState=null;this._timelineData=null};n._fadeIn=function(t,i,e){this._slot=t;this._animationState=i;this._timelineData=e;this.name=e.name;this.skin=e.skin;this.displayIndex=e.displayIndex;this._totalTime=this._timelineData.duration;this._rawAnimationScale=this._animationState.clip.scale;this._isComplete=false;this._currentFrameIndex=-1;this._currentTime=-1;this._tweenEasing=NaN;switch(this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1;break}};n._fadeOut=function(){};n._update=function(t){if(this._updateMode==-1){this.updateMultipleFrame(t)}else if(this._updateMode==1){this._updateMode=0;this.updateSingleFrame()}};n.updateMultipleFrame=function(t){var i=0;t/=this._timelineData.scale;t+=this._timelineData.offset;var e=this._totalTime*t;var a=this._animationState.playTimes;if(a==0){this._isComplete=false;i=Math.ceil(Math.abs(e)/this._totalTime)||1;if(e>=0){e-=Math.floor(e/this._totalTime)*this._totalTime}else{e-=Math.ceil(e/this._totalTime)*this._totalTime}if(e<0){e+=this._totalTime}}else{var n=a*this._totalTime;if(e>=n){e=n;this._isComplete=true}else if(e<=-n){e=-n;this._isComplete=true}else{this._isComplete=false}if(e<0){e+=n}i=Math.ceil(e/this._totalTime)||1;if(this._isComplete){e=this._totalTime}else{if(e>=0){e-=Math.floor(e/this._totalTime)*this._totalTime}else{e-=Math.ceil(e/this._totalTime)*this._totalTime}}}if(this._currentTime!=e){this._currentTime=e;var s=this._timelineData.frameList;var r;var o;for(var l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0){this._currentFrameIndex=0}else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){this._currentFrameIndex++;if(this._currentFrameIndex>=s.length){if(this._isComplete){this._currentFrameIndex--;break}else{this._currentFrameIndex=0}}}else{break}o=s[this._currentFrameIndex];this._currentFrameDuration=o.duration;this._currentFramePosition=o.position;r=o}if(o){this.updateToNextFrame(i)}if(this._tweenEasing==this._tweenEasing){this.updateTween()}}};n.updateToNextFrame=function(t){if(t===void 0){t=0}var i=this._currentFrameIndex+1;if(i>=this._timelineData.frameList.length){i=0}var e=this._timelineData.frameList[this._currentFrameIndex];var a=this._timelineData.frameList[i];var n=false;if(i==0&&(!this._animationState.lastFrameAutoTween||this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+t-this._timelineData.offset)*this._timelineData.scale>.999999)){this._tweenEasing=NaN;n=false}else if(this._animationState.autoTween){this._tweenEasing=this._animationState.clip.tweenEasing;if(isNaN(this._tweenEasing)){this._tweenEasing=e.tweenEasing;this._tweenCurve=e.curve;if(isNaN(this._tweenEasing)&&this._tweenCurve==null){n=false}else{if(this._tweenEasing==10){this._tweenEasing=0}n=true}}else{n=true}}else{this._tweenEasing=e.tweenEasing;this._tweenCurve=e.curve;if((isNaN(this._tweenEasing)||this._tweenEasing==10)&&this._tweenCurve==null){this._tweenEasing=NaN;n=false}else{n=true}}if(n){this._offset=e.offset<a.offset?e.offset:a.offset;var s=e.offset+e.vertices.length>a.offset+a.vertices.length?e.offset+e.vertices.length:a.offset+a.vertices.length;this._durationVertices.length=s-this._offset;var r;var o;this._tweenVertices=false;for(var l=this._offset;l<s;l++){r=0;o=0;if(e.offset<=l&&e.vertices.length+e.offset>l){r=Number(e.vertices[l-e.offset])}if(a.offset<=l&&a.vertices.length+a.offset>l){o=Number(a.vertices[l-a.offset])}this._durationVertices[l-this._offset]=o-r;if(this._durationVertices[l-this._offset]!=0){this._tweenVertices=true}}}else{this._tweenVertices=false;this._slot._updateFFD(e.vertices,e.offset)}};n.updateTween=function(){var i=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenVertices&&this._animationState.displayControl){var e=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;if(this._tweenCurve!=null){e=this._tweenCurve.getValueByProgress(e)}if(this._tweenEasing){e=t.MathUtil.getEaseValue(e,this._tweenEasing)}var a=this._offset+this._durationVertices.length;this._updateVertices.length=this._durationVertices.length;var n;for(var s=this._offset;s<a;s++){n=0;if(i.offset<=s&&i.vertices.length+i.offset>s){n=Number(i.vertices[s-i.offset])}this._updateVertices[s-this._offset]=n+this._durationVertices[s-this._offset]*e}this._slot._updateFFD(this._updateVertices,this._offset)}};n.updateSingleFrame=function(){var t=this._timelineData.frameList[0];this._isComplete=true;this._tweenEasing=NaN;this._tweenVertices=false;if(this._animationState.displayControl){this._slot._updateFFD(t.vertices,t.offset)}};i._pool=[];return i}();t.FFDTimelineState=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._totalTime=0;this._currentTime=0;this._currentFrameIndex=0;this._currentFramePosition=0;this._currentFrameDuration=0;this._updateMode=0;this._durationColor=new t.ColorTransform}var e=__define,a=i,n=a.prototype;i._borrowObject=function(){if(i._pool.length==0){return new i}return i._pool.pop()};i._returnObject=function(t){if(i._pool.indexOf(t)<0){i._pool[i._pool.length]=t}t.clear()};i._clear=function(){var t=i._pool.length;while(t--){i._pool[t].clear()}i._pool.length=0};n.clear=function(){if(this._slot){this._slot=null}this._armature=null;this._animation=null;this._animationState=null;this._timelineData=null};n._fadeIn=function(t,i,e){this._slot=t;this._armature=this._slot.armature;this._animation=this._armature.animation;this._animationState=i;this._timelineData=e;this.name=e.name;this._totalTime=this._timelineData.duration;this._rawAnimationScale=this._animationState.clip.scale;this._isComplete=false;this._blendEnabled=false;this._tweenColor=false;this._currentFrameIndex=-1;this._currentTime=-1;this._tweenEasing=NaN;this._weight=1;switch(this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1;break}};n._fadeOut=function(){};n._update=function(t){if(this._updateMode==-1){this.updateMultipleFrame(t)}else if(this._updateMode==1){this._updateMode=0;this.updateSingleFrame()}};n.updateMultipleFrame=function(t){var i=0;t/=this._timelineData.scale;t+=this._timelineData.offset;var e=this._totalTime*t;var a=this._animationState.playTimes;if(a==0){this._isComplete=false;i=Math.ceil(Math.abs(e)/this._totalTime)||1;if(e>=0){e-=Math.floor(e/this._totalTime)*this._totalTime}else{e-=Math.ceil(e/this._totalTime)*this._totalTime}if(e<0){e+=this._totalTime}}else{var n=a*this._totalTime;if(e>=n){e=n;this._isComplete=true}else if(e<=-n){e=-n;this._isComplete=true}else{this._isComplete=false}if(e<0){e+=n}i=Math.ceil(e/this._totalTime)||1;if(this._isComplete){e=this._totalTime}else{if(e>=0){e-=Math.floor(e/this._totalTime)*this._totalTime}else{e-=Math.ceil(e/this._totalTime)*this._totalTime}}}if(this._currentTime!=e){this._currentTime=e;var s=this._timelineData.frameList;var r;var o;for(var l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0){this._currentFrameIndex=0}else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){this._currentFrameIndex++;if(this._currentFrameIndex>=s.length){if(this._isComplete){this._currentFrameIndex--;break}else{this._currentFrameIndex=0}}}else{break}o=s[this._currentFrameIndex];if(r){this._slot._arriveAtFrame(r,this,this._animationState,true)}this._currentFrameDuration=o.duration;this._currentFramePosition=o.position;r=o}if(o){this._slot._arriveAtFrame(o,this,this._animationState,false);this._blendEnabled=o.displayIndex>=0;if(this._blendEnabled){this.updateToNextFrame(i)}else{this._tweenEasing=NaN;this._tweenColor=false}}if(this._blendEnabled){this.updateTween()}}};n.updateToNextFrame=function(t){if(t===void 0){t=0}var i=this._currentFrameIndex+1;if(i>=this._timelineData.frameList.length){i=0}var e=this._timelineData.frameList[this._currentFrameIndex];var a=this._timelineData.frameList[i];var n=false;if(i==0&&(!this._animationState.lastFrameAutoTween||this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+t-this._timelineData.offset)*this._timelineData.scale>.999999)){this._tweenEasing=NaN;n=false}else if(e.displayIndex<0||a.displayIndex<0){this._tweenEasing=NaN;n=false}else if(this._animationState.autoTween){this._tweenEasing=this._animationState.clip.tweenEasing;if(isNaN(this._tweenEasing)){this._tweenEasing=e.tweenEasing;this._tweenCurve=e.curve;if(isNaN(this._tweenEasing)&&this._tweenCurve==null){n=false}else{if(this._tweenEasing==10){this._tweenEasing=0}n=true}}else{n=true}}else{this._tweenEasing=e.tweenEasing;this._tweenCurve=e.curve;if((isNaN(this._tweenEasing)||this._tweenEasing==10)&&this._tweenCurve==null){this._tweenEasing=NaN;n=false}else{n=true}}if(n){if(e.color&&a.color){this._durationColor.alphaOffset=a.color.alphaOffset-e.color.alphaOffset;this._durationColor.redOffset=a.color.redOffset-e.color.redOffset;this._durationColor.greenOffset=a.color.greenOffset-e.color.greenOffset;this._durationColor.blueOffset=a.color.blueOffset-e.color.blueOffset;this._durationColor.alphaMultiplier=a.color.alphaMultiplier-e.color.alphaMultiplier;this._durationColor.redMultiplier=a.color.redMultiplier-e.color.redMultiplier;this._durationColor.greenMultiplier=a.color.greenMultiplier-e.color.greenMultiplier;this._durationColor.blueMultiplier=a.color.blueMultiplier-e.color.blueMultiplier;if(this._durationColor.alphaOffset||this._durationColor.redOffset||this._durationColor.greenOffset||this._durationColor.blueOffset||this._durationColor.alphaMultiplier||this._durationColor.redMultiplier||this._durationColor.greenMultiplier||this._durationColor.blueMultiplier){this._tweenColor=true}else{this._tweenColor=false}}else if(e.color){this._tweenColor=true;this._durationColor.alphaOffset=-e.color.alphaOffset;this._durationColor.redOffset=-e.color.redOffset;this._durationColor.greenOffset=-e.color.greenOffset;this._durationColor.blueOffset=-e.color.blueOffset;this._durationColor.alphaMultiplier=1-e.color.alphaMultiplier;this._durationColor.redMultiplier=1-e.color.redMultiplier;this._durationColor.greenMultiplier=1-e.color.greenMultiplier;this._durationColor.blueMultiplier=1-e.color.blueMultiplier}else if(a.color){this._tweenColor=true;this._durationColor.alphaOffset=a.color.alphaOffset;this._durationColor.redOffset=a.color.redOffset;this._durationColor.greenOffset=a.color.greenOffset;this._durationColor.blueOffset=a.color.blueOffset;this._durationColor.alphaMultiplier=a.color.alphaMultiplier-1;this._durationColor.redMultiplier=a.color.redMultiplier-1;this._durationColor.greenMultiplier=a.color.greenMultiplier-1;this._durationColor.blueMultiplier=a.color.blueMultiplier-1}else{this._tweenColor=false}}else{this._tweenColor=false}if(!this._tweenColor&&this._animationState.displayControl){if(e.color){this._slot._updateDisplayColor(e.color.alphaOffset,e.color.redOffset,e.color.greenOffset,e.color.blueOffset,e.color.alphaMultiplier,e.color.redMultiplier,e.color.greenMultiplier,e.color.blueMultiplier,true)}else if(this._slot._isColorChanged){this._slot._updateDisplayColor(0,0,0,0,1,1,1,1,false)}}};n.updateTween=function(){var i=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenColor&&this._animationState.displayControl){var e=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;if(this._tweenCurve!=null){e=this._tweenCurve.getValueByProgress(e)}else if(this._tweenEasing){e=t.MathUtil.getEaseValue(e,this._tweenEasing)}if(i.color){this._slot._updateDisplayColor(i.color.alphaOffset+this._durationColor.alphaOffset*e,i.color.redOffset+this._durationColor.redOffset*e,i.color.greenOffset+this._durationColor.greenOffset*e,i.color.blueOffset+this._durationColor.blueOffset*e,i.color.alphaMultiplier+this._durationColor.alphaMultiplier*e,i.color.redMultiplier+this._durationColor.redMultiplier*e,i.color.greenMultiplier+this._durationColor.greenMultiplier*e,i.color.blueMultiplier+this._durationColor.blueMultiplier*e,true)}else{this._slot._updateDisplayColor(this._durationColor.alphaOffset*e,this._durationColor.redOffset*e,this._durationColor.greenOffset*e,this._durationColor.blueOffset*e,1+this._durationColor.alphaMultiplier*e,1+this._durationColor.redMultiplier*e,1+this._durationColor.greenMultiplier*e,1+this._durationColor.blueMultiplier*e,true)}}};n.updateSingleFrame=function(){var t=this._timelineData.frameList[0];this._slot._arriveAtFrame(t,this,this._animationState,false);this._isComplete=true;this._tweenEasing=NaN;this._tweenColor=false;this._blendEnabled=t.displayIndex>=0;if(this._blendEnabled){if(this._animationState.displayControl){if(t.color){this._slot._updateDisplayColor(t.color.alphaOffset,t.color.redOffset,t.color.greenOffset,t.color.blueOffset,t.color.alphaMultiplier,t.color.redMultiplier,t.color.greenMultiplier,t.color.blueMultiplier,true)}else if(this._slot._isColorChanged){this._slot._updateDisplayColor(0,0,0,0,1,1,1,1,false)}}}};i.HALF_PI=Math.PI*.5;i.DOUBLE_PI=Math.PI*2;i._pool=[];return i}();t.SlotTimelineState=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._totalTime=0;this._currentTime=0;this._lastTime=0;this._currentFrameIndex=0;this._currentFramePosition=0;this._currentFrameDuration=0;this._updateMode=0;this._transform=new t.DBTransform;this._pivot=new t.Point;this._durationTransform=new t.DBTransform;this._durationPivot=new t.Point;this._durationColor=new t.ColorTransform}var e=__define,a=i,n=a.prototype;i._borrowObject=function(){if(i._pool.length==0){return new i}return i._pool.pop()};i._returnObject=function(t){if(i._pool.indexOf(t)<0){i._pool[i._pool.length]=t}t.clear()};i._clear=function(){var t=i._pool.length;while(t--){i._pool[t].clear()}i._pool.length=0};n.clear=function(){if(this._bone){this._bone._removeState(this);this._bone=null}this._armature=null;this._animation=null;this._animationState=null;this._timelineData=null;this._originTransform=null;this._originPivot=null};n._fadeIn=function(t,i,e){this._bone=t;this._armature=this._bone.armature;this._animation=this._armature.animation;this._animationState=i;this._timelineData=e;this._originTransform=this._timelineData.originTransform;this._originPivot=this._timelineData.originPivot;this.name=e.name;this._totalTime=this._timelineData.duration;this._rawAnimationScale=this._animationState.clip.scale;this._isComplete=false;this._tweenTransform=false;this._tweenScale=false;this._currentFrameIndex=-1;this._currentTime=-1;this._tweenEasing=NaN;this._weight=1;this._transform.x=0;this._transform.y=0;this._transform.scaleX=1;this._transform.scaleY=1;this._transform.skewX=0;this._transform.skewY=0;this._pivot.x=0;this._pivot.y=0;this._durationTransform.x=0;this._durationTransform.y=0;this._durationTransform.scaleX=1;this._durationTransform.scaleY=1;this._durationTransform.skewX=0;this._durationTransform.skewY=0;this._durationPivot.x=0;this._durationPivot.y=0;switch(this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1;break}this._bone._addState(this)};n._fadeOut=function(){this._transform.skewX=t.TransformUtil.formatRadian(this._transform.skewX);this._transform.skewY=t.TransformUtil.formatRadian(this._transform.skewY)};n._update=function(t){if(this._updateMode==-1){this.updateMultipleFrame(t)}else if(this._updateMode==1){this._updateMode=0;this.updateSingleFrame()}};n.updateMultipleFrame=function(t){var i=0;t/=this._timelineData.scale;t+=this._timelineData.offset;var e=this._totalTime*t;var a=this._animationState.playTimes;if(a==0){this._isComplete=false;i=Math.ceil(Math.abs(e)/this._totalTime)||1;if(e>=0){e-=Math.floor(e/this._totalTime)*this._totalTime}else{e-=Math.ceil(e/this._totalTime)*this._totalTime}if(e<0){e+=this._totalTime}}else{var n=a*this._totalTime;if(e>=n){e=n;this._isComplete=true}else if(e<=-n){e=-n;this._isComplete=true}else{this._isComplete=false}if(e<0){e+=n}i=Math.ceil(e/this._totalTime)||1;if(this._isComplete){e=this._totalTime}else{if(e>=0){e-=Math.floor(e/this._totalTime)*this._totalTime}else{e-=Math.ceil(e/this._totalTime)*this._totalTime}}}if(this._currentTime!=e){this._lastTime=this._currentTime;this._currentTime=e;var s=this._timelineData.frameList;var r;var o;for(var l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0){this._currentFrameIndex=0}else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration||this._currentTime<this._lastTime){this._currentFrameIndex++;this._lastTime=this._currentTime;if(this._currentFrameIndex>=s.length){if(this._isComplete){this._currentFrameIndex--;break}else{this._currentFrameIndex=0}}}else{break}o=s[this._currentFrameIndex];if(r){this._bone._arriveAtFrame(r,this,this._animationState,true)}this._currentFrameDuration=o.duration;this._currentFramePosition=o.position;r=o}if(o){this._bone._arriveAtFrame(o,this,this._animationState,false);this.updateToNextFrame(i)}this.updateTween()}};n.updateToNextFrame=function(i){if(i===void 0){i=0}var e=this._currentFrameIndex+1;if(e>=this._timelineData.frameList.length){e=0}var a=this._timelineData.frameList[this._currentFrameIndex];var n=this._timelineData.frameList[e];var s=false;if(e==0&&(!this._animationState.lastFrameAutoTween||this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+i-this._timelineData.offset)*this._timelineData.scale>.999999)){this._tweenEasing=NaN;s=false}else if(a.displayIndex<0||n.displayIndex<0){this._tweenEasing=NaN;s=false}else if(this._animationState.autoTween){this._tweenEasing=this._animationState.clip.tweenEasing;if(isNaN(this._tweenEasing)){this._tweenEasing=a.tweenEasing;this._tweenCurve=a.curve;if(isNaN(this._tweenEasing)&&this._tweenCurve==null){s=false}else{if(this._tweenEasing==10){this._tweenEasing=0}s=true}}else{s=true}}else{this._tweenEasing=a.tweenEasing;this._tweenCurve=a.curve;if((isNaN(this._tweenEasing)||this._tweenEasing==10)&&this._tweenCurve==null){this._tweenEasing=NaN;s=false}else{s=true}}if(s){this._durationTransform.x=n.transform.x-a.transform.x;this._durationTransform.y=n.transform.y-a.transform.y;this._durationTransform.skewX=n.transform.skewX-a.transform.skewX;this._durationTransform.skewY=n.transform.skewY-a.transform.skewY;this._durationTransform.scaleX=n.transform.scaleX-a.transform.scaleX+n.scaleOffset.x;this._durationTransform.scaleY=n.transform.scaleY-a.transform.scaleY+n.scaleOffset.y;this._durationTransform.normalizeRotation();if(e==0){this._durationTransform.skewX=t.TransformUtil.formatRadian(this._durationTransform.skewX);this._durationTransform.skewY=t.TransformUtil.formatRadian(this._durationTransform.skewY)}this._durationPivot.x=n.pivot.x-a.pivot.x;this._durationPivot.y=n.pivot.y-a.pivot.y;if(this._durationTransform.x||this._durationTransform.y||this._durationTransform.skewX||this._durationTransform.skewY||this._durationTransform.scaleX||this._durationTransform.scaleY||this._durationPivot.x||this._durationPivot.y){this._tweenTransform=true;this._tweenScale=a.tweenScale}else{this._tweenTransform=false;this._tweenScale=false}}else{this._tweenTransform=false;this._tweenScale=false}if(!this._tweenTransform){if(this._animationState.additiveBlending){this._transform.x=a.transform.x;this._transform.y=a.transform.y;this._transform.skewX=a.transform.skewX;this._transform.skewY=a.transform.skewY;this._transform.scaleX=a.transform.scaleX;this._transform.scaleY=a.transform.scaleY;this._pivot.x=a.pivot.x;this._pivot.y=a.pivot.y}else{this._transform.x=this._originTransform.x+a.transform.x;this._transform.y=this._originTransform.y+a.transform.y;this._transform.skewX=this._originTransform.skewX+a.transform.skewX;this._transform.skewY=this._originTransform.skewY+a.transform.skewY;this._transform.scaleX=this._originTransform.scaleX*a.transform.scaleX;this._transform.scaleY=this._originTransform.scaleY*a.transform.scaleY;this._pivot.x=this._originPivot.x+a.pivot.x;this._pivot.y=this._originPivot.y+a.pivot.y}this._bone.invalidUpdate()}else if(!this._tweenScale){if(this._animationState.additiveBlending){this._transform.scaleX=a.transform.scaleX;this._transform.scaleY=a.transform.scaleY}else{this._transform.scaleX=this._originTransform.scaleX*a.transform.scaleX;this._transform.scaleY=this._originTransform.scaleY*a.transform.scaleY}}};n.updateTween=function(){var i=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenTransform){var e=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;if(this._tweenCurve!=null){e=this._tweenCurve.getValueByProgress(e)}else if(this._tweenEasing){e=t.MathUtil.getEaseValue(e,this._tweenEasing)}var a=i.transform;var n=i.pivot;if(this._animationState.additiveBlending){this._transform.x=a.x+this._durationTransform.x*e;this._transform.y=a.y+this._durationTransform.y*e;this._transform.skewX=a.skewX+this._durationTransform.skewX*e;this._transform.skewY=a.skewY+this._durationTransform.skewY*e;if(this._tweenScale){this._transform.scaleX=a.scaleX+this._durationTransform.scaleX*e;this._transform.scaleY=a.scaleY+this._durationTransform.scaleY*e}this._pivot.x=n.x+this._durationPivot.x*e;this._pivot.y=n.y+this._durationPivot.y*e}else{this._transform.x=this._originTransform.x+a.x+this._durationTransform.x*e;this._transform.y=this._originTransform.y+a.y+this._durationTransform.y*e;this._transform.skewX=this._originTransform.skewX+a.skewX+this._durationTransform.skewX*e;this._transform.skewY=this._originTransform.skewY+a.skewY+this._durationTransform.skewY*e;if(this._tweenScale){this._transform.scaleX=this._originTransform.scaleX*a.scaleX+this._durationTransform.scaleX*e;this._transform.scaleY=this._originTransform.scaleY*a.scaleY+this._durationTransform.scaleY*e}this._pivot.x=this._originPivot.x+n.x+this._durationPivot.x*e;this._pivot.y=this._originPivot.y+n.y+this._durationPivot.y*e}this._bone.invalidUpdate()}};n.updateSingleFrame=function(){var t=this._timelineData.frameList[0];this._bone._arriveAtFrame(t,this,this._animationState,false);this._isComplete=true;this._tweenEasing=NaN;this._tweenTransform=false;this._tweenScale=false;this._tweenColor=false;if(this._animationState.additiveBlending){this._transform.x=t.transform.x;this._transform.y=t.transform.y;this._transform.skewX=t.transform.skewX;this._transform.skewY=t.transform.skewY;this._transform.scaleX=t.transform.scaleX;this._transform.scaleY=t.transform.scaleY;this._pivot.x=t.pivot.x;this._pivot.y=t.pivot.y}else{this._transform.x=this._originTransform.x+t.transform.x;this._transform.y=this._originTransform.y+t.transform.y;this._transform.skewX=this._originTransform.skewX+t.transform.skewX;this._transform.skewY=this._originTransform.skewY+t.transform.skewY;this._transform.scaleX=this._originTransform.scaleX*t.transform.scaleX;this._transform.scaleY=this._originTransform.scaleY*t.transform.scaleY;this._pivot.x=this._originPivot.x+t.pivot.x;this._pivot.y=this._originPivot.y+t.pivot.y}this._bone.invalidUpdate()};i.HALF_PI=Math.PI*.5;i.DOUBLE_PI=Math.PI*2;i._pool=[];return i}();t.TimelineState=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(t,i){if(t===void 0){t=-1}if(i===void 0){i=1}this._time=t>=0?t:(new Date).getTime()*.001;this._timeScale=isNaN(i)?1:i;this._animatableList=[]}var i=__define,e=t,a=e.prototype;i(a,"time",function(){return this._time});i(a,"timeScale",function(){return this._timeScale},function(t){if(isNaN(t)||t<0){t=1}this._timeScale=t});a.contains=function(t){return this._animatableList.indexOf(t)>=0};a.add=function(t){if(t&&this._animatableList.indexOf(t)==-1){this._animatableList.push(t)}};a.remove=function(t){var i=this._animatableList.indexOf(t);if(i>=0){this._animatableList[i]=null}};a.clear=function(){this._animatableList.length=0};a.advanceTime=function(t){if(t===void 0){t=-1}if(t<0){t=(new Date).getTime()*.001-this._time}t*=this._timeScale;this._time+=t;this._length=this._animatableList.length;if(this._length==0){return}this._currentIndex=0;for(this._i=0;this._i<this._length;this._i++){this._animatable=this._animatableList[this._i];if(this._animatable){if(this._currentIndex!=this._i){this._animatableList[this._currentIndex]=this._animatable;this._animatableList[this._i]=null}this._animatable.advanceTime(t);this._currentIndex++}}if(this._currentIndex!=this._i){this._length=this._animatableList.length;while(this._i<this._length){this._animatableList[this._currentIndex++]=this._animatableList[this._i++]}this._animatableList.length=this._currentIndex}};t.clock=new t;return t}();t.WorldClock=i})(dragonBones||(dragonBones={}));var __extends=this.__extends||function(t,i){for(var e in i)if(i.hasOwnProperty(e))t[e]=i[e];function a(){this.constructor=t}a.prototype=i.prototype;t.prototype=new a};var dragonBones;(function(t){var i=function(){function t(){}t.prototype.hasEventListener=function(t){if(this._listenersMap&&this._listenersMap[t]){return true}return false};t.prototype.addEventListener=function(t,i){if(t&&i){if(!this._listenersMap){this._listenersMap={}}var e=this._listenersMap[t];if(e){this.removeEventListener(t,i)}if(e){e.push(i)}else{this._listenersMap[t]=[i]}}};t.prototype.removeEventListener=function(t,i){if(!this._listenersMap||!t||!i){return}var e=this._listenersMap[t];if(e){var a=e.length;for(var n=0;n<a;n++){if(e[n].toString()===i.toString()){if(a==1){e.length=0}else{e.splice(n,1)}}}}};t.prototype.removeAllEventListeners=function(t){if(t){delete this._listenersMap[t]}else{this._listenersMap=null}};t.prototype.dispatchEvent=function(t){if(t){var i=this._listenersMap[t.type];if(i){t.target=this;var e=i.concat();var a=i.length;for(var n=0;n<a;n++){e[n](t)}}}};return t}();t.EventDispatcher=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(){t.call(this);if(i._instance){throw new Error("Singleton already constructed!")}}var e=__define,a=i,n=a.prototype;i.getInstance=function(){if(!i._instance){i._instance=new i}return i._instance};return i}(t.EventDispatcher);t.SoundEventManager=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(e){i.call(this);this._boneIKList=[];this._display=e;this._animation=new t.Animation(this);this._slotsZOrderChanged=false;this._slotList=[];this._boneList=[];this._eventList=[];this._ikList=[];this._delayDispose=false;this._lockDispose=false;this._armatureData=null}var a=__define,n=e,s=n.prototype;a(s,"armatureData",function(){return this._armatureData});a(s,"display",function(){return this._display});s.getDisplay=function(){return this._display};a(s,"animation",function(){return this._animation});s.dispose=function(){this._delayDispose=true;if(!this._animation||this._lockDispose){return}this.userData=null;this._animation.dispose();var t=this._slotList.length;while(t--){this._slotList[t].dispose()}t=this._boneList.length;while(t--){this._boneList[t].dispose()}t=this._ikList.length;while(t--){this._ikList[t].dispose()}this._armatureData=null;this._animation=null;this._slotList=null;this._boneList=null;this._eventList=null;this._ikList=null};s.invalidUpdate=function(t){if(t===void 0){t=null}if(t){var i=this.getBone(t);if(i){i.invalidUpdate()}}else{var e=this._boneList.length;while(e--){this._boneList[e].invalidUpdate()}}};s.advanceTime=function(i){this._lockDispose=true;this._animation._advanceTime(i);i*=this._animation.timeScale;this._isFading=this._animation._isFading;var e=this._boneIKList.length;var a;var n;var s;for(this._i=0;this._i<e;this._i++){for(n=0,s=this._boneIKList[this._i].length;n<s;n++){a=this._boneIKList[this._i][n];if(a.isIKConstraint){var r=this._ikList[this._i-1];if(r.bones[0].name==a.name){a._update(this._isFading);a.rotationIK=a.global.rotation;if(r.bones.length>1){r.bones[1]._update(this._isFading);r.bones[1].rotationIK=r.bones[1].global.rotation}r.compute()}a.adjustGlobalTransformMatrixByIK();
}else{a._update(this._isFading);a.rotationIK=a.global.rotation}}}this._i=this._slotList.length;while(this._i--){this._tmpSlot=this._slotList[this._i];this._tmpSlot._update();if(this._tmpSlot._isShowDisplay){var o=this._tmpSlot.childArmature;if(o){o.advanceTime(i)}}}if(this._slotsZOrderChanged){this.updateSlotsZOrder();if(this.hasEventListener(t.ArmatureEvent.Z_ORDER_UPDATED)){this.dispatchEvent(new t.ArmatureEvent(t.ArmatureEvent.Z_ORDER_UPDATED))}}if(this._eventList.length>0){for(this._i=0,this._len=this._eventList.length;this._i<this._len;this._i++){var l=this._eventList[this._i];this.dispatchEvent(l)}this._eventList.length=0}this._lockDispose=false;if(this._delayDispose){this.dispose()}};s.resetAnimation=function(){this.animation.stop();this.animation._resetAnimationStateList();for(var t=0,i=this._boneList.length;t<i;t++){this._boneList[t]._removeAllStates()}};s.getSlots=function(t){if(t===void 0){t=true}return t?this._slotList.concat():this._slotList};s.getSlot=function(t){var i=this._slotList.length;for(var e=0;e<i;e++){var a=this._slotList[e];if(a.name==t){return a}}return null};s.getSlotByDisplay=function(t){if(t){var i=this._slotList.length;for(var e=0;e<i;e++){var a=this._slotList[e];if(a.display==t){return a}}}return null};s.addSlot=function(t,i){var e=this.getBone(i);if(e){e.addSlot(t)}else{throw new Error}};s.removeSlot=function(t){if(!t||t.armature!=this){throw new Error}t.parent.removeSlot(t)};s.removeSlotByName=function(t){var i=this.getSlot(t);if(i){this.removeSlot(i)}return i};s.getBones=function(t){if(t===void 0){t=true}return t?this._boneList.concat():this._boneList};s.getBone=function(t){var i=this._boneList.length;for(var e=0;e<i;e++){var a=this._boneList[e];if(a.name==t){return a}}return null};s.getBoneByDisplay=function(t){var i=this.getSlotByDisplay(t);return i?i.parent:null};s.addBone=function(t,i,e){if(i===void 0){i=null}if(e===void 0){e=false}var a;if(i){a=this.getBone(i);if(!a){throw new Error}}if(a){a.addChildBone(t,e)}else{if(t.parent){t.parent.removeChildBone(t,e)}t._setArmature(this);if(!e){this._updateAnimationAfterBoneListChanged()}}};s.removeBone=function(t,i){if(i===void 0){i=false}if(!t||t.armature!=this){throw new Error}if(t.parent){t.parent.removeChildBone(t,i)}else{t._setArmature(null);if(!i){this._updateAnimationAfterBoneListChanged(false)}}};s.removeBoneByName=function(t){var i=this.getBone(t);if(i){this.removeBone(i)}return i};s._addBoneToBoneList=function(t){if(this._boneList.indexOf(t)<0){this._boneList[this._boneList.length]=t}};s._removeBoneFromBoneList=function(t){var i=this._boneList.indexOf(t);if(i>=0){this._boneList.splice(i,1)}};s._addSlotToSlotList=function(t){if(this._slotList.indexOf(t)<0){this._slotList[this._slotList.length]=t}};s._removeSlotFromSlotList=function(t){var i=this._slotList.indexOf(t);if(i>=0){this._slotList.splice(i,1)}};s.updateSlotsZOrder=function(){this._slotList.sort(this.sortSlot);var t=this._slotList.length;while(t--){var i=this._slotList[t];if(i._isShowDisplay){i._addDisplayToContainer(this._display)}}this._slotsZOrderChanged=false};s._updateAnimationAfterBoneListChanged=function(t){if(t===void 0){t=true}if(t){this.sortBoneList()}this._animation._updateTimelineStates=true};s.sortBoneList=function(){var i=this._boneList.length;if(i==0){return}var e=[];while(i--){var a=0;var n=this._boneList[i];var s=n;while(s){a++;s=s.parent}e[i]=[a,n]}e.sort(t.ArmatureData.sortBoneDataHelpArrayDescending);i=e.length;while(i--){this._boneList[i]=e[i][1]}e.length=0};s._arriveAtFrame=function(i,a,n,s){if(i.event&&this.hasEventListener(t.FrameEvent.ANIMATION_FRAME_EVENT)){var r=new t.FrameEvent(t.FrameEvent.ANIMATION_FRAME_EVENT);r.animationState=n;r.frameLabel=i.event;this._eventList.push(r)}if(i.sound&&e._soundManager.hasEventListener(t.SoundEvent.SOUND)){var o=new t.SoundEvent(t.SoundEvent.SOUND);o.armature=this;o.animationState=n;o.sound=i.sound;e._soundManager.dispatchEvent(o)}if(i.action){if(n.displayControl){this.animation.gotoAndPlay(i.action)}}};s.sortSlot=function(t,i){return t.zOrder<i.zOrder?1:-1};s.getAnimation=function(){return this._animation};s.getIKs=function(t){if(t===void 0){t=true}return t?this._ikList.concat():this._ikList};s.buildIK=function(){var i;this._ikList.length=0;for(var e=0,a=this._armatureData.ikDataList.length;e<a;e++){i=this._armatureData.ikDataList[e];this._ikList.push(new t.IKConstraint(i,this))}};s.updateBoneCache=function(){this._boneList.reverse();var t={};var i=this._ikList.length;var e=i+1;var a;var n;var s;var r;var o;var l;this._boneIKList=[];while(this._boneIKList.length<e){this._boneIKList[this._boneIKList.length]=[]}t[this._boneList[0].name]=0;for(a=0,n=this._ikList.length;a<n;a++){t[this._ikList[a].bones[0].name]=a+1}t:for(a=0,n=this._boneList.length;a<n;a++){o=this._boneList[a];l=o;while(l){if(l.parent==null){t[l.name]=0}if(t.hasOwnProperty(l.name)){this._boneIKList[t[l.name]].push(o);continue t}l=l.parent}}};s.getIKTargetData=function(t){var i=[];var e;for(var a=0,n=this._ikList.length;a<n;a++){e=this._ikList[a];if(t.name==e.target.name){i.push(e)}}return i};e._soundManager=t.SoundEventManager.getInstance();return e}(t.EventDispatcher);t.Armature=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0}var i=__define,e=t,a=e.prototype;a.invert=function(){var t=this.a;var i=this.b;var e=this.c;var a=this.d;var n=this.tx;var s=t*a-i*e;this.a=a/s;this.b=-i/s;this.c=-e/s;this.d=t/s;this.tx=(e*this.ty-a*n)/s;this.ty=-(t*this.ty-i*n)/s};a.concat=function(t){var i=t.a;var e=t.b;var a=t.c;var n=t.d;var s=this.tx;var r=this.ty;if(i!=1||e!=0||a!=0||n!=1){var o=this.a;var l=this.b;var h=this.c;var u=this.d;this.a=o*i+l*a;this.b=o*e+l*n;this.c=h*i+u*a;this.d=h*e+u*n}this.tx=s*i+r*a+t.tx;this.ty=s*e+r*n+t.ty};a.copyFrom=function(t){this.tx=t.tx;this.ty=t.ty;this.a=t.a;this.b=t.b;this.c=t.c;this.d=t.d};a.transformPoint=function(t,i,e,a){if(a===void 0){a=false}e.x=this.a*t+this.c*i;e.y=this.b*t+this.d*i;if(!a){e.x+=this.tx;e.y+=this.ty}};return t}();t.Matrix=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this.x=0;this.y=0;this.skewX=0;this.skewY=0;this.scaleX=1;this.scaleY=1}var e=__define,a=i,n=a.prototype;e(n,"rotation",function(){return this.skewX},function(t){this.skewX=this.skewY=t});n.copy=function(t){this.x=t.x;this.y=t.y;this.skewX=t.skewX;this.skewY=t.skewY;this.scaleX=t.scaleX;this.scaleY=t.scaleY};n.add=function(t){this.x+=t.x;this.y+=t.y;this.skewX+=t.skewX;this.skewY+=t.skewY;this.scaleX*=t.scaleX;this.scaleY*=t.scaleY};n.minus=function(t){this.x-=t.x;this.y-=t.y;this.skewX-=t.skewX;this.skewY-=t.skewY;this.scaleX/=t.scaleX;this.scaleY/=t.scaleY};n.normalizeRotation=function(){this.skewX=t.TransformUtil.normalizeRotation(this.skewX);this.skewY=t.TransformUtil.normalizeRotation(this.skewY)};n.clone=function(){var t=new i;t.copy(this);return t};n.toString=function(){var t="x:"+this.x+" y:"+this.y+" skewX:"+this.skewX+" skewY:"+this.skewY+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY;return t};return i}();t.DBTransform=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._globalTransformMatrix=new t.Matrix;this._global=new t.DBTransform;this._origin=new t.DBTransform;this._offset=new t.DBTransform;this._offset.scaleX=this._offset.scaleY=1;this._visible=true;this._armature=null;this._parent=null;this.userData=null;this.inheritRotation=true;this.inheritScale=true;this.inheritTranslation=true}var e=__define,a=i,n=a.prototype;e(n,"global",function(){return this._global});e(n,"origin",function(){return this._origin});e(n,"offset",function(){return this._offset});e(n,"armature",function(){return this._armature});n._setArmature=function(t){this._armature=t};e(n,"parent",function(){return this._parent});n._setParent=function(t){this._parent=t};n.dispose=function(){this.userData=null;this._globalTransformMatrix=null;this._global=null;this._origin=null;this._offset=null;this._armature=null;this._parent=null};n._calculateRelativeParentTransform=function(){};n._calculateParentTransform=function(){if(this.parent&&(this.inheritTranslation||this.inheritRotation||this.inheritScale)){var i=this._parent._globalTransformForChild;var e=this._parent._globalTransformMatrixForChild;return t.ParentTransformObject.create().setTo(i,e)}t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix);return null};n._updateGlobal=function(){this._calculateRelativeParentTransform();var i=this._calculateParentTransform();if(i!=null){var e=i.parentGlobalTransformMatrix;var a=i.parentGlobalTransform;var n=this._global.x;var s=this._global.y;this._global.x=e.a*n+e.c*s+e.tx;this._global.y=e.d*s+e.b*n+e.ty;if(this.inheritRotation){this._global.skewX+=a.skewX;this._global.skewY+=a.skewY}if(this.inheritScale){this._global.scaleX*=a.scaleX;this._global.scaleY*=a.scaleY}}t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix);return i};i._tempParentGlobalTransformMatrix=new t.Matrix;i._tempParentGlobalTransform=new t.DBTransform;return i}();t.DBObject=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(){i.call(this);this.applyOffsetTranslationToChild=true;this.applyOffsetRotationToChild=true;this.applyOffsetScaleToChild=false;this.isIKConstraint=false;this.childrenBones=[];this._needUpdate=0;this._tween=new t.DBTransform;this._tweenPivot=new t.Point;this._tween.scaleX=this._tween.scaleY=1;this._boneList=[];this._slotList=[];this._timelineStateList=[];this._needUpdate=2;this._isColorChanged=false}var a=__define,n=e,s=n.prototype;e.initWithBoneData=function(t){var i=new e;i.name=t.name;i.length=t.length;i.inheritRotation=t.inheritRotation;i.inheritScale=t.inheritScale;i.origin.copy(t.transform);return i};s.dispose=function(){if(!this._boneList){return}i.prototype.dispose.call(this);var t=this._boneList.length;while(t--){this._boneList[t].dispose()}t=this._slotList.length;while(t--){this._slotList[t].dispose()}this._tween=null;this._tweenPivot=null;this._boneList=null;this._slotList=null;this._timelineStateList=null};s.contains=function(t){if(!t){throw new Error}if(t==this){return false}var i=t;while(!(i==this||i==null)){i=i.parent}return i==this};s.addChildBone=function(t,i){if(i===void 0){i=false}if(!t){throw new Error}if(t==this||t.contains(this)){throw new Error}if(t.parent==this){return}if(t.parent){t.parent.removeChildBone(t,i)}this._boneList[this._boneList.length]=t;t._setParent(this);t._setArmature(this._armature);var e=this.childrenBones.indexOf(t);if(e<0){this.childrenBones.push(t)}if(this._armature&&!i){this._armature._updateAnimationAfterBoneListChanged()}};s.removeChildBone=function(t,i){if(i===void 0){i=false}if(!t){throw new Error}var e=this._boneList.indexOf(t);if(e<0){throw new Error}this._boneList.splice(e,1);t._setParent(null);t._setArmature(null);var a=this.childrenBones.indexOf(t);if(a>=0){this.childrenBones.splice(a,1)}if(this._armature&&!i){this._armature._updateAnimationAfterBoneListChanged(false)}};s.addSlot=function(t){if(!t){throw new Error}if(t.parent){t.parent.removeSlot(t)}this._slotList[this._slotList.length]=t;t._setParent(this);t.setArmature(this._armature)};s.removeSlot=function(t){if(!t){throw new Error}var i=this._slotList.indexOf(t);if(i<0){throw new Error}this._slotList.splice(i,1);t._setParent(null);t.setArmature(null)};s._setArmature=function(t){if(this._armature==t){return}if(this._armature){this._armature._removeBoneFromBoneList(this);this._armature._updateAnimationAfterBoneListChanged(false)}this._armature=t;if(this._armature){this._armature._addBoneToBoneList(this)}var i=this._boneList.length;while(i--){this._boneList[i]._setArmature(this._armature)}i=this._slotList.length;while(i--){this._slotList[i].setArmature(this._armature)}};s.getBones=function(t){if(t===void 0){t=true}return t?this._boneList.concat():this._boneList};s.getSlots=function(t){if(t===void 0){t=true}return t?this._slotList.concat():this._slotList};s.invalidUpdate=function(){this._needUpdate=2;this.operationInvalidUpdate(this);var t;var i;for(t=0,i=this.childrenBones.length;t<i;t++){if(this.childrenBones[t]._needUpdate!=2){this.operationInvalidUpdate(this.childrenBones[t]);this.childrenBones[t].invalidUpdate()}}};s.operationInvalidUpdate=function(t){var i=this.armature.getIKTargetData(t);var e;var a;var n;var s;var r;var o;for(e=0,a=i.length;e<a;e++){r=i[e];for(n=0,s=r.bones.length;n<s;n++){o=r.bones[n];if(o._needUpdate!=2){o.invalidUpdate()}}}};s._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._tween.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._tween.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._tween.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._tween.skewY+this._offset.skewY;this._global.x=this._origin.x+this._tween.x+this._offset.x;this._global.y=this._origin.y+this._tween.y+this._offset.y};s._update=function(t){if(t===void 0){t=false}this._needUpdate--;if(t||this._needUpdate>0||this._parent&&this._parent._needUpdate>0){this._needUpdate=1}else{return}this.updataLocalTransform();this.updateGlobalTransform()};s.updataLocalTransform=function(){this.blendingTimeline();this._calculateRelativeParentTransform()};s.updateGlobalTransform=function(){var i=this._updateGlobal();var e;var a;if(i){e=i.parentGlobalTransform;a=i.parentGlobalTransformMatrix;i.release()}var n=this._offset.x!=0||this._offset.y!=0;var s=this._offset.scaleX!=1||this._offset.scaleY!=1;var r=this._offset.skewX!=0||this._offset.skewY!=0;if((!n||this.applyOffsetTranslationToChild)&&(!s||this.applyOffsetScaleToChild)&&(!r||this.applyOffsetRotationToChild)){this._globalTransformForChild=this._global;this._globalTransformMatrixForChild=this._globalTransformMatrix}else{if(!this._tempGlobalTransformForChild){this._tempGlobalTransformForChild=new t.DBTransform}this._globalTransformForChild=this._tempGlobalTransformForChild;if(!this._tempGlobalTransformMatrixForChild){this._tempGlobalTransformMatrixForChild=new t.Matrix}this._globalTransformMatrixForChild=this._tempGlobalTransformMatrixForChild;this._globalTransformForChild.x=this._origin.x+this._tween.x;this._globalTransformForChild.y=this._origin.y+this._tween.y;this._globalTransformForChild.scaleX=this._origin.scaleX*this._tween.scaleX;this._globalTransformForChild.scaleY=this._origin.scaleY*this._tween.scaleY;this._globalTransformForChild.skewX=this._origin.skewX+this._tween.skewX;this._globalTransformForChild.skewY=this._origin.skewY+this._tween.skewY;if(this.applyOffsetTranslationToChild){this._globalTransformForChild.x+=this._offset.x;this._globalTransformForChild.y+=this._offset.y}if(this.applyOffsetScaleToChild){this._globalTransformForChild.scaleX*=this._offset.scaleX;this._globalTransformForChild.scaleY*=this._offset.scaleY}if(this.applyOffsetRotationToChild){this._globalTransformForChild.skewX+=this._offset.skewX;this._globalTransformForChild.skewY+=this._offset.skewY}t.TransformUtil.transformToMatrix(this._globalTransformForChild,this._globalTransformMatrixForChild);if(a){this._globalTransformMatrixForChild.concat(a);t.TransformUtil.matrixToTransform(this._globalTransformMatrixForChild,this._globalTransformForChild,this._globalTransformForChild.scaleX*e.scaleX>=0,this._globalTransformForChild.scaleY*e.scaleY>=0)}}};s._updateColor=function(t,i,e,a,n,s,r,o,l){var h=this._slotList.length;for(var u=0;u<h;u++){var f=this._slotList[u];f._updateDisplayColor(t,i,e,a,n,s,r,o)}this._isColorChanged=l};s.adjustGlobalTransformMatrixByIK=function(){if(!this.parent){return}this.updataLocalTransform();this._global.rotation=this.rotationIK-this.parentBoneRotation;this.updateGlobalTransform()};s._hideSlots=function(){var t=this._slotList.length;for(var i=0;i<t;i++){var e=this._slotList[i];e._changeDisplay(-1)}};s._arriveAtFrame=function(i,a,n,s){var r=n.displayControl&&(!this.displayController||this.displayController==n.name)&&n.containsBoneMask(this.name);if(r){var o=i;var l=o.displayIndex;var h;if(i.event&&this._armature.hasEventListener(t.FrameEvent.BONE_FRAME_EVENT)){var u=new t.FrameEvent(t.FrameEvent.BONE_FRAME_EVENT);u.bone=this;u.animationState=n;u.frameLabel=i.event;this._armature._eventList.push(u)}if(i.sound&&e._soundManager.hasEventListener(t.SoundEvent.SOUND)){var f=new t.SoundEvent(t.SoundEvent.SOUND);f.armature=this._armature;f.animationState=n;f.sound=i.sound;e._soundManager.dispatchEvent(f)}if(i.action){var _=this._slotList.length;for(var m=0;m<_;m++){h=this._slotList[m];var d=h.childArmature;if(d){d.animation.gotoAndPlay(i.action)}}}}};s._updateGlobal=function(){if(!this._armature._skewEnable){return i.prototype._updateGlobal.call(this)}var e=this._calculateParentTransform();if(e!=null&&e.parentGlobalTransformMatrix&&e.parentGlobalTransform){var a=e.parentGlobalTransformMatrix;var n=e.parentGlobalTransform;var s=this._global.scaleX*n.scaleX>0;var r=this._global.scaleY*n.scaleY>0;var o=this._global.rotation;var l=this._global.scaleX;var h=this._global.scaleY;var u=this.parentBoneRotation;this._localTransform=this._global;if(this.inheritScale&&!this.inheritRotation){if(u!=0){this._localTransform=this._localTransform.clone();this._localTransform.rotation-=u}}t.TransformUtil.transformToMatrix(this._localTransform,this._globalTransformMatrix);this._globalTransformMatrix.concat(a);if(this.inheritScale){t.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,s,r)}else{t.TransformUtil.matrixToTransformPosition(this._globalTransformMatrix,this._global);this._global.scaleX=this._localTransform.scaleX;this._global.scaleY=this._localTransform.scaleY;this._global.rotation=this._localTransform.rotation+(this.inheritRotation?u:0);t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix)}}return e};s._addState=function(t){if(this._timelineStateList.indexOf(t)<0){this._timelineStateList.push(t);this._timelineStateList.sort(this.sortState)}};s._removeState=function(t){var i=this._timelineStateList.indexOf(t);if(i>=0){this._timelineStateList.splice(i,1)}};s._removeAllStates=function(){this._timelineStateList.length=0};s.blendingTimeline=function(){var t;var i;var e;var a;var n=this._timelineStateList.length;if(n==1){t=this._timelineStateList[0];a=t._animationState.weight*t._animationState.fadeWeight;t._weight=a;i=t._transform;e=t._pivot;this._tween.x=i.x*a;this._tween.y=i.y*a;this._tween.skewX=i.skewX*a;this._tween.skewY=i.skewY*a;this._tween.scaleX=1+(i.scaleX-1)*a;this._tween.scaleY=1+(i.scaleY-1)*a;this._tweenPivot.x=e.x*a;this._tweenPivot.y=e.y*a}else if(n>1){var s=0;var r=0;var o=0;var l=0;var h=1;var u=1;var f=0;var _=0;var m=1;var d=0;var c=this._timelineStateList[n-1]._animationState.layer;var p=0;while(n--){t=this._timelineStateList[n];p=t._animationState.layer;if(c!=p){if(d>=m){t._weight=0;break}else{m-=d}}c=p;a=t._animationState.weight*t._animationState.fadeWeight*m;t._weight=a;if(a){i=t._transform;e=t._pivot;s+=i.x*a;r+=i.y*a;o+=i.skewX*a;l+=i.skewY*a;h+=(i.scaleX-1)*a;u+=(i.scaleY-1)*a;f+=e.x*a;_+=e.y*a;d+=a}}this._tween.x=s;this._tween.y=r;this._tween.skewX=o;this._tween.skewY=l;this._tween.scaleX=h;this._tween.scaleY=u;this._tweenPivot.x=f;this._tweenPivot.y=_}};s.sortState=function(t,i){return t._animationState.layer<i._animationState.layer?-1:1};a(s,"childArmature",function(){if(this.slot){return this.slot.childArmature}return null});a(s,"display",function(){if(this.slot){return this.slot.display}return null},function(t){if(this.slot){this.slot.display=t}});a(s,"node",function(){return this._offset});a(s,"visible",undefined,function(t){if(this._visible!=t){this._visible=t;var i=this._slotList.length;for(var e=0;e<i;e++){var a=this._slotList[e];a._updateDisplayVisible(this._visible)}}});a(s,"slot",function(){return this._slotList.length>0?this._slotList[0]:null});a(s,"parentBoneRotation",function(){return this.parent?this.parent.rotationIK:0});e._soundManager=t.SoundEventManager.getInstance();return e}(t.DBObject);t.Bone=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(t,i){this.animationCacheBend=0;this.animationCacheWeight=-1;this.ikdata=t;this.armature=i;this.weight=t.weight;this.bendDirection=t.bendPositive?1:-1;this.bones=[];var e;if(t.chain){e=i.getBone(t.bones).parent;e.isIKConstraint=true;this.bones.push(e)}e=i.getBone(t.bones);e.isIKConstraint=true;this.bones.push(e);this.target=i.getBone(t.target)}var e=__define,a=i,n=a.prototype;n.dispose=function(){};n.compute=function(){switch(this.bones.length){case 1:var t=this.animationCacheWeight>=0?this.animationCacheWeight:this.weight;this.compute1(this.bones[0],this.target,t);break;case 2:var i=this.animationCacheBend!=0?this.animationCacheBend:this.bendDirection;var e=this.animationCacheWeight>=0?this.animationCacheWeight:this.weight;var a=this.compute2(this.bones[0],this.bones[1],this.target.global.x,this.target.global.y,i,e);this.bones[0].rotationIK=this.bones[0].origin.rotation+(a.x-this.bones[0].origin.rotation)*e+this.bones[0].parent.rotationIK;this.bones[1].rotationIK=this.bones[1].origin.rotation+(a.y-this.bones[1].origin.rotation)*e+this.bones[0].rotationIK;break}};n.compute1=function(t,i,e){var a=!t.inheritRotation||t.parent==null?0:t.parent.global.rotation;var n=t.global.rotation;var s=Math.atan2(i.global.y-t.global.y,i.global.x-t.global.x);t.rotationIK=n+(s-n)*e};n.compute2=function(i,e,a,n,s,r){if(r==0){return new t.Point(i.global.rotation,e.global.rotation)}var o=new t.Point;var l=new t.Point(i.global.x,i.global.y);var h=new t.Point(e.global.x,e.global.y);var u=new t.Matrix;t.TransformUtil.transformToMatrix(i.parent.global,u);u.invert();var f=t.TransformUtil.applyMatrixToPoint(new t.Point(a,n),u,true);a=f.x;n=f.y;l=t.TransformUtil.applyMatrixToPoint(l,u,true);h=t.TransformUtil.applyMatrixToPoint(h,u,true);var _=i.origin.scaleX;var m=i.origin.scaleY;var d=e.origin.scaleX;var c=h.x-l.x;var p=h.y-l.y;var v=Math.sqrt(c*c+p*p);var g;var T;var y=1;var D=0;var b=0;if(_<0){_=-_;D=Math.PI;y=-1}else{D=0;y=1}if(m<0){m=-m;y=-y}if(d<0){d=-d;b=Math.PI}else{b=0}s=y*s;t:if(Math.abs(_-m)<=.001){var A=e.length;var w=A*d;a=a-l.x;n=n-l.y;var L=2*v*w;var C=(a*a+n*n-v*v-w*w)/L;if(C<-1)C=-1;else if(C>1)C=1;T=Math.acos(C)*s;var S=v+w*C;var x=w*Math.sin(T);g=Math.atan2(n*S-a*x,a*S+n*x)}else{var M=v;var E=a-l.x;var O=n-l.y;var B=e.length*e.origin.scaleX;var F=_*B;var N=m*B;var I=Math.atan2(O,E);var P=F*F;var k=N*N;var R=M*M;var V=E*E+O*O;var Y=k*R+P*V-P*k;var X=-2*k*M;var U=k-P;var G=X*X-4*U*Y;if(G>=0){var j=Math.sqrt(G);if(X<0){j=-j}j=-(X+j)/2;var H=j/U;var W=Y/j;var K=Math.abs(H)<Math.abs(W)?H:W;if(K*K<=V){var Z=Math.sqrt(V-K*K)*s;g=I-Math.atan2(Z,K);T=Math.atan2(Z/m,(K-M)/_);break t}}var z=0;var q=Number.MAX_VALUE;var $=0;var J=0;var Q=0;var tt=0;var it=0;var et=0;var at=M+F;var nt=at*at;if(nt>tt){Q=0;tt=nt;it=at}at=M-F;nt=at*at;if(nt<q){z=Math.PI;q=nt;$=at}var st=Math.acos(-F*M/(P-k));at=F*Math.cos(st)+M;var rt=N*Math.sin(st);nt=at*at+rt*rt;if(nt<q){z=st;q=nt;$=at;J=rt}if(nt>tt){Q=st;tt=nt;it=at;et=rt}if(V<=(q+tt)/2){g=I-Math.atan2(J*s,$);T=z*s}else{g=I-Math.atan2(et*s,it);T=Q*s}}var ot=e.origin.x;var lt=e.origin.y*m;var ht=Math.atan2(lt,ot)*y;o.x=g-ht+D;o.y=(T+ht)*y+b;this.normalize(o.x);this.normalize(o.y);return o};n.normalize=function(t){if(t>Math.PI){t-=Math.PI*2}else if(t<-Math.PI){t+=Math.PI*2}};return i}();t.IKConstraint=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(){i.call(this);this.isMeshEnabled=false;this._currentDisplayIndex=0;this._ffdChanged=false;this._ffdVertices=null;this._meshBones=null;this._meshData=null;this._ffdOffset=0;this._displayList=[];this._currentDisplayIndex=-1;this._originZOrder=0;this._tweenZOrder=0;this._offsetZOrder=0;this._isShowDisplay=false;this._colorTransform=new t.ColorTransform;this._displayDataList=null;this._currentDisplay=null;this.inheritRotation=true;this.inheritScale=true}var a=__define,n=e,s=n.prototype;a(s,"displayIndex",function(){return this._currentDisplayIndex});s.initWithSlotData=function(t){this.name=t.name;this.blendMode=t.blendMode;this._defaultGotoAndPlay=t.gotoAndPlay;this._originZOrder=t.zOrder;this._displayDataList=t.displayDataList;this._originDisplayIndex=t.displayIndex};s.dispose=function(){if(!this._displayList){return}i.prototype.dispose.call(this);this._displayList.length=0;this._displayDataList=null;this._displayList=null;this._currentDisplay=null};s.setArmature=function(t){if(this._armature==t){return}if(this._armature){this._armature._removeSlotFromSlotList(this)}this._armature=t;if(this._armature){this._armature._addSlotToSlotList(this);this._armature._slotsZOrderChanged=true;this._addDisplayToContainer(this._armature.display)}else{this._removeDisplayFromContainer()}};s._update=function(){if(this._parent._needUpdate>0||this._needUpdate||this._ffdChanged||this.isMeshUpdate()){var t=this._updateGlobal();if(t){t.release()}this._updateTransform();if(this._meshData){this._updateMesh()}this._needUpdate=false}};s.isMeshUpdate=function(){if(this._meshData&&this._meshBones.length){for(var t=0,i=this._meshBones.length;t<i;++t){var e=this._meshBones[t];if(e._needUpdate>0){return true}}}return false};s._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._offset.skewY;this._global.x=this._origin.x+this._offset.x+this._parent._tweenPivot.x;this._global.y=this._origin.y+this._offset.y+this._parent._tweenPivot.y};s.updateChildArmatureAnimation=function(){if(this.childArmature){if(this._isShowDisplay){var t=this._gotoAndPlay;if(t==null){t=this._defaultGotoAndPlay;if(t==null){this.childArmature.armatureData.defaultAnimation}}if(t==null){if(this._armature&&this._armature.animation.lastAnimationState){t=this._armature.animation.lastAnimationState.name}}if(t&&this.childArmature.animation.hasAnimation(t)){this.childArmature.animation.gotoAndPlay(t)}else{this.childArmature.animation.play()}}else{this.childArmature.animation.stop();this.childArmature.animation._lastAnimationState=null}}};s._changeDisplay=function(i){if(i===void 0){i=0}if(i<0){if(this._isShowDisplay){this._isShowDisplay=false;this._removeDisplayFromContainer();this.updateChildArmatureAnimation();this._armature.animation._updateFFDTimelineStates=true}}else if(this._displayList.length>0){var e=this._displayList.length;if(i>=e){i=e-1}if(this._currentDisplayIndex!=i){this._isShowDisplay=true;this._currentDisplayIndex=i;this._updateSlotDisplay();this.updateChildArmatureAnimation();if(this._displayDataList&&this._displayDataList.length>0&&this._currentDisplayIndex<this._displayDataList.length){this._origin.copy(this._displayDataList[this._currentDisplayIndex].transform)}this._needUpdate=true;this._armature.animation._updateFFDTimelineStates=true}else if(!this._isShowDisplay){this._isShowDisplay=true;if(this._armature){this._armature._slotsZOrderChanged=true;this._addDisplayToContainer(this._armature.display)}this.updateChildArmatureAnimation();this._armature.animation._updateFFDTimelineStates=true}}if(this._currentDisplayIndex>=0&&this._armature.animation._updateFFDTimelineStates){var a=this._displayDataList[this._currentDisplayIndex];if(a.type==t.DisplayData.MESH){this._meshData=a}else{this._meshData=null}if(this._meshData){if(this._meshBones){this._meshBones.length=this._meshData.bones.length}else{this._meshBones=[]}for(var n=0,s=this._meshData.bones.length;n<s;++n){var r=this._meshData.bones[n];this._meshBones[n]=this._armature.getBone(r.name)}}else{if(this._ffdVertices){this._ffdVertices.length=0}if(this._meshBones){this._meshBones.length=0}}}};s._updateSlotDisplay=function(){var i=-1;if(this._currentDisplay){i=this._getDisplayIndex();this._removeDisplayFromContainer()}var e=this._displayList[this._currentDisplayIndex];if(e){if(e instanceof t.Armature){this._currentDisplay=e.display}else{this._currentDisplay=e}}else{this._currentDisplay=null}this._updateDisplay(this._currentDisplay);if(this._currentDisplay){if(this._armature&&this._isShowDisplay){if(i<0){this._armature._slotsZOrderChanged=true;this._addDisplayToContainer(this._armature.display)}else{this._addDisplayToContainer(this._armature.display,i)}}this._updateDisplayBlendMode(this._blendMode);this._updateDisplayColor(this._colorTransform.alphaOffset,this._colorTransform.redOffset,this._colorTransform.greenOffset,this._colorTransform.blueOffset,this._colorTransform.alphaMultiplier,this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier,true);this._updateDisplayVisible(this._visible);this._updateTransform()}};a(s,"visible",undefined,function(t){if(this._visible!=t){this._visible=t;this._updateDisplayVisible(this._visible)}});a(s,"displayList",function(){return this._displayList},function(t){if(!t){throw new Error}if(this._currentDisplayIndex<0){this._currentDisplayIndex=0}var i=this._displayList.length=t.length;while(i--){this._displayList[i]=t[i]}var e=this._currentDisplayIndex;this._currentDisplayIndex=-1;this._changeDisplay(e)});a(s,"display",function(){return this._currentDisplay},function(t){if(this._currentDisplayIndex<0){this._currentDisplayIndex=0}if(this._displayList[this._currentDisplayIndex]==t){return}this._displayList[this._currentDisplayIndex]=t;this._updateSlotDisplay();this.updateChildArmatureAnimation();this._updateTransform()});s.getDisplay=function(){return this.display};s.setDisplay=function(t){this.display=t};a(s,"childArmature",function(){if(this._displayList[this._currentDisplayIndex]instanceof t.Armature){return this._displayList[this._currentDisplayIndex]}return null},function(t){this.display=t});a(s,"zOrder",function(){return this._originZOrder+this._tweenZOrder+this._offsetZOrder},function(t){if(this.zOrder!=t){this._offsetZOrder=t-this._originZOrder-this._tweenZOrder;if(this._armature){this._armature._slotsZOrderChanged=true}}});a(s,"blendMode",function(){return this._blendMode},function(t){if(this._blendMode!=t){this._blendMode=t;this._updateDisplayBlendMode(this._blendMode)}});a(s,"gotoAndPlay",undefined,function(t){if(this._gotoAndPlay!=t){this._gotoAndPlay=t;this.updateChildArmatureAnimation()}});s._updateDisplay=function(t){throw new Error("")};s._getDisplayIndex=function(){throw new Error(egret.getString(4001))};s._addDisplayToContainer=function(t,i){if(i===void 0){i=-1}throw new Error(egret.getString(4001))};s._removeDisplayFromContainer=function(){throw new Error(egret.getString(4001))};s._updateTransform=function(){throw new Error(egret.getString(4001))};s._updateDisplayVisible=function(t){throw new Error(egret.getString(4001))};s._updateFFD=function(t,i){this._ffdChanged=true;this._ffdVertices=t;this._ffdOffset=i};s._updateDisplayColor=function(t,i,e,a,n,s,r,o,l){if(l===void 0){l=false}this._colorTransform.alphaOffset=t;this._colorTransform.redOffset=i;this._colorTransform.greenOffset=e;this._colorTransform.blueOffset=a;this._colorTransform.alphaMultiplier=n;this._colorTransform.redMultiplier=s;this._colorTransform.greenMultiplier=r;this._colorTransform.blueMultiplier=o;this._isColorChanged=l};s._updateDisplayBlendMode=function(t){throw new Error("Abstract method needs to be implemented in subclass!")};s._arriveAtFrame=function(t,i,e,a){var n=e.displayControl&&e.containsBoneMask(this.parent.name);if(n){var s=t;var r=s.displayIndex;var o;this._changeDisplay(r);this._updateDisplayVisible(s.visible);if(r>=0){if(!isNaN(s.zOrder)&&s.zOrder!=this._tweenZOrder){this._tweenZOrder=s.zOrder;this._armature._slotsZOrderChanged=true}}if(t.action){if(this.childArmature){this.childArmature.animation.gotoAndPlay(t.action)}}else{this.gotoAndPlay=s.gotoAndPlay}}};s._updateGlobal=function(){this._calculateRelativeParentTransform();t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix);var i=this._calculateParentTransform();if(i){this._globalTransformMatrix.concat(i.parentGlobalTransformMatrix);
t.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,this._global.scaleX*i.parentGlobalTransform.scaleX>=0,this._global.scaleY*i.parentGlobalTransform.scaleY>=0)}return i};s._resetToOrigin=function(){this._changeDisplay(this._originDisplayIndex);this._updateDisplayColor(0,0,0,0,1,1,1,1,true)};s._updateMesh=function(){};return e}(t.DBObject);t.Slot=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this.slotTimelineCacheList=[];this.slotTimelineCacheDic={};this.frameNum=0;this._cahceList=[]}var e=__define,a=i,n=a.prototype;i.initWithAnimationData=function(e,a){var n=new i;n.name=e.name;var s;var r;var o;var l;var h;for(var u=0,f=a.boneDataList.length;u<f;u++){s=a.boneDataList[u].name;for(var _=0,m=a.slotDataList.length;_<m;_++){o=a.slotDataList[_];h=o.name;if(o.parent==s){if(n.slotTimelineCacheDic[h]==null){l=new t.SlotTimelineCache;l.name=h;n.slotTimelineCacheList.push(l);n.slotTimelineCacheDic[h]=l}}}}return n};n.initSlotTimelineCacheDic=function(t,i){var e;for(var a in this.slotTimelineCacheDic){var n=this.slotTimelineCacheDic[a];e=n.name;n.cacheGenerator=t[e];n.currentFrameCache=i[e]}};n.bindCacheUserSlotDic=function(t){for(var i in t){this.slotTimelineCacheDic[i].bindCacheUser(t[i])}};n.addFrame=function(t,i){var e;for(var a=0,n=this.slotTimelineCacheList.length;a<n;a++){e=this.slotTimelineCacheList[a];e.addFrame(t,i)}this._cahceList[t]=true};n.update=function(t){var i=Math.floor(t*(this.frameNum-1));var e;for(var a=0,n=this.slotTimelineCacheList.length;a<n;a++){e=this.slotTimelineCacheList[a];e.update(i)}};return i}();t.AnimationCache=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this.animationCacheDic={};this.slotFrameCacheDic={}}var e=__define,a=i,n=a.prototype;i.initWithArmatureData=function(t,e){if(e===void 0){e=0}var a=new i;a.armatureData=t;if(e<=0){var n=t.animationDataList[0];if(n){a.frameRate=n.frameRate}}else{a.frameRate=e}return a};n.initAllAnimationCache=function(){var i=this.armatureData.animationDataList.length;for(var e=0;e<i;e++){var a=this.armatureData.animationDataList[e];this.animationCacheDic[a.name]=t.AnimationCache.initWithAnimationData(a,this.armatureData)}};n.initAnimationCache=function(i){this.animationCacheDic[i]=t.AnimationCache.initWithAnimationData(this.armatureData.getAnimationData(i),this.armatureData)};n.bindCacheUserArmatures=function(t){var i=t.length;for(var e=0;e<i;e++){var a=t[e];this.bindCacheUserArmature(a)}};n.bindCacheUserArmature=function(t){t.animation.animationCacheManager=this;var i};n.setCacheGeneratorArmature=function(i){this.cacheGeneratorArmature=i;var e;for(var a in i._slotDic){e=i._slotDic[a];this.slotFrameCacheDic[e.name]=new t.SlotFrameCache}for(var n in this.animationCacheDic){var s=this.animationCacheDic[n];s.initSlotTimelineCacheDic(i._slotDic,this.slotFrameCacheDic)}};n.generateAllAnimationCache=function(t){for(var i in this.animationCacheDic){var e=this.animationCacheDic[i];this.generateAnimationCache(e.name,t)}};n.generateAnimationCache=function(t,i){var e=this.cacheGeneratorArmature.enableCache;this.cacheGeneratorArmature.enableCache=false;var a=this.animationCacheDic[t];if(!a){return}var n=this.cacheGeneratorArmature.getAnimation().animationState;var s=1/this.frameRate;if(i){this.cacheGeneratorArmature.getAnimation().gotoAndPlay(t,0,-1,0)}else{this.cacheGeneratorArmature.getAnimation().gotoAndPlay(t,0,-1,1)}var r=this.cacheGeneratorArmature.enableEventDispatch;this.cacheGeneratorArmature.enableEventDispatch=false;var o;do{o=n.progress;this.cacheGeneratorArmature.advanceTime(s)}while(n.progress>=o&&n.progress<1);this.cacheGeneratorArmature.enableEventDispatch=r;this.resetCacheGeneratorArmature();this.cacheGeneratorArmature.enableCache=e};n.resetCacheGeneratorArmature=function(){this.cacheGeneratorArmature.resetAnimation()};n.getAnimationCache=function(t){return this.animationCacheDic[t]};return i}();t.AnimationCacheManager=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this.globalTransform=new t.DBTransform;this.globalTransformMatrix=new t.Matrix}var e=__define,a=i,n=a.prototype;n.copy=function(t){this.globalTransform=t.globalTransform;this.globalTransformMatrix=t.globalTransformMatrix};n.clear=function(){this.globalTransform=i.ORIGIN_TRAMSFORM;this.globalTransformMatrix=i.ORIGIN_MATRIX};i.ORIGIN_TRAMSFORM=new t.DBTransform;i.ORIGIN_MATRIX=new t.Matrix;return i}();t.FrameCache=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(){t.call(this);this.displayIndex=-1}var e=__define,a=i,n=a.prototype;n.copy=function(i){t.prototype.copy.call(this,i);this.colorTransform=i.colorTransform;this.displayIndex=i.displayIndex;this.gotoAndPlay=i.gotoAndPlay};n.clear=function(){t.prototype.clear.call(this);this.colorTransform=null;this.displayIndex=-1;this.gotoAndPlay=null};return i}(t.FrameCache);t.SlotFrameCache=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this.frameCacheList=new Array}var i=__define,e=t,a=e.prototype;a.addFrame=function(t,i){};a.update=function(t){if(t===void 0){t=0}this.currentFrameCache.copy(this.frameCacheList[t])};a.bindCacheUser=function(t){t.frameCache=this.currentFrameCache};return t}();t.TimelineCache=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(){i.call(this)}var a=__define,n=e,s=n.prototype;s.addFrame=function(i,e){var a=new t.SlotFrameCache;var n=e.getSlot(this.name);if(n.global!=n._globalBackup){a.globalTransform=n.global;a.globalTransformMatrix=n.globalTransformMatrix}else{a.globalTransform.copy(n.global);a.globalTransformMatrix.copyFrom(n.globalTransformMatrix)}if(n.colorChanged){a.colorTransform=t.ColorTransformUtil.cloneColor(n.colorTransform)}a.displayIndex=n.displayIndex;a.gotoAndPlay=n.gotoAndPlay;this.frameCacheList[i]=a};return e}(t.TimelineCache);t.SlotTimelineCache=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){function i(t,i,e){if(i===void 0){i=false}if(e===void 0){e=false}this.bubbles=i;this.cancelable=e;this.type=t}var e=__define,a=i;p=a.prototype;return i}();t.Event=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(i,e){if(e===void 0){e=false}t.call(this,i)}var e=__define,a=i,n=a.prototype;e(i,"MOVEMENT_CHANGE",function(){return i.FADE_IN});e(n,"movementID",function(){return this.animationName});e(n,"armature",function(){return this.target});e(n,"animationName",function(){return this.animationState.name});i.FADE_IN="fadeIn";i.FADE_OUT="fadeOut";i.START="start";i.COMPLETE="complete";i.LOOP_COMPLETE="loopComplete";i.FADE_IN_COMPLETE="fadeInComplete";i.FADE_OUT_COMPLETE="fadeOutComplete";return i}(t.Event);t.AnimationEvent=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(i){t.call(this,i)}var e=__define,a=i,n=a.prototype;i.Z_ORDER_UPDATED="zOrderUpdated";return i}(t.Event);t.ArmatureEvent=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(i,e){if(e===void 0){e=false}t.call(this,i)}var e=__define,a=i,n=a.prototype;e(i,"MOVEMENT_FRAME_EVENT",function(){return i.ANIMATION_FRAME_EVENT});e(n,"armature",function(){return this.target});i.ANIMATION_FRAME_EVENT="animationFrameEvent";i.BONE_FRAME_EVENT="boneFrameEvent";return i}(t.Event);t.FrameEvent=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(i,e){if(e===void 0){e=false}t.call(this,i)}var e=__define,a=i,n=a.prototype;i.SOUND="sound";return i}(t.Event);t.SoundEvent=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(a,i);function a(){i.call(this);this.dragonBonesDataDic={};this.textureAtlasDic={}}var n=__define,s=a,r=s.prototype;r.dispose=function(t){if(t===void 0){t=true}if(t){for(var i in this.dragonBonesDataDic){this.dragonBonesDataDic[i].dispose();delete this.dragonBonesDataDic[i]}for(var e in this.textureAtlasDic){var a=this.textureAtlasDic[e];if(a){for(var n=0,s=a.length;n<s;n++){a[n].dispose()}}delete this.textureAtlasDic[e]}}this.dragonBonesDataDic=null;this.textureAtlasDic=null};r.getDragonBonesData=function(t){return this.dragonBonesDataDic[t]};r.getSkeletonData=function(t){return this.getDragonBonesData(t)};r.addDragonBonesData=function(t,i){if(i===void 0){i=null}if(!t){throw new Error}i=i||t.name;if(!i){throw new Error(egret.getString(4002))}this.dragonBonesDataDic[i]=t};r.addSkeletonData=function(t,i){if(i===void 0){i=null}this.addDragonBonesData(t,i)};r.removeDragonBonesData=function(t){delete this.dragonBonesDataDic[t]};r.removeSkeletonData=function(t){delete this.dragonBonesDataDic[t]};r.getTextureAtlas=function(t){return this.textureAtlasDic[t]};r.addTextureAtlas=function(t,i){if(i===void 0){i=null}if(!t){throw new Error}if(!i&&t.hasOwnProperty("name")){i=t.name}if(!i){throw new Error(egret.getString(4002))}var e=this.textureAtlasDic[i];if(e==null){e=[];this.textureAtlasDic[i]=e}if(e.indexOf(t)!=-1){return}e.push(t)};r.removeTextureAtlas=function(t){delete this.textureAtlasDic[t]};r.getTextureDisplay=function(t,i,e,a){if(i===void 0){i=null}if(e===void 0){e=NaN}if(a===void 0){a=NaN}var n;var s;var r;var o;if(i){s=this.textureAtlasDic[i];if(s){for(r=0,o=s.length;r<o;r++){n=s[r];if(n.getRegion(t)){break}n=null}}}else{for(i in this.textureAtlasDic){s=this.textureAtlasDic[i];if(s){for(r=0,o=s.length;r<o;r++){n=s[r];if(n.getRegion(t)){break}n=null}if(n!=null){break}}}}if(!n){return null}if(isNaN(e)||isNaN(a)){var l=this.dragonBonesDataDic[i];l=l?l:this.findFirstDragonBonesData();if(l){var h=l.getDisplayDataByName(t);if(h){e=h.pivot.x;a=h.pivot.y}}}return this._generateDisplay(n,t,e,a)};r.getMeshDisplay=function(t,i,e){if(e===void 0){e=null}var a;var n;var s;var r;var o=t.name;if(e){n=this.textureAtlasDic[e];if(n){for(s=0,r=n.length;s<r;s++){a=n[s];if(a.getRegion(o)){break}a=null}}}else{for(e in this.textureAtlasDic){n=this.textureAtlasDic[e];if(n){for(s=0,r=n.length;s<r;s++){a=n[s];if(a.getRegion(o)){break}a=null}if(a!=null){break}}}}if(!a){return null}return this._generateMesh(a,o,t,i)};r.buildArmature=function(t,i,e,a){if(i===void 0){i=null}if(e===void 0){e=null}if(a===void 0){a=null}var n={};this.fillBuildArmatureDataPackageArmatureInfo(t,i,n);if(e==null){e=n.dragonBonesDataName}var s=n.dragonBonesData;var r=n.armatureData;if(!r){return null}return this.buildArmatureUsingArmatureDataFromTextureAtlas(s,r,e,a)};r.buildFastArmature=function(t,i,a,n){if(i===void 0){i=null}if(a===void 0){a=null}if(n===void 0){n=null}var s=new e;this.fillBuildArmatureDataPackageArmatureInfo(t,i,s);if(a==null){a=s.dragonBonesDataName}var r=s.dragonBonesData;var o=s.armatureData;if(!o){return null}return this.buildFastArmatureUsingArmatureDataFromTextureAtlas(r,o,a,n)};r.buildArmatureUsingArmatureDataFromTextureAtlas=function(t,i,e,a){if(a===void 0){a=null}var n=this._generateArmature();n.name=i.name;n.__dragonBonesData=t;n._armatureData=i;n._skewEnable=t.version>=4.5;n.animation.animationDataList=i.animationDataList;this._buildBones(n);n.buildIK();n.updateBoneCache();this._buildSlots(n,a,e);n.advanceTime(0);return n};r.buildFastArmatureUsingArmatureDataFromTextureAtlas=function(t,i,e,a){if(a===void 0){a=null}var n=this._generateFastArmature();n.name=i.name;n.__dragonBonesData=t;n._armatureData=i;n._skewEnable=t.version>=4.5;n.animation.animationDataList=i.animationDataList;this._buildFastBones(n);n.buildIK();n.updateBoneCache();this._buildFastSlots(n,a,e);n.updateSlotsZOrder();n.advanceTime(0);return n};r.copyAnimationsToArmature=function(i,e,a,n){if(a===void 0){a=null}if(n===void 0){n=true}var s={};if(!this.fillBuildArmatureDataPackageArmatureInfo(e,a,s)){return false}var r=s.armatureData;i.animation.animationDataList=r.animationDataList;var o=r.getSkinData("");var l;var h;var u=i.getSlots(false);var f;var _;var m=0;var d;var c;var p=u.length;for(var v=0;v<p;v++){f=u[v];_=f.displayList;m=_.length;for(var g=0;g<m;g++){d=_[g];if(d instanceof t.Armature){c=d;l=o.getSlotData(f.name);h=l.displayDataList[g];if(h.type==t.DisplayData.ARMATURE){this.copyAnimationsToArmature(c,h.name,s.dragonBonesDataName,n)}}}}return true};r.fillBuildArmatureDataPackageArmatureInfo=function(t,i,e){if(i){e.dragonBonesDataName=i;e.dragonBonesData=this.dragonBonesDataDic[i];e.armatureData=e.dragonBonesData.getArmatureDataByName(t);return true}else{for(i in this.dragonBonesDataDic){e.dragonBonesData=this.dragonBonesDataDic[i];e.armatureData=e.dragonBonesData.getArmatureDataByName(t);if(e.armatureData){e.dragonBonesDataName=i;return true}}}return false};r.fillBuildArmatureDataPackageTextureInfo=function(t,i){i.textureAtlas=this.textureAtlasDic[t?t:i.dragonBonesDataName]};r.findFirstDragonBonesData=function(){for(var t in this.dragonBonesDataDic){var i=this.dragonBonesDataDic[t];if(i){return i}}return null};r.findFirstTextureAtlas=function(){for(var t in this.textureAtlasDic){var i=this.textureAtlasDic[t];if(i){return i}}return null};r._buildBones=function(i){var e=i.armatureData.boneDataList;var a;var n;var s;for(var r=0;r<e.length;r++){a=e[r];n=t.Bone.initWithBoneData(a);s=a.parent;if(s&&i.armatureData.getBoneData(s)==null){s=null}i.addBone(n,s,true)}i._updateAnimationAfterBoneListChanged()};r._buildSlots=function(i,e,a){var n=i.armatureData.getSkinData(e);if(!n){return}i.armatureData.setSkinData(e);var s=[];var r=i.armatureData.slotDataList;var o;var l;var h;for(var u=0;u<r.length;u++){o=r[u];h=i.getBone(o.parent);if(!h){continue}l=this._generateSlot();l.initWithSlotData(o);h.addSlot(l);s.length=0;var f=o.displayDataList.length;while(f--){var _=o.displayDataList[f];switch(_.type){case t.DisplayData.ARMATURE:var m=this.buildArmatureUsingArmatureDataFromTextureAtlas(i.__dragonBonesData,i.__dragonBonesData.getArmatureDataByName(_.name),a,e);s[f]=m;break;case t.DisplayData.MESH:s[f]=this.getMeshDisplay(_,l,a);break;case t.DisplayData.IMAGE:default:s[f]=this.getTextureDisplay(_.name,a,_.pivot.x,_.pivot.y);break}}for(var d=0,c=s.length;d<c;d++){var p=s[d];if(!p){continue}if(p instanceof t.Armature){p=p.display}if(p.hasOwnProperty("name")){try{p["name"]=l.name}catch(v){}}}l.displayList=s;l._changeDisplay(o.displayIndex)}};r._buildFastBones=function(i){var e=i.armatureData.boneDataList;var a;var n;for(var s=0;s<e.length;s++){a=e[s];n=t.FastBone.initWithBoneData(a);i.addBone(n,a.parent)}};r._buildFastSlots=function(i,e,a){var n=i.armatureData.getSkinData(e);if(!n){return}i.armatureData.setSkinData(e);var s=i.armatureData.slotDataList;var r=[];var o=[];var l;var h;for(var u=0;u<s.length;u++){r.length=0;o.length=0;l=s[u];h=this._generateFastSlot();h.initWithSlotData(l);var f=l.displayDataList.length;while(f--){var _=l.displayDataList[f];switch(_.type){case t.DisplayData.ARMATURE:var m=this.buildFastArmatureUsingArmatureDataFromTextureAtlas(i.__dragonBonesData,i.__dragonBonesData.getArmatureDataByName(_.name),a,e);r[f]=[_,null];o[f]=m;h.hasChildArmature=true;break;case t.DisplayData.IMAGE:case t.DisplayData.MESH:r[f]=[_,this.getTextureData(_.name,a)];o[f]=h._rawDisplay;break;default:r[f]=[_,null];o[f]=null;break}}var d=o.length;for(var c=0;c<d;c++){var p=o[c];if(!p){continue}if(p instanceof t.FastArmature){p=p.display}if(p.hasOwnProperty("name")){try{p["name"]=h.name}catch(v){}}}i.addSlot(h,l.parent);h.displayDataList=r;h.displayList=o;h.displayIndex=l.displayIndex}};r.getTextureData=function(t,i){var e=null;var a=null;var n=this.textureAtlasDic[i];if(n){for(var s in n){a=n[s];e=a.getTextureData(t);if(e){e.textureAtlas=a;break}}}return e};r._generateArmature=function(){return null};r._generateSlot=function(){return null};r._generateFastArmature=function(){return null};r._generateFastSlot=function(){return null};r._generateDisplay=function(t,i,e,a){return null};r._generateMesh=function(t,i,e,a){return null};a._helpMatrix=new t.Matrix;return a}(t.EventDispatcher);t.BaseFactory=i;var e=function(){function t(){}var i=__define,e=t,a=e.prototype;return t}();t.BuildArmatureDataPackage=e})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(e){i.call(this);this.isCacheManagerExclusive=false;this._cacheFrameIndex=-1;this._boneIKList=[];this._enableEventDispatch=true;this._useCache=true;this._isFrameCached=false;this._display=e;this._animation=new t.FastAnimation(this);this._slotsZOrderChanged=false;this._armatureData=null;this.boneList=[];this._boneDic={};this.slotList=[];this._slotDic={};this.slotHasChildArmatureList=[];this._eventList=[];this._ikList=[];this._delayDispose=false;this._lockDispose=false}var a=__define,n=e,s=n.prototype;s.dispose=function(){this._delayDispose=true;if(!this._animation||this._lockDispose){return}this.userData=null;this._animation.dispose();var t=this.slotList.length;while(t--){this.slotList[t].dispose()}t=this.boneList.length;while(t--){this.boneList[t].dispose()}t=this._ikList.length;while(t--){this._ikList[t].dispose()}this.slotList.length=0;this.boneList.length=0;this._armatureData=null;this._animation=null;this.slotList=null;this.boneList=null;this._eventList=null;this._ikList=null};s.advanceTime=function(t){this._lockDispose=true;this._isFrameCached=false;this._animation.advanceTime(t);var i;var e;var a=0;var n=this._boneIKList.length;var s;var r;if(this._isFrameCached){if(!this._useCache){this._useCache=true}a=this.slotList.length;while(a--){e=this.slotList[a];e.updateByCache(this._cacheFrameIndex)}}else{if(this._useCache){this._useCache=false}for(a=0;a<n;a++){for(s=0,r=this._boneIKList[a].length;s<r;s++){i=this._boneIKList[a][s];if(i.isIKConstraint){var o=this._ikList[a-1];if(o.bones[0].name==i.name){i.update();i.rotationIK=i.global.rotation;if(o.bones.length>1){o.bones[1].update();o.bones[1].rotationIK=o.bones[1].global.rotation}o.compute()}i.adjustGlobalTransformMatrixByIK()}else{i.update();i.rotationIK=i.global.rotation}}}a=this.slotList.length;while(a--){e=this.slotList[a];e._update()}}a=this.slotHasChildArmatureList.length;while(a--){e=this.slotHasChildArmatureList[a];var l=e.childArmature;if(l){l.advanceTime(t)}}if(this._slotsZOrderChanged){this.updateSlotsZOrder()}if(!this._isFrameCached){var h=this._animation.animationState.animationCache;if(h){h.addFrame(this._cacheFrameIndex,this)}}while(this._eventList.length>0){this.dispatchEvent(this._eventList.shift())}this._lockDispose=false;if(this._delayDispose){this.dispose()}};s.enableAnimationCache=function(i,e,a){if(e===void 0){e=null}if(a===void 0){a=true}var n=this._armatureData._cacheManager;if(n){this.enableCache=true;return n}this._armatureData._cacheManager=n=t.AnimationCacheManager.initWithArmatureData(this.armatureData,i);n.initAllAnimationCache();this.enableCache=true;return n};s.getBone=function(t){return this._boneDic[t]};s.getSlot=function(t){return this._slotDic[t]};s.getBoneByDisplay=function(t){var i=this.getSlotByDisplay(t);return i?i.parent:null};s.getSlotByDisplay=function(t){if(t){for(var i=0,e=this.slotList.length;i<e;i++){if(this.slotList[i].display==t){return this.slotList[i]}}}return null};s.getSlots=function(t){if(t===void 0){t=true}return t?this.slotList.concat():this.slotList};s._updateBonesByCache=function(){var t=this.boneList.length;var i;while(t--){i=this.boneList[t];i.update()}};s.addBone=function(t,i){if(i===void 0){i=null}var e;if(i){e=this.getBone(i);e.boneList.push(t)}t.armature=this;t.parentBoneData=e;this.boneList.unshift(t);this._boneDic[t.name]=t};s.addSlot=function(t,i){var e=this.getBone(i);if(e){t.armature=this;t.setParent(e);e.slotList.push(t);t._addDisplayToContainer(this.display);this.slotList.push(t);this._slotDic[t.name]=t;if(t.hasChildArmature){this.slotHasChildArmatureList.push(t)}}else{throw new Error}};s.updateSlotsZOrder=function(){this.slotList.sort(this.sortSlot);var t=this.slotList.length;while(t--){var i=this.slotList[t];i._addDisplayToContainer(this._display)}this._slotsZOrderChanged=false};s.sortBoneList=function(){var i=this.boneList.length;if(i==0){return}var e=[];while(i--){var a=0;var n=this.boneList[i];var s=n;while(s){a++;s=s.parent}e[i]=[a,n]}e.sort(t.ArmatureData.sortBoneDataHelpArrayDescending);i=e.length;while(i--){this.boneList[i]=e[i][1]}e.length=0};s.arriveAtFrame=function(i,e){if(i.event&&this.hasEventListener(t.FrameEvent.ANIMATION_FRAME_EVENT)){var a=new t.FrameEvent(t.FrameEvent.ANIMATION_FRAME_EVENT);a.animationState=e;a.frameLabel=i.event;a.bone=i.bone?this.getBone(i.bone):null;this._addEvent(a)}if(i.action){this.animation.gotoAndPlay(i.action)}};s.invalidUpdate=function(t){if(t===void 0){t=null}if(t){var i=this.getBone(t);if(i){i.invalidUpdate()}}else{var e=this.boneList.length;while(e--){this.boneList[e].invalidUpdate()}}};s.resetAnimation=function(){this.animation.animationState._resetTimelineStateList();var t=this.boneList.length;for(var i=0;i<t;i++){var e=this.boneList[i];e._timelineState=null}this.animation.stop()};s.sortSlot=function(t,i){return t.zOrder<i.zOrder?1:-1};s.getAnimation=function(){return this._animation};a(s,"armatureData",function(){return this._armatureData});a(s,"animation",function(){return this._animation});a(s,"display",function(){return this._display});a(s,"enableCache",function(){return this._enableCache},function(t){this._enableCache=t});a(s,"enableEventDispatch",function(){return this._enableEventDispatch},function(t){this._enableEventDispatch=t});s._addEvent=function(t){if(this._enableEventDispatch){this._eventList.push(t)}};s.getIKs=function(t){if(t===void 0){t=true}return t?this._ikList.concat():this._ikList};s.buildIK=function(){var i;this._ikList.length=0;for(var e=0,a=this._armatureData.ikDataList.length;e<a;e++){i=this._armatureData.ikDataList[e];this._ikList.push(new t.FastIKConstraint(i,this))}};s.updateBoneCache=function(){this.boneList.reverse();var t={};var i=this._ikList.length;var e=i+1;var a;var n;var s;var r;var o;var l;this._boneIKList=[];while(this._boneIKList.length<e){this._boneIKList[this._boneIKList.length]=[]}t[this.boneList[0].name]=0;for(a=0,n=this._ikList.length;a<n;a++){t[this._ikList[a].bones[0].name]=a+1}t:for(a=0,n=this.boneList.length;a<n;a++){o=this.boneList[a];l=o;while(l){if(l.parent==null){t[l.name]=0}if(t.hasOwnProperty(l.name)){this._boneIKList[t[l.name]].push(o);continue t}l=l.parent}}};s.getIKTargetData=function(t){var i=[];var e;for(var a=0,n=this._ikList.length;a<n;a++){e=this._ikList[a];if(t.name==e.target.name){i.push(e)}}return i};return e}(t.EventDispatcher);t.FastArmature=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._globalTransformMatrixBackup=this._globalTransformMatrix=new t.Matrix;this._globalBackup=this._global=new t.DBTransform;this._origin=new t.DBTransform;this._visible=true;this.armature=null;this._parent=null;this.userData=null;this.inheritRotation=true;this.inheritScale=true;this.inheritTranslation=true}var e=__define,a=i,n=a.prototype;n.updateByCache=function(t){this._global=this._frameCache.globalTransform;this._globalTransformMatrix=this._frameCache.globalTransformMatrix};n.switchTransformToBackup=function(){};n.setParent=function(t){this._parent=t};n.dispose=function(){this.userData=null;this._globalTransformMatrix=null;this._global=null;this._origin=null;this.armature=null;this._parent=null};n._calculateParentTransform=function(){if(this.parent&&(this.inheritTranslation||this.inheritRotation||this.inheritScale)){var i=this._parent._global;var e=this._parent._globalTransformMatrix;return t.ParentTransformObject.create().setTo(i,e)}t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix);return null};n._updateGlobal=function(){this._calculateRelativeParentTransform();var i=this._calculateParentTransform();if(i!=null){var e=i.parentGlobalTransformMatrix;var a=i.parentGlobalTransform;var n=this._global.x;var s=this._global.y;this._global.x=e.a*n+e.c*s+e.tx;this._global.y=e.d*s+e.b*n+e.ty;if(this.inheritRotation){this._global.skewX+=a.skewX;this._global.skewY+=a.skewY}if(this.inheritScale){this._global.scaleX*=a.scaleX;this._global.scaleY*=a.scaleY}}t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix);return i};n._calculateRelativeParentTransform=function(){};e(n,"name",function(){return this._name},function(t){this._name=t});e(n,"global",function(){return this._global});e(n,"globalTransformMatrix",function(){return this._globalTransformMatrix});e(n,"origin",function(){return this._origin});e(n,"parent",function(){return this._parent});e(n,"visible",function(){return this._visible},function(t){this._visible=t});e(n,"frameCache",undefined,function(t){this._frameCache=t});i._tempParentGlobalTransform=new t.DBTransform;return i}();t.FastDBObject=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(){i.call(this);this.slotList=[];this.boneList=[];this._needUpdate=0;this.isIKConstraint=false;this.childrenBones=[];this._needUpdate=2;this._tweenPivot=new t.Point}var a=__define,n=e,s=n.prototype;e.initWithBoneData=function(t){var i=new e;i.name=t.name;i.length=t.length;i.inheritRotation=t.inheritRotation;i.inheritScale=t.inheritScale;i.origin.copy(t.transform);return i};s.getBones=function(t){if(t===void 0){t=true}return t?this.boneList.concat():this.boneList};s.getSlots=function(t){if(t===void 0){t=true}return t?this.slotList.concat():this.slotList};s.dispose=function(){i.prototype.dispose.call(this);this._timelineState=null;this._tweenPivot=null};s.invalidUpdate=function(){this._needUpdate=2;this.operationInvalidUpdate(this);var t;var i;for(t=0,i=this.childrenBones.length;t<i;t++){if(this.childrenBones[t]._needUpdate!=2){this.operationInvalidUpdate(this.childrenBones[t]);this.childrenBones[t].invalidUpdate()}}};s.operationInvalidUpdate=function(t){var i=this.armature.getIKTargetData(t);var e;var a;var n;var s;var r;var o;for(e=0,a=i.length;e<a;e++){r=i[e];for(n=0,s=r.bones.length;n<s;n++){o=r.bones[n];if(o._needUpdate!=2){o.invalidUpdate()}}}};s._calculateRelativeParentTransform=function(){this._global.copy(this._origin);if(this._timelineState){this._global.add(this._timelineState._transform)}};s.updateByCache=function(t){i.prototype.updateByCache.call(this,t);this._global=this._frameCache.globalTransform;this._globalTransformMatrix=this._frameCache.globalTransformMatrix};s.update=function(t){if(t===void 0){t=false}this._needUpdate--;if(t||this._needUpdate>0||this._parent&&this._parent._needUpdate>0){this._needUpdate=1}else{return}this.updataLocalTransform();this.updateGlobalTransform()};s.updataLocalTransform=function(){this.blendingTimeline();this._calculateRelativeParentTransform()};s.updateGlobalTransform=function(){var t=this._updateGlobal();if(t){t.release()}};s._updateGlobal=function(){if(!this.armature._skewEnable){return i.prototype._updateGlobal.call(this)}var e=this._calculateParentTransform();if(e!=null&&e.parentGlobalTransformMatrix&&e.parentGlobalTransform){var a=e.parentGlobalTransformMatrix;var n=e.parentGlobalTransform;var s=this._global.scaleX*n.scaleX>0;var r=this._global.scaleY*n.scaleY>0;var o=this._global.rotation;var l=this._global.scaleX;var h=this._global.scaleY;var u=this.parentBoneRotation;this._localTransform=this._global;if(this.inheritScale&&!this.inheritRotation){if(u!=0){this._localTransform=this._localTransform.clone();this._localTransform.rotation-=u}}t.TransformUtil.transformToMatrix(this._localTransform,this._globalTransformMatrix);this._globalTransformMatrix.concat(a);if(this.inheritScale){t.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,s,r)}else{t.TransformUtil.matrixToTransformPosition(this._globalTransformMatrix,this._global);this._global.scaleX=this._localTransform.scaleX;this._global.scaleY=this._localTransform.scaleY;this._global.rotation=this._localTransform.rotation+(this.inheritRotation?u:0);t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix)}}return e};s.adjustGlobalTransformMatrixByIK=function(){if(!this.parent){return}this.updataLocalTransform();this._global.rotation=this.rotationIK-this.parentBoneRotation;this.updateGlobalTransform()};s._hideSlots=function(){var t=this.slotList.length;for(var i=0;i<t;i++){var e=this.slotList[i];e.hideSlots()}};s.blendingTimeline=function(){if(this._timelineState){this._tweenPivot.x=this._timelineState._pivot.x;this._tweenPivot.y=this._timelineState._pivot.y}};s.arriveAtFrame=function(i,e){var a;if(i.event&&this.armature.hasEventListener(t.FrameEvent.BONE_FRAME_EVENT)){var n=new t.FrameEvent(t.FrameEvent.BONE_FRAME_EVENT);n.bone=this;n.animationState=e;n.frameLabel=i.event;this.armature._addEvent(n)}};a(s,"childArmature",function(){var t=this.slot;if(t){return t.childArmature}return null});a(s,"display",function(){var t=this.slot;if(t){return t.display}return null},function(t){var i=this.slot;if(i){i.display=t}});a(s,"visible",undefined,function(t){if(this._visible!=t){this._visible=t;for(var i=0,e=this.armature.slotList.length;i<e;i++){if(this.armature.slotList[i].parent==this){this.armature.slotList[i]._updateDisplayVisible(this._visible)}}}});a(s,"slot",function(){return this.slotList.length>0?this.slotList[0]:null});a(s,"parentBoneRotation",function(){return this.parent?this.parent.rotationIK:0});a(s,"parentBoneData",undefined,function(t){if(this._parent!=t){if(this._parent!=null){var i=this._parent.childrenBones.indexOf(this);if(i>=0){this._parent.childrenBones.splice(i,1)}}this.setParent(t);if(this._parent!=null){var e=this._parent.childrenBones.indexOf(this);if(e<0){this._parent.childrenBones.push(this)}}}});return e}(t.FastDBObject);t.FastBone=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(t,i){this.animationCacheBend=0;this.animationCacheWeight=-1;this.ikdata=t;this.armature=i;this.weight=t.weight;this.bendDirection=t.bendPositive?1:-1;this.bones=[];var e;if(t.chain){e=i.getBone(t.bones).parent;e.isIKConstraint=true;this.bones.push(e)}e=i.getBone(t.bones);e.isIKConstraint=true;this.bones.push(e);this.target=i.getBone(t.target)}var e=__define,a=i,n=a.prototype;n.dispose=function(){};n.compute=function(){switch(this.bones.length){case 1:var t=this.animationCacheWeight>=0?this.animationCacheWeight:this.weight;this.compute1(this.bones[0],this.target,t);break;case 2:var i=this.animationCacheBend!=0?this.animationCacheBend:this.bendDirection;var e=this.animationCacheWeight>=0?this.animationCacheWeight:this.weight;var a=this.compute2(this.bones[0],this.bones[1],this.target.global.x,this.target.global.y,i,e);this.bones[0].rotationIK=this.bones[0].origin.rotation+(a.x-this.bones[0].origin.rotation)*e+this.bones[0].parent.rotationIK;this.bones[1].rotationIK=this.bones[1].origin.rotation+(a.y-this.bones[1].origin.rotation)*e+this.bones[0].rotationIK;break}};n.compute1=function(t,i,e){var a=!t.inheritRotation||t.parent==null?0:t.parent.global.rotation;var n=t.global.rotation;var s=Math.atan2(i.global.y-t.global.y,i.global.x-t.global.x);t.rotationIK=n+(s-n)*e};n.compute2=function(i,e,a,n,s,r){if(r==0){return new t.Point(i.global.rotation,e.global.rotation)}var o=new t.Point;var l=new t.Point(i.global.x,i.global.y);var h=new t.Point(e.global.x,e.global.y);var u=new t.Matrix;t.TransformUtil.transformToMatrix(i.parent.global,u);u.invert();var f=t.TransformUtil.applyMatrixToPoint(new t.Point(a,n),u,true);a=f.x;n=f.y;l=t.TransformUtil.applyMatrixToPoint(l,u,true);h=t.TransformUtil.applyMatrixToPoint(h,u,true);var _=i.origin.scaleX;var m=i.origin.scaleY;var d=e.origin.scaleX;var c=h.x-l.x;var p=h.y-l.y;var v=Math.sqrt(c*c+p*p);var g;var T;var y=1;var D=0;var b=0;if(_<0){_=-_;D=Math.PI;y=-1}else{D=0;y=1}if(m<0){m=-m;y=-y}if(d<0){d=-d;b=Math.PI}else{b=0}s=y*s;t:if(Math.abs(_-m)<=.001){var A=e.length;var w=A*d;a=a-l.x;n=n-l.y;var L=2*v*w;var C=(a*a+n*n-v*v-w*w)/L;if(C<-1)C=-1;else if(C>1)C=1;T=Math.acos(C)*s;var S=v+w*C;var x=w*Math.sin(T);g=Math.atan2(n*S-a*x,a*S+n*x)}else{var M=v;var E=a-l.x;var O=n-l.y;var B=e.length*e.origin.scaleX;var F=_*B;var N=m*B;var I=Math.atan2(O,E);
var P=F*F;var k=N*N;var R=M*M;var V=E*E+O*O;var Y=k*R+P*V-P*k;var X=-2*k*M;var U=k-P;var G=X*X-4*U*Y;if(G>=0){var j=Math.sqrt(G);if(X<0){j=-j}j=-(X+j)/2;var H=j/U;var W=Y/j;var K=Math.abs(H)<Math.abs(W)?H:W;if(K*K<=V){var Z=Math.sqrt(V-K*K)*s;g=I-Math.atan2(Z,K);T=Math.atan2(Z/m,(K-M)/_);break t}}var z=0;var q=Number.MAX_VALUE;var $=0;var J=0;var Q=0;var tt=0;var it=0;var et=0;var at=M+F;var nt=at*at;if(nt>tt){Q=0;tt=nt;it=at}at=M-F;nt=at*at;if(nt<q){z=Math.PI;q=nt;$=at}var st=Math.acos(-F*M/(P-k));at=F*Math.cos(st)+M;var rt=N*Math.sin(st);nt=at*at+rt*rt;if(nt<q){z=st;q=nt;$=at;J=rt}if(nt>tt){Q=st;tt=nt;it=at;et=rt}if(V<=(q+tt)/2){g=I-Math.atan2(J*s,$);T=z*s}else{g=I-Math.atan2(et*s,it);T=Q*s}}var ot=e.origin.x;var lt=e.origin.y*m;var ht=Math.atan2(lt,ot)*y;o.x=g-ht+D;o.y=(T+ht)*y+b;this.normalize(o.x);this.normalize(o.y);return o};n.normalize=function(t){if(t>Math.PI){t-=Math.PI*2}else if(t<-Math.PI){t+=Math.PI*2}};return i}();t.FastIKConstraint=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(e){i.call(this);this.hasChildArmature=false;this._displayIndex=-1;this._rawDisplay=null;this._display=null;this._childArmature=null;this._displayList=[];this._displayDataList=[];this._cacheTimeline=null;this.hasChildArmature=false;this.inheritRotation=true;this.inheritScale=true;this._originZOrder=0;this._tweenZOrder=0;this._offsetZOrder=0;this._colorTransform=new t.ColorTransform;this._isColorChanged=false;this._rawDisplay=e}var a=__define,n=e,s=n.prototype;s.initWithSlotData=function(t){this.name=t.name;this.blendMode=t.blendMode;this._defaultGotoAndPlay=t.gotoAndPlay;this._originZOrder=t.zOrder;this._originDisplayIndex=t.displayIndex};s.dispose=function(){if(!this._displayList){return}i.prototype.dispose.call(this);this._rawDisplay=null;this._display=null;this._childArmature=null;this._displayDataList=null;this._displayList=null};s.updateByCache=function(e){var a=this._cacheTimeline.frameCacheList[e];var n=a.displayIndex;if(n!=this._displayIndex){this._displayIndex=n;this.changeDisplay()}if(this._displayIndex<0){return}if(this._frameCache&&a.globalTransform==this._frameCache.globalTransform){this._frameCache=a}else{this._frameCache=a;i.prototype.updateByCache.call(this,e);this._updateTransform()}var s=this._frameCache.colorTransform;var r=s!=null;if(this._isColorChanged!=r||this._isColorChanged&&r&&!t.ColorTransformUtil.isEqual(this._colorTransform,s)){s=s||t.ColorTransformUtil.originalColor;this._updateDisplayColor(s.alphaOffset,s.redOffset,s.greenOffset,s.blueOffset,s.alphaMultiplier,s.redMultiplier,s.greenMultiplier,s.blueMultiplier,r)}var o=this._frameCache.gotoAndPlay;if(this._gotoAndPlay!=o){this._gotoAndPlay=o;this.updateChildArmatureAnimation()}};s._update=function(t){if(t===void 0){t=false}if(this._parent&&(this._parent._needUpdate>0||t)){if(this._global!=this._globalBackup){this._global=this._globalBackup;this._globalTransformMatrix=this._globalTransformMatrixBackup}var i=this._updateGlobal();if(i){i.release()}this._updateTransform()}};s._calculateRelativeParentTransform=function(){this._global.copy(this._origin);this._global.x+=this._parent._tweenPivot.x;this._global.y+=this._parent._tweenPivot.y};s.updateChildArmatureAnimation=function(){if(this.childArmature){if(this._displayIndex>=0){var t=this._gotoAndPlay;if(t==null){t=this._defaultGotoAndPlay;if(t==null){this.childArmature.armatureData.defaultAnimation}}if(t==null){if(this.armature&&this.armature.animation.lastAnimationState){t=this.armature.animation.lastAnimationState.name}}if(t&&this.childArmature.animation.hasAnimation(t)){this.childArmature.animation.gotoAndPlay(t)}else{this.childArmature.animation.play()}}else{this.childArmature.animation.stop();this.childArmature.animation._lastAnimationState=null}}};s.changeDisplay=function(){var i=this._display;var e=this._childArmature;if(this._displayIndex<0||this._displayIndex>=this._displayList.length){this._display=this._rawDisplay}else{this._display=this._displayList[this._displayIndex]}if(this._display instanceof t.FastArmature){this._childArmature=this._display;this._display=this._display.display}else{this._childArmature=null;if(!this._display){this._display=this._rawDisplay}}if(this._childArmature!=e){if(this._childArmature){this._childArmature.animation.play()}else{}}if(this._display!=i){this._updateDisplay(this._display);if(this.armature){if(i){this._replaceDisplay(i)}else{this._addDisplay()}}}if(this._display==this._rawDisplay){this._updateFrame()}if(this._display!=i){this._updateDisplayBlendMode(this._blendMode);this._updateDisplayColor(this._colorTransform.alphaOffset,this._colorTransform.redOffset,this._colorTransform.greenOffset,this._colorTransform.blueOffset,this._colorTransform.alphaMultiplier,this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier)}if(this._displayIndex>=0&&this._displayIndex<this._displayDataList.length){this._origin.copy(this._displayDataList[this._displayIndex][0].transform)}if(this.armature&&!this.armature._isFrameCached){this._update(true)}};a(s,"visible",undefined,function(t){if(this._visible!=t){this._visible=t;this._updateDisplayVisible(this._visible)}});a(s,"displayIndex",function(){return this._displayIndex},function(t){if(this._displayIndex==t){return}this._displayIndex=t;this.changeDisplay()});a(s,"display",function(){return this._display},function(t){var i=this._displayList.length;if(this._displayIndex>=i){if(i==0){this._displayList[0]=t}else{this._displayList[i-1]=t}}else{this._displayList[this._displayIndex]=t}if(this._displayIndex>=0){this.changeDisplay()}});a(s,"childArmature",function(){return this._childArmature},function(t){if(this._childArmature==t){return}this.display=t});a(s,"displayDataList",function(){return this._displayDataList},function(t){if(this._displayDataList!=t){if(t&&t.length){this._displayDataList.length=t.length;for(var i=0,e=this._displayDataList.length;i<e;++i){this._displayDataList[i]=t[i]}}else{this._displayDataList.length=0}}});a(s,"displayList",function(){return this._displayList},function(t){if(this._displayList!=t){if(t&&t.length){this._displayList.length=t.length;for(var i=0,e=this._displayList.length;i<e;++i){this._displayList[i]=t[i]}}else{this._displayList.length=0}}this.changeDisplay()});a(s,"zOrder",function(){return this._originZOrder+this._tweenZOrder+this._offsetZOrder},function(t){if(this.zOrder!=t){this._offsetZOrder=t-this._originZOrder-this._tweenZOrder;if(this.armature){this.armature._slotsZOrderChanged=true}}});a(s,"blendMode",function(){return this._blendMode},function(t){if(this._blendMode!=t){this._blendMode=t;this._updateDisplayBlendMode(this._blendMode)}});a(s,"gotoAndPlay",function(){return this._gotoAndPlay},function(t){if(this._gotoAndPlay!=t){this._gotoAndPlay=t;this.updateChildArmatureAnimation()}});a(s,"colorTransform",function(){return this._colorTransform});a(s,"colorChanged",function(){return this._isColorChanged});s._updateDisplay=function(t){throw new Error("Abstract method needs to be implemented in subclass!")};s._addDisplay=function(){throw new Error("Abstract method needs to be implemented in subclass!")};s._replaceDisplay=function(t){throw new Error("Abstract method needs to be implemented in subclass!")};s._removeDisplay=function(){throw new Error("Abstract method needs to be implemented in subclass!")};s._getDisplayIndex=function(){throw new Error("Abstract method needs to be implemented in subclass!")};s._addDisplayToContainer=function(t,i){if(i===void 0){i=-1}throw new Error("Abstract method needs to be implemented in subclass!")};s._removeDisplayFromContainer=function(){throw new Error("Abstract method needs to be implemented in subclass!")};s._updateTransform=function(){throw new Error("Abstract method needs to be implemented in subclass!")};s._updateFrame=function(){throw new Error("Abstract method needs to be implemented in subclass!")};s._updateDisplayVisible=function(t){throw new Error("Abstract method needs to be implemented in subclass!")};s._updateDisplayColor=function(t,i,e,a,n,s,r,o,l){if(l===void 0){l=false}this._colorTransform.alphaOffset=t;this._colorTransform.redOffset=i;this._colorTransform.greenOffset=e;this._colorTransform.blueOffset=a;this._colorTransform.alphaMultiplier=n;this._colorTransform.redMultiplier=s;this._colorTransform.greenMultiplier=r;this._colorTransform.blueMultiplier=o;this._isColorChanged=l};s._updateDisplayBlendMode=function(t){throw new Error("Abstract method needs to be implemented in subclass!")};s._arriveAtFrame=function(t,i){var e=t;this.displayIndex=e.displayIndex;this._updateDisplayVisible(e.visible);if(this._displayIndex>=0){if(!isNaN(e.zOrder)&&e.zOrder!=this._tweenZOrder){this._tweenZOrder=e.zOrder;this.armature._slotsZOrderChanged=true}}if(t.action){var a=this.childArmature;if(a){a.getAnimation().gotoAndPlay(t.action)}}else if(e.gotoAndPlay){this.gotoAndPlay=e.gotoAndPlay}};s.hideSlots=function(){this.displayIndex=-1};s._updateGlobal=function(){this._calculateRelativeParentTransform();t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix);var i=this._calculateParentTransform();if(i){this._globalTransformMatrix.concat(i.parentGlobalTransformMatrix);t.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,this._global.scaleX*i.parentGlobalTransform.scaleX>=0,this._global.scaleY*i.parentGlobalTransform.scaleY>=0)}return i};s._resetToOrigin=function(){this.displayIndex=this._originDisplayIndex;this._updateDisplayColor(0,0,0,0,1,1,1,1,true)};return e}(t.FastDBObject);t.FastSlot=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(i){this.animationState=new t.FastAnimationState;this._armature=i;this.animationState._armature=i;this.animationList=[];this._animationDataObj={};this._isPlaying=false;this._timeScale=1}var e=__define,a=i,n=a.prototype;n.dispose=function(){if(!this._armature){return}this._armature=null;this._animationDataList=null;this.animationList=null;this.animationState=null};n.gotoAndPlay=function(t,i,e,a){if(i===void 0){i=-1}if(e===void 0){e=-1}if(a===void 0){a=NaN}if(!this._animationDataList){return null}var n=this._animationDataObj[t];if(!n){return null}if(this._armature.enableCache){this.animationCacheManager=this._armature._armatureData._cacheManager;var s=this.animationCacheManager.getAnimationCache(t);s.frameNum=Math.ceil(n.duration*.001*this.animationCacheManager.frameRate/n.scale);this.animationState.animationCache=s;l=this._armature.slotList.length;while(l--){var r=this._armature.slotList[l];r._cacheTimeline=s.slotTimelineCacheDic[r.name]}}this._isPlaying=true;i=0;var o;if(e<0){o=n.scale<0?1:n.scale}else{o=e*1e3/n.duration}a=isNaN(a)?n.playTimes:a;this.animationState._fadeIn(n,a,1/o,i);var l=this._armature.slotHasChildArmatureList.length;while(l--){var r=this._armature.slotHasChildArmatureList[l];var h=r.childArmature;if(h){h.getAnimation().gotoAndPlay(t)}}return this.animationState};n.gotoAndStop=function(t,i,e,a,n){if(e===void 0){e=-1}if(a===void 0){a=0}if(n===void 0){n=-1}if(this.animationState.name!=t){this.gotoAndPlay(t,a,n)}if(e>=0){this.animationState.setCurrentTime(this.animationState.totalTime*e)}else{this.animationState.setCurrentTime(i)}this.animationState.stop();return this.animationState};n.play=function(){if(!this._animationDataList){return}if(!this.animationState.name){this.gotoAndPlay(this._animationDataList[0].name)}else if(!this._isPlaying){this._isPlaying=true}else{this.gotoAndPlay(this.animationState.name)}};n.stop=function(){this._isPlaying=false};n.advanceTime=function(t){if(!this._isPlaying){return}this.animationState._advanceTime(t*this._timeScale)};n.hasAnimation=function(t){return this._animationDataObj[t]!=null};e(n,"timeScale",function(){return this._timeScale},function(t){if(isNaN(t)||t<0){t=1}this._timeScale=t});e(n,"animationDataList",function(){return this._animationDataList},function(t){this._animationDataList=t;this.animationList.length=0;var i=this._animationDataList.length;for(var e=0;e<i;e++){var a=this._animationDataList[e];this.animationList.push(a.name);this._animationDataObj[a.name]=a}});e(n,"movementList",function(){return this.animationList});e(n,"movementID",function(){return this.lastAnimationName});n.isPlaying=function(){return this._isPlaying&&!this.isComplete};e(n,"isComplete",function(){return this.animationState.isComplete});e(n,"lastAnimationState",function(){return this.animationState});e(n,"lastAnimationName",function(){return this.animationState?this.animationState.name:null});return i}();t.FastAnimation=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._boneTimelineStateList=[];this._slotTimelineStateList=[];this._currentFrameIndex=0;this._currentFramePosition=0;this._currentFrameDuration=0;this._currentPlayTimes=0;this._totalTime=0;this._currentTime=0;this._lastTime=0;this._playTimes=0;this._fading=false}var e=__define,a=i,n=a.prototype;n.dispose=function(){this._resetTimelineStateList();this._armature=null};n.play=function(){this._isPlaying=true;return this};n.stop=function(){this._isPlaying=false;return this};n.setCurrentTime=function(t){if(t<0||isNaN(t)){t=0}this._time=t;this._currentTime=this._time*1e3;return this};n._resetTimelineStateList=function(){var i=this._boneTimelineStateList.length;while(i--){t.FastBoneTimelineState.returnObject(this._boneTimelineStateList[i])}this._boneTimelineStateList.length=0;i=this._slotTimelineStateList.length;while(i--){t.FastSlotTimelineState.returnObject(this._slotTimelineStateList[i])}this._slotTimelineStateList.length=0;this.name=null};n._fadeIn=function(t,i,e,a){this.animationData=t;this.name=this.animationData.name;this._totalTime=this.animationData.duration;this.autoTween=t.autoTween;this.setTimeScale(e);this.setPlayTimes(i);this._isComplete=false;this._currentFrameIndex=-1;this._currentPlayTimes=-1;if(Math.round(this._totalTime*this.animationData.frameRate*.001)<2){this._currentTime=this._totalTime}else{this._currentTime=-1}this._fadeTotalTime=a*this._timeScale;this._fading=this._fadeTotalTime>0;this._isPlaying=true;if(this._armature.enableCache&&this.animationCache&&this._fading&&this._boneTimelineStateList){this.updateTransformTimeline(this._progress)}this._time=0;this._progress=0;this._updateTimelineStateList();this.hideBones();return};n._updateTimelineStateList=function(){this._resetTimelineStateList();var i;var e=this.animationData.timelineList.length;for(var a=0;a<e;a++){var n=this.animationData.timelineList[a];i=n.name;var s=this._armature.getBone(i);if(s){var r=t.FastBoneTimelineState.borrowObject();r.fadeIn(s,this,n);this._boneTimelineStateList.push(r)}}var o=this.animationData.slotTimelineList.length;for(var l=0;l<o;l++){var h=this.animationData.slotTimelineList[l];i=h.name;var u=this._armature.getSlot(i);if(u&&u.displayList.length>0){var f=t.FastSlotTimelineState.borrowObject();f.fadeIn(u,this,h);this._slotTimelineStateList.push(f)}}};n._advanceTime=function(t){t*=this._timeScale;if(this._fading){this._time+=t;this._progress=this._time/this._fadeTotalTime;if(this._progress>=1){this._progress=0;this._time=0;this._fading=false}}if(this._fading){var i=this._boneTimelineStateList.length;for(var e=0;e<i;e++){var a=this._boneTimelineStateList[e];a.updateFade(this._progress)}var n=this._slotTimelineStateList.length;for(var s=0;s<n;s++){var r=this._slotTimelineStateList[s];r.updateFade(this._progress)}}else{this.advanceTimelinesTime(t)}};n.advanceTimelinesTime=function(i){if(this._isPlaying){this._time+=i}var e=false;var a=false;var n=false;var s=false;var r=0;var o=this._time*1e3;if(this._playTimes==0||o<this._playTimes*this._totalTime){s=false;this._progress=o/this._totalTime;r=Math.ceil(this._progress)||1;this._progress-=Math.floor(this._progress);o%=this._totalTime}else{r=this._playTimes;o=this._totalTime;s=true;this._progress=1}this._isComplete=s;if(this.animationCache){var l=Math.floor(this._progress*(this.animationCache.frameNum-1));this._armature._cacheFrameIndex=l;this._armature._isFrameCached=this.animationCache._cahceList[l];if(this._armature._isFrameCached){}else{this.updateTransformTimeline(this._progress)}}else{this.updateTransformTimeline(this._progress)}if(this._currentTime!=o){if(this._currentPlayTimes!=r){if(this._currentPlayTimes>0&&r>1){a=true}this._currentPlayTimes=r}if(this._currentTime<0){e=true}if(this._isComplete){n=true}this._lastTime=this._currentTime;this._currentTime=o;this.updateMainTimeline(s)}var h;if(e){if(this._armature.hasEventListener(t.AnimationEvent.START)){h=new t.AnimationEvent(t.AnimationEvent.START);h.animationState=this;this._armature._addEvent(h)}}if(n){if(this._armature.hasEventListener(t.AnimationEvent.COMPLETE)){h=new t.AnimationEvent(t.AnimationEvent.COMPLETE);h.animationState=this;this._armature._addEvent(h)}}else if(a){if(this._armature.hasEventListener(t.AnimationEvent.LOOP_COMPLETE)){h=new t.AnimationEvent(t.AnimationEvent.LOOP_COMPLETE);h.animationState=this;this._armature._addEvent(h)}}};n.updateTransformTimeline=function(t){var i=this._boneTimelineStateList.length;var e;var a;if(this._isComplete){while(i--){e=this._boneTimelineStateList[i];e.update(t);this._isComplete=e._isComplete&&this._isComplete}i=this._slotTimelineStateList.length;while(i--){a=this._slotTimelineStateList[i];a.update(t);this._isComplete=a._isComplete&&this._isComplete}}else{while(i--){e=this._boneTimelineStateList[i];e.update(t)}i=this._slotTimelineStateList.length;while(i--){a=this._slotTimelineStateList[i];a.update(t)}}};n.updateMainTimeline=function(t){var i=this.animationData._frameList;if(i.length>0){var e;var a;for(var n=0,s=i.length;n<s;++n){if(this._currentFrameIndex<0){this._currentFrameIndex=0}else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration||this._currentTime<this._lastTime){this._lastTime=this._currentTime;this._currentFrameIndex++;if(this._currentFrameIndex>=i.length){if(t){this._currentFrameIndex--;break}else{this._currentFrameIndex=0}}}else{break}a=i[this._currentFrameIndex];if(e){this._armature.arriveAtFrame(e,this)}this._currentFrameDuration=a.duration;this._currentFramePosition=a.position;e=a}if(a){this._armature.arriveAtFrame(a,this)}}};n.setTimeScale=function(t){if(isNaN(t)||t==Infinity){t=1}this._timeScale=t;return this};n.setPlayTimes=function(t){if(t===void 0){t=0}if(Math.round(this._totalTime*.001*this.animationData.frameRate)<2){this._playTimes=1}else{this._playTimes=t}return this};e(n,"playTimes",function(){return this._playTimes});e(n,"currentPlayTimes",function(){return this._currentPlayTimes<0?0:this._currentPlayTimes});e(n,"isComplete",function(){return this._isComplete});e(n,"isPlaying",function(){return this._isPlaying&&!this._isComplete});e(n,"totalTime",function(){return this._totalTime*.001});e(n,"currentTime",function(){return this._currentTime<0?0:this._currentTime*.001});n.isUseCache=function(){return this._armature.enableCache&&this.animationCache&&!this._fading};n.hideBones=function(){var t=this.animationData.hideTimelineNameMap.length;for(var i=0;i<t;i++){var e=this.animationData.hideTimelineNameMap[i];var a=this._armature.getBone(e);if(a){a._hideSlots()}}var n;for(i=0,t=this.animationData.hideSlotTimelineNameMap.length;i<t;i++){n=this.animationData.hideSlotTimelineNameMap[i];var s=this._armature.getSlot(n);if(s){s._resetToOrigin()}}};e(n,"progress",function(){return this._progress});return i}();t.FastAnimationState=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._totalTime=0;this._currentTime=0;this._lastTime=0;this._currentFrameIndex=0;this._currentFramePosition=0;this._currentFrameDuration=0;this._updateMode=0;this._transform=new t.DBTransform;this._durationTransform=new t.DBTransform;this._transformToFadein=new t.DBTransform;this._pivot=new t.Point;this._durationPivot=new t.Point}var e=__define,a=i,n=a.prototype;i.borrowObject=function(){if(i._pool.length==0){return new i}return i._pool.pop()};i.returnObject=function(t){if(i._pool.indexOf(t)<0){i._pool[i._pool.length]=t}t.clear()};i.clear=function(){var t=i._pool.length;while(t--){i._pool[t].clear()}i._pool.length=0};n.clear=function(){if(this._bone){this._bone._timelineState=null;this._bone=null}this._animationState=null;this._timelineData=null;this._originPivot=null};n.fadeIn=function(i,e,a){this._bone=i;this._animationState=e;this._timelineData=a;this.name=a.name;this._totalTime=this._timelineData.duration;this._isComplete=false;this._tweenTransform=false;this._currentFrameIndex=-1;this._currentTime=-1;this._tweenEasing=NaN;this._durationPivot.x=0;this._durationPivot.y=0;this._pivot.x=0;this._pivot.y=0;this._originPivot=this._timelineData.originPivot;switch(this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1;break}if(e._fadeTotalTime>0){var n;if(this._bone._timelineState){this._transformToFadein.copy(this._bone._timelineState._transform)}else{this._transformToFadein=new t.DBTransform}var s=this._timelineData.frameList[0];this._durationTransform.copy(s.transform);this._durationTransform.minus(this._transformToFadein)}this._bone._timelineState=this};n.updateFade=function(t){this._transform.x=this._transformToFadein.x+this._durationTransform.x*t;this._transform.y=this._transformToFadein.y+this._durationTransform.y*t;this._transform.scaleX=this._transformToFadein.scaleX*(1+(this._durationTransform.scaleX-1)*t);this._transform.scaleY=this._transformToFadein.scaleX*(1+(this._durationTransform.scaleY-1)*t);this._transform.rotation=this._transformToFadein.rotation+this._durationTransform.rotation*t;this._bone.invalidUpdate()};n.update=function(t){if(this._updateMode==1){this._updateMode=0;this.updateSingleFrame()}else if(this._updateMode==-1){this.updateMultipleFrame(t)}};n.updateSingleFrame=function(){var t=this._timelineData.frameList[0];this._bone.arriveAtFrame(t,this._animationState);this._isComplete=true;this._tweenEasing=NaN;this._tweenTransform=false;this._pivot.x=this._originPivot.x+t.pivot.x;this._pivot.y=this._originPivot.y+t.pivot.y;this._transform.copy(t.transform);this._bone.invalidUpdate()};n.updateMultipleFrame=function(t){var i=0;t/=this._timelineData.scale;t+=this._timelineData.offset;var e=this._totalTime*t;var a=this._animationState.playTimes;if(a==0){this._isComplete=false;i=Math.ceil(Math.abs(e)/this._totalTime)||1;e-=Math.floor(e/this._totalTime)*this._totalTime;if(e<0){e+=this._totalTime}}else{var n=a*this._totalTime;if(e>=n){e=n;this._isComplete=true}else if(e<=-n){e=-n;this._isComplete=true}else{this._isComplete=false}if(e<0){e+=n}i=Math.ceil(e/this._totalTime)||1;if(this._isComplete){e=this._totalTime}else{e-=Math.floor(e/this._totalTime)*this._totalTime}}if(this._currentTime!=e){this._lastTime=this._currentTime;this._currentTime=e;var s=this._timelineData.frameList;var r;var o;for(var l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0){this._currentFrameIndex=0}else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration||this._currentTime<this._lastTime){this._currentFrameIndex++;this._lastTime=this._currentTime;if(this._currentFrameIndex>=s.length){if(this._isComplete){this._currentFrameIndex--;break}else{this._currentFrameIndex=0}}}else{break}o=s[this._currentFrameIndex];if(r){this._bone.arriveAtFrame(r,this._animationState)}this._currentFrameDuration=o.duration;this._currentFramePosition=o.position;r=o}if(o){this._bone.arriveAtFrame(o,this._animationState);this.updateToNextFrame(i)}if(this._tweenTransform){this.updateTween()}}};n.updateToNextFrame=function(i){if(i===void 0){i=0}var e=this._currentFrameIndex+1;if(e>=this._timelineData.frameList.length){e=0}var a=this._timelineData.frameList[this._currentFrameIndex];var n=this._timelineData.frameList[e];var s=false;if(e==0&&(this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+i-this._timelineData.offset)*this._timelineData.scale>.999999)){this._tweenEasing=NaN;s=false}else if(this._animationState.autoTween){this._tweenEasing=this._animationState.animationData.tweenEasing;if(isNaN(this._tweenEasing)){this._tweenEasing=a.tweenEasing;this._tweenCurve=a.curve;if(isNaN(this._tweenEasing)&&this._tweenCurve==null){s=false}else{if(this._tweenEasing==10){this._tweenEasing=0}s=true}}else{s=true}}else{this._tweenEasing=a.tweenEasing;this._tweenCurve=a.curve;if((isNaN(this._tweenEasing)||this._tweenEasing==10)&&this._tweenCurve==null){this._tweenEasing=NaN;s=false}else{s=true}}if(s){this._durationTransform.x=n.transform.x-a.transform.x;this._durationTransform.y=n.transform.y-a.transform.y;this._durationTransform.skewX=n.transform.skewX-a.transform.skewX;this._durationTransform.skewY=n.transform.skewY-a.transform.skewY;this._durationTransform.scaleX=n.transform.scaleX-a.transform.scaleX+n.scaleOffset.x;this._durationTransform.scaleY=n.transform.scaleY-a.transform.scaleY+n.scaleOffset.y;this._durationPivot.x=n.pivot.x-a.pivot.x;this._durationPivot.y=n.pivot.y-a.pivot.y;this._durationTransform.normalizeRotation();if(e==0){this._durationTransform.skewX=t.TransformUtil.formatRadian(this._durationTransform.skewX);this._durationTransform.skewY=t.TransformUtil.formatRadian(this._durationTransform.skewY)}if(this._durationTransform.x||this._durationTransform.y||this._durationTransform.skewX||this._durationTransform.skewY||this._durationTransform.scaleX!=1||this._durationTransform.scaleY!=1||this._durationPivot.x||this._durationPivot.y){this._tweenTransform=true}else{this._tweenTransform=false}}else{this._tweenTransform=false}if(!this._tweenTransform){this._transform.copy(a.transform);this._pivot.x=this._originPivot.x+a.pivot.x;this._pivot.y=this._originPivot.y+a.pivot.y;this._bone.invalidUpdate()}};n.updateTween=function(){var i=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;if(this._tweenCurve){i=this._tweenCurve.getValueByProgress(i)}else if(this._tweenEasing){i=t.MathUtil.getEaseValue(i,this._tweenEasing)}var e=this._timelineData.frameList[this._currentFrameIndex];var a=e.transform;var n=e.pivot;this._transform.x=a.x+this._durationTransform.x*i;this._transform.y=a.y+this._durationTransform.y*i;this._transform.skewX=a.skewX+this._durationTransform.skewX*i;this._transform.skewY=a.skewY+this._durationTransform.skewY*i;this._transform.scaleX=a.scaleX+this._durationTransform.scaleX*i;this._transform.scaleY=a.scaleY+this._durationTransform.scaleY*i;this._pivot.x=n.x+this._durationPivot.x*i;this._pivot.y=n.y+this._durationPivot.y*i;this._bone.invalidUpdate()};i._pool=[];return i}();t.FastBoneTimelineState=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._totalTime=0;this._currentTime=0;this._currentFrameIndex=0;this._currentFramePosition=0;this._currentFrameDuration=0;this._updateMode=0;this._durationColor=new t.ColorTransform}var e=__define,a=i,n=a.prototype;i.borrowObject=function(){if(i._pool.length==0){return new i}return i._pool.pop()};i.returnObject=function(t){if(i._pool.indexOf(t)<0){i._pool[i._pool.length]=t}t.clear()};i.clear=function(){var t=i._pool.length;while(t--){i._pool[t].clear()}i._pool.length=0};n.clear=function(){this._slot=null;this._armature=null;this._animation=null;this._animationState=null;this._timelineData=null};n.fadeIn=function(t,i,e){this._slot=t;this._armature=this._slot.armature;this._animation=this._armature.animation;this._animationState=i;this._timelineData=e;this.name=e.name;this._totalTime=this._timelineData.duration;this._isComplete=false;this._blendEnabled=false;this._tweenColor=false;this._currentFrameIndex=-1;this._currentTime=-1;this._tweenEasing=NaN;this._weight=1;switch(this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1;break}};n.updateFade=function(t){};n.update=function(t){if(this._updateMode==-1){this.updateMultipleFrame(t)}else if(this._updateMode==1){this._updateMode=0;this.updateSingleFrame()}};n.updateMultipleFrame=function(t){var i=0;t/=this._timelineData.scale;t+=this._timelineData.offset;var e=this._totalTime*t;var a=this._animationState.playTimes;if(a==0){this._isComplete=false;i=Math.ceil(Math.abs(e)/this._totalTime)||1;e-=Math.floor(e/this._totalTime)*this._totalTime;if(e<0){e+=this._totalTime}}else{var n=a*this._totalTime;if(e>=n){e=n;this._isComplete=true}else if(e<=-n){e=-n;this._isComplete=true}else{this._isComplete=false}if(e<0){e+=n}i=Math.ceil(e/this._totalTime)||1;if(this._isComplete){e=this._totalTime}else{e-=Math.floor(e/this._totalTime)*this._totalTime}}if(this._currentTime!=e){this._currentTime=e;var s=this._timelineData.frameList;var r;var o;for(var l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0){this._currentFrameIndex=0}else if(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration){this._currentFrameIndex++;if(this._currentFrameIndex>=s.length){if(this._isComplete){this._currentFrameIndex--;break}else{this._currentFrameIndex=0}}}else{break}o=s[this._currentFrameIndex];if(r){this._slot._arriveAtFrame(r,this._animationState)}this._currentFrameDuration=o.duration;this._currentFramePosition=o.position;r=o}if(o){this._slot._arriveAtFrame(o,this._animationState);this._blendEnabled=o.displayIndex>=0;if(this._blendEnabled){this.updateToNextFrame(i)}else{this._tweenEasing=NaN;this._tweenColor=false}}if(this._blendEnabled){this.updateTween()}}};n.updateToNextFrame=function(i){if(i===void 0){i=0}var e=this._currentFrameIndex+1;if(e>=this._timelineData.frameList.length){e=0}var a=this._timelineData.frameList[this._currentFrameIndex];var n=this._timelineData.frameList[e];var s=false;if(e==0&&(this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+i-this._timelineData.offset)*this._timelineData.scale>.999999)){this._tweenEasing=NaN;s=false}else if(a.displayIndex<0||n.displayIndex<0){this._tweenEasing=NaN;s=false}else if(this._animationState.autoTween){this._tweenEasing=this._animationState.animationData.tweenEasing;if(isNaN(this._tweenEasing)){this._tweenEasing=a.tweenEasing;this._tweenCurve=a.curve;if(isNaN(this._tweenEasing)&&this._tweenCurve==null){s=false}else{if(this._tweenEasing==10){this._tweenEasing=0}s=true}}else{s=true}}else{this._tweenEasing=a.tweenEasing;this._tweenCurve=a.curve;if((isNaN(this._tweenEasing)||this._tweenEasing==10)&&this._tweenCurve==null){this._tweenEasing=NaN;s=false}else{s=true}}if(s){if(a.color||n.color){t.ColorTransformUtil.minus(n.color||t.ColorTransformUtil.originalColor,a.color||t.ColorTransformUtil.originalColor,this._durationColor);this._tweenColor=this._durationColor.alphaOffset!=0||this._durationColor.redOffset!=0||this._durationColor.greenOffset!=0||this._durationColor.blueOffset!=0||this._durationColor.alphaMultiplier!=0||this._durationColor.redMultiplier!=0||this._durationColor.greenMultiplier!=0||this._durationColor.blueMultiplier!=0}else{this._tweenColor=false}}else{this._tweenColor=false}if(!this._tweenColor){var r;var o;if(a.color){r=a.color;o=true}else{r=t.ColorTransformUtil.originalColor;o=false}if(this._slot._isColorChanged||o){if(!t.ColorTransformUtil.isEqual(this._slot._colorTransform,r)){this._slot._updateDisplayColor(r.alphaOffset,r.redOffset,r.greenOffset,r.blueOffset,r.alphaMultiplier,r.redMultiplier,r.greenMultiplier,r.blueMultiplier,o)}}}};n.updateTween=function(){var i=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenColor){var e=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;if(this._tweenCurve!=null){e=this._tweenCurve.getValueByProgress(e)}else if(this._tweenEasing){e=t.MathUtil.getEaseValue(e,this._tweenEasing)}if(i.color){this._slot._updateDisplayColor(i.color.alphaOffset+this._durationColor.alphaOffset*e,i.color.redOffset+this._durationColor.redOffset*e,i.color.greenOffset+this._durationColor.greenOffset*e,i.color.blueOffset+this._durationColor.blueOffset*e,i.color.alphaMultiplier+this._durationColor.alphaMultiplier*e,i.color.redMultiplier+this._durationColor.redMultiplier*e,i.color.greenMultiplier+this._durationColor.greenMultiplier*e,i.color.blueMultiplier+this._durationColor.blueMultiplier*e,true);
}else{this._slot._updateDisplayColor(this._durationColor.alphaOffset*e,this._durationColor.redOffset*e,this._durationColor.greenOffset*e,this._durationColor.blueOffset*e,this._durationColor.alphaMultiplier*e+1,this._durationColor.redMultiplier*e+1,this._durationColor.greenMultiplier*e+1,this._durationColor.blueMultiplier*e+1,true)}}};n.updateSingleFrame=function(){var i=this._timelineData.frameList[0];this._slot._arriveAtFrame(i,this._animationState);this._isComplete=true;this._tweenEasing=NaN;this._tweenColor=false;this._blendEnabled=i.displayIndex>=0;if(this._blendEnabled){var e;var a;if(i.color){e=i.color;a=true}else{e=t.ColorTransformUtil.originalColor;a=false}if(this._slot._isColorChanged||a){if(!t.ColorTransformUtil.isEqual(this._slot._colorTransform,e)){this._slot._updateDisplayColor(e.alphaOffset,e.redOffset,e.greenOffset,e.blueOffset,e.alphaMultiplier,e.redMultiplier,e.greenMultiplier,e.blueMultiplier,a)}}}};i.HALF_PI=Math.PI*.5;i.DOUBLE_PI=Math.PI*2;i._pool=[];return i}();t.FastSlotTimelineState=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(t,i){if(t===void 0){t=0}if(i===void 0){i=0}this.x=t;this.y=i}var i=__define,e=t,a=e.prototype;a.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};return t}();t.Point=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(t,i,e,a){if(t===void 0){t=0}if(i===void 0){i=0}if(e===void 0){e=0}if(a===void 0){a=0}this.x=t;this.y=i;this.width=e;this.height=a}var i=__define,e=t,a=e.prototype;return t}();t.Rectangle=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this.duration=0;this._frameList=[];this.duration=0;this.scale=1}var i=__define,e=t,a=e.prototype;a.dispose=function(){var t=this._frameList.length;while(t--){this._frameList[t].dispose()}this._frameList=null};a.addFrame=function(t){if(!t){throw new Error}if(this._frameList.indexOf(t)<0){this._frameList[this._frameList.length]=t}else{throw new Error}};i(a,"frameList",function(){return this._frameList});return t}();t.Timeline=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(){t.call(this);this.frameRate=0;this.playTimes=0;this.lastFrameDuration=0;this.fadeTime=0;this.playTimes=0;this.autoTween=true;this.tweenEasing=NaN;this.hideTimelineNameMap=[];this.hideSlotTimelineNameMap=[];this._timelineList=[];this._slotTimelineList=[];this._ffdTimelineList=[]}var e=__define,a=i,n=a.prototype;e(n,"timelineList",function(){return this._timelineList});e(n,"slotTimelineList",function(){return this._slotTimelineList});e(n,"ffdTimelineList",function(){return this._ffdTimelineList});n.dispose=function(){t.prototype.dispose.call(this);this.hideTimelineNameMap=null;var i=0;var e=0;for(i=0,e=this._timelineList.length;i<e;i++){var a=this._timelineList[i];a.dispose()}this._timelineList=null;for(i=0,e=this._slotTimelineList.length;i<e;i++){var n=this._slotTimelineList[i];n.dispose()}this._slotTimelineList=null};n.getTimeline=function(t){var i=this._timelineList.length;while(i--){if(this._timelineList[i].name==t){return this._timelineList[i]}}return null};n.addTimeline=function(t){if(!t){throw new Error}if(this._timelineList.indexOf(t)<0){this._timelineList[this._timelineList.length]=t}};n.getSlotTimeline=function(t){var i=this._slotTimelineList.length;while(i--){if(this._slotTimelineList[i].name==t){return this._slotTimelineList[i]}}return null};n.addSlotTimeline=function(t){if(!t){throw new Error}if(this._slotTimelineList.indexOf(t)<0){this._slotTimelineList[this._slotTimelineList.length]=t}};n.addFFDTimeline=function(t){if(!t){throw new Error}if(this._ffdTimelineList.indexOf(t)<0){this._ffdTimelineList[this._ffdTimelineList.length]=t}};return i}(t.Timeline);t.AnimationData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this._cacheManager=null;this._boneDataList=[];this._ikDataList=[];this._skinDataList=[];this._slotDataList=[];this._animationDataList=[]}var i=__define,e=t,a=e.prototype;t.sortBoneDataHelpArray=function(t,i){return t[0]>i[0]?1:-1};t.sortBoneDataHelpArrayDescending=function(t,i){return t[0]>i[0]?-1:1};a.setSkinData=function(t){var i=0;var e=this._slotDataList.length;for(i=0;i<e;i++){this._slotDataList[i].dispose()}var a;if(!t&&this._skinDataList.length>0){a=this._skinDataList[0]}else{i=0,e=this._skinDataList.length;for(;i<e;i++){if(this._skinDataList[i].name==t){a=this._skinDataList[i];break}}}if(a){var n;i=0,e=a.slotDataList.length;for(i=0;i<e;i++){n=this.getSlotData(a.slotDataList[i].name);if(n){var s=0;var r=a.slotDataList[i].displayDataList.length;for(s=0;s<r;s++){n.addDisplayData(a.slotDataList[i].displayDataList[s])}}}}};a.dispose=function(){var t=this._boneDataList.length;while(t--){this._boneDataList[t].dispose()}t=this._ikDataList.length;while(t--){this._ikDataList[t].dispose()}t=this._skinDataList.length;while(t--){this._skinDataList[t].dispose()}t=this._slotDataList.length;while(t--){this._slotDataList[t].dispose()}t=this._animationDataList.length;while(t--){this._animationDataList[t].dispose()}this._boneDataList=null;this._ikDataList=null;this._slotDataList=null;this._skinDataList=null;this._animationDataList=null};a.getBoneData=function(t){var i=this._boneDataList.length;while(i--){if(this._boneDataList[i].name==t){return this._boneDataList[i]}}return null};a.getIKData=function(t){var i=this._ikDataList.length;while(i--){if(this._ikDataList[i].name==t){return this._ikDataList[i]}}return null};a.getSlotData=function(t){var i=this._slotDataList.length;while(i--){if(this._slotDataList[i].name==t){return this._slotDataList[i]}}return null};a.getSkinData=function(t){if(!t&&this._skinDataList.length>0){return this._skinDataList[0]}var i=this._skinDataList.length;while(i--){if(this._skinDataList[i].name==t){return this._skinDataList[i]}}return null};a.getAnimationData=function(t){var i=this._animationDataList.length;while(i--){if(this._animationDataList[i].name==t){return this._animationDataList[i]}}return null};a.addBoneData=function(t){if(!t){throw new Error}if(this._boneDataList.indexOf(t)<0){this._boneDataList[this._boneDataList.length]=t}else{throw new Error}};a.addIKData=function(t){if(!t){throw new Error}if(this._ikDataList.indexOf(t)<0){this._ikDataList[this._ikDataList.length]=t}else{throw new Error}};a.addSlotData=function(t){if(!t){throw new Error}if(this._slotDataList.indexOf(t)<0){this._slotDataList[this._slotDataList.length]=t}else{throw new Error}};a.addSkinData=function(t){if(!t){throw new Error}if(this._skinDataList.indexOf(t)<0){this._skinDataList[this._skinDataList.length]=t}else{throw new Error}};a.addAnimationData=function(t){if(!t){throw new Error}if(this._animationDataList.indexOf(t)<0){this._animationDataList[this._animationDataList.length]=t}};a.sortBoneDataList=function(){var i=this._boneDataList.length;if(i==0){return}var e=[];while(i--){var a=this._boneDataList[i];var n=0;var s=a;while(s){n++;s=this.getBoneData(s.parent)}e[i]=[n,a]}e.sort(t.sortBoneDataHelpArray);i=e.length;while(i--){this._boneDataList[i]=e[i][1]}};i(a,"boneDataList",function(){return this._boneDataList});i(a,"ikDataList",function(){return this._ikDataList});i(a,"slotDataList",function(){return this._slotDataList});i(a,"skinDataList",function(){return this._skinDataList});i(a,"animationDataList",function(){return this._animationDataList});return t}();t.ArmatureData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this.length=0;this.global=new t.DBTransform;this.transform=new t.DBTransform;this.inheritRotation=true;this.inheritScale=false}var e=__define,a=i,n=a.prototype;n.dispose=function(){this.global=null;this.transform=null};return i}();t.BoneData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this.alphaMultiplier=1;this.alphaOffset=0;this.blueMultiplier=1;this.blueOffset=0;this.greenMultiplier=1;this.greenOffset=0;this.redMultiplier=1;this.redOffset=0}var i=__define,e=t,a=e.prototype;return t}();t.ColorTransform=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this._dataChanged=false;this._pointList=[];this.sampling=new Array(i.SamplingTimes);for(var e=0;e<i.SamplingTimes-1;e++){this.sampling[e]=new t.Point}}var e=__define,a=i,n=a.prototype;n.getValueByProgress=function(t){if(this._dataChanged){this.refreshSampling()}for(var e=0;e<i.SamplingTimes-1;e++){var a=this.sampling[e];if(a.x>=t){if(e==0){return a.y*t/a.x}else{var n=this.sampling[e-1];return n.y+(a.y-n.y)*(t-n.x)/(a.x-n.x)}}}return a.y+(1-a.y)*(t-a.x)/(1-a.x)};n.refreshSampling=function(){for(var t=0;t<i.SamplingTimes-1;t++){this.bezierCurve(i.SamplingStep*(t+1),this.sampling[t])}this._dataChanged=false};n.bezierCurve=function(t,i){var e=1-t;i.x=3*this.point1.x*t*e*e+3*this.point2.x*t*t*e+Math.pow(t,3);i.y=3*this.point1.y*t*e*e+3*this.point2.y*t*t*e+Math.pow(t,3)};e(n,"pointList",function(){return this._pointList},function(t){this._pointList=t;this._dataChanged=true});n.isCurve=function(){return this.point1.x!=0||this.point1.y!=0||this.point2.x!=1||this.point2.y!=1};e(n,"point1",function(){return this.pointList[0]});e(n,"point2",function(){return this.pointList[1]});i.SamplingTimes=20;i.SamplingStep=.05;return i}();t.CurveData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){this.transform=new t.DBTransform;this.pivot=new t.Point}var e=__define,a=i,n=a.prototype;n.dispose=function(){this.transform=null;this.pivot=null};i.ARMATURE="armature";i.IMAGE="image";i.MESH="mesh";return i}();t.DisplayData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this.version=0;this._armatureDataList=[];this._displayDataDictionary={}}var i=__define,e=t,a=e.prototype;a.dispose=function(){for(var t=0,i=this._armatureDataList.length;t<i;t++){var e=this._armatureDataList[t];e.dispose()}this._armatureDataList=null;this.removeAllDisplayData();this._displayDataDictionary=null};i(a,"armatureDataList",function(){return this._armatureDataList});a.getArmatureDataByName=function(t){var i=this._armatureDataList.length;while(i--){if(this._armatureDataList[i].name==t){return this._armatureDataList[i]}}return null};a.addArmatureData=function(t){if(!t){throw new Error}if(this._armatureDataList.indexOf(t)<0){this._armatureDataList[this._armatureDataList.length]=t}else{throw new Error}};a.removeArmatureData=function(t){var i=this._armatureDataList.indexOf(t);if(i>=0){this._armatureDataList.splice(i,1)}};a.removeArmatureDataByName=function(t){var i=this._armatureDataList.length;while(i--){if(this._armatureDataList[i].name==t){this._armatureDataList.splice(i,1)}}};a.getDisplayDataByName=function(t){return this._displayDataDictionary[t]};a.addDisplayData=function(t){this._displayDataDictionary[t.name]=t};a.removeDisplayDataByName=function(t){delete this._displayDataDictionary[t]};a.removeAllDisplayData=function(){for(var t in this._displayDataDictionary){delete this._displayDataDictionary[t]}};return t}();t.DragonBonesData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this.position=0;this.duration=0;this.position=0;this.duration=0}var i=__define,e=t,a=e.prototype;a.dispose=function(){};return t}();t.Frame=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(){t.call(this)}var e=__define,a=i,n=a.prototype;return i}(t.Frame);t.FFDFrame=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(){t.call(this);this.offset=0}var e=__define,a=i,n=a.prototype;n.dispose=function(){t.prototype.dispose.call(this)};return i}(t.Timeline);t.FFDTimeline=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){}var i=__define,e=t,a=e.prototype;a.constructora=function(){};a.dispose=function(){};return t}();t.IKData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(){i.call(this);this.skinned=false;this.numVertex=0;this.numTriangle=0;this.triangles=[];this.vertices=[];this.vertexBones=[];this.bones=[];this.inverseBindPose=[];this.slotPose=new t.Matrix}var a=__define,n=e,s=n.prototype;s.dispose=function(){i.prototype.dispose.call(this);this.triangles.length=0;this.vertices.length=0;this.vertexBones.length=0;this.bones.length=0;this.inverseBindPose.length=0};return e}(t.DisplayData);t.MeshData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){}var i=__define,e=t,a=e.prototype;a.setTo=function(t,i){this.parentGlobalTransform=t;this.parentGlobalTransformMatrix=i;return this};a.release=function(){t.dispose(this)};t.create=function(){if(t._poolSize>0){t._poolSize--;return t._pool.pop()}return new t};t.dispose=function(i){i.parentGlobalTransform=null;i.parentGlobalTransformMatrix=null;t._pool[t._poolSize++]=i};t._pool=[];t._poolSize=0;return t}();t.ParentTransformObject=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this.hasMesh=false;this._slotDataList=[]}var i=__define,e=t,a=e.prototype;a.dispose=function(){var t=this._slotDataList.length;while(t--){this._slotDataList[t].dispose()}this._slotDataList=null};a.getSlotData=function(t){var i=this._slotDataList.length;while(i--){if(this._slotDataList[i].name==t){return this._slotDataList[i]}}return null};a.addSlotData=function(t){if(!t){throw new Error}if(this._slotDataList.indexOf(t)<0){this._slotDataList[this._slotDataList.length]=t}else{throw new Error}};i(a,"slotDataList",function(){return this._slotDataList});return t}();t.SkinData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this._displayDataList=[];this.zOrder=0}var i=__define,e=t,a=e.prototype;a.dispose=function(){this._displayDataList.length=0};a.addDisplayData=function(t){if(!t){throw new Error}if(this._displayDataList.indexOf(t)<0){this._displayDataList[this._displayDataList.length]=t}else{throw new Error}};a.getDisplayData=function(t){var i=this._displayDataList.length;while(i--){if(this._displayDataList[i].name==t){return this._displayDataList[i]}}return null};i(a,"displayDataList",function(){return this._displayDataList});return t}();t.SlotData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(){t.call(this);this.displayIndex=0;this.tweenEasing=10;this.displayIndex=0;this.visible=true;this.zOrder=NaN}var e=__define,a=i,n=a.prototype;n.dispose=function(){t.prototype.dispose.call(this);this.color=null};return i}(t.Frame);t.SlotFrame=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(){t.call(this);this.offset=0}var e=__define,a=i,n=a.prototype;n.dispose=function(){t.prototype.dispose.call(this)};return i}(t.Timeline);t.SlotTimeline=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(){i.call(this);this.tweenRotate=0;this.displayIndex=0;this.tweenEasing=10;this.tweenRotate=0;this.tweenScale=true;this.displayIndex=0;this.visible=true;this.zOrder=NaN;this.global=new t.DBTransform;this.transform=new t.DBTransform;this.pivot=new t.Point;this.scaleOffset=new t.Point}var a=__define,n=e,s=n.prototype;s.dispose=function(){i.prototype.dispose.call(this);this.global=null;this.transform=null;this.pivot=null;this.scaleOffset=null;this.color=null};return e}(t.Frame);t.TransformFrame=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(i){__extends(e,i);function e(){i.call(this);this.originTransform=new t.DBTransform;this.originTransform.scaleX=1;this.originTransform.scaleY=1;this.originPivot=new t.Point;this.offset=0}var a=__define,n=e,s=n.prototype;s.dispose=function(){i.prototype.dispose.call(this);this.originTransform=null;this.originPivot=null};return e}(t.Timeline);t.TransformTimeline=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){this.indices=[];this.weights=[];this.vertices=[]}var i=__define,e=t,a=e.prototype;return t}();t.VertexBoneData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(t){__extends(i,t);function i(){t.call(this);this.u=0;this.v=0}var e=__define,a=i,n=a.prototype;return i}(t.Point);t.VertexData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){}var e=__define,a=i,n=a.prototype;i.parseDragonBonesData=function(e){if(!e){throw new Error}var a=e[t.ConstValues.A_VERSION];a=a.toString();if(a.toString()!=t.DragonBones.DATA_VERSION&&a.toString()!=t.DragonBones.PARENT_COORDINATE_DATA_VERSION&&a.toString()!="2.3"){throw new Error("Nonsupport version!")}var n=i.getNumber(e,t.ConstValues.A_FRAME_RATE,0)||0;var s=new t.DragonBonesData;s.name=e[t.ConstValues.A_NAME];s.isGlobal=e[t.ConstValues.A_IS_GLOBAL]=="0"?false:true;i.tempDragonBonesData=s;var r=e[t.ConstValues.ARMATURE];for(var o=0,l=r.length;o<l;o++){var h=r[o];s.addArmatureData(i.parseArmatureData(h,n))}i.tempDragonBonesData=null;return s};i.parseArmatureData=function(e,a){var n=new t.ArmatureData;n.name=e[t.ConstValues.A_NAME];var s;var r;var o=e[t.ConstValues.BONE];for(s=0,r=o.length;s<r;s++){var l=o[s];n.addBoneData(i.parseBoneData(l))}var h=e[t.ConstValues.SKIN];for(s=0,r=h.length;s<r;s++){var u=h[s];var f=u[t.ConstValues.SLOT];for(var _=0,m=f.length;_<m;_++){var d=f[_];n.addSlotData(i.parseSlotData(d))}}for(s=0,r=h.length;s<r;s++){var c=h[s];n.addSkinData(i.parseSkinData(c))}if(i.tempDragonBonesData.isGlobal){t.DBDataUtil.transformArmatureData(n)}n.sortBoneDataList();var p=e[t.ConstValues.ANIMATION];for(s=0,r=p.length;s<r;s++){var v=p[s];var g=i.parseAnimationData(v,a);t.DBDataUtil.addHideTimeline(g,n);t.DBDataUtil.transformAnimationData(g,n,i.tempDragonBonesData.isGlobal);n.addAnimationData(g)}return n};i.parseBoneData=function(e){var a=new t.BoneData;a.name=e[t.ConstValues.A_NAME];a.parent=e[t.ConstValues.A_PARENT];a.length=Number(e[t.ConstValues.A_LENGTH])||0;a.inheritRotation=i.getBoolean(e,t.ConstValues.A_INHERIT_ROTATION,true);a.inheritScale=i.getBoolean(e,t.ConstValues.A_INHERIT_SCALE,true);i.parseTransform(e[t.ConstValues.TRANSFORM],a.transform);if(i.tempDragonBonesData.isGlobal){a.global.copy(a.transform)}return a};i.parseSkinData=function(e){var a=new t.SkinData;a.name=e[t.ConstValues.A_NAME];var n=e[t.ConstValues.SLOT];for(var s=0,r=n.length;s<r;s++){var o=n[s];a.addSlotData(i.parseSkinSlotData(o))}return a};i.parseSkinSlotData=function(e){var a=new t.SlotData;a.name=e[t.ConstValues.A_NAME];a.parent=e[t.ConstValues.A_PARENT];a.zOrder=e[t.ConstValues.A_Z_ORDER];a.zOrder=i.getNumber(e,t.ConstValues.A_Z_ORDER,0)||0;a.blendMode=e[t.ConstValues.A_BLENDMODE];var n=e[t.ConstValues.DISPLAY];if(n){for(var s=0,r=n.length;s<r;s++){var o=n[s];a.addDisplayData(i.parseDisplayData(o))}}return a};i.parseSlotData=function(e){var a=new t.SlotData;a.name=e[t.ConstValues.A_NAME];a.parent=e[t.ConstValues.A_PARENT];a.zOrder=e[t.ConstValues.A_Z_ORDER];a.zOrder=i.getNumber(e,t.ConstValues.A_Z_ORDER,0)||0;a.blendMode=e[t.ConstValues.A_BLENDMODE];a.displayIndex=0;return a};i.parseDisplayData=function(e){var a=new t.DisplayData;a.name=e[t.ConstValues.A_NAME];a.type=e[t.ConstValues.A_TYPE];i.parseTransform(e[t.ConstValues.TRANSFORM],a.transform,a.pivot);if(i.tempDragonBonesData!=null){i.tempDragonBonesData.addDisplayData(a)}return a};i.parseAnimationData=function(e,a){var n=new t.AnimationData;n.name=e[t.ConstValues.A_NAME];n.frameRate=a;n.duration=Math.round((i.getNumber(e,t.ConstValues.A_DURATION,1)||1)*1e3/a);n.playTimes=i.getNumber(e,t.ConstValues.A_LOOP,1);n.playTimes=n.playTimes!=NaN?n.playTimes:1;n.fadeTime=i.getNumber(e,t.ConstValues.A_FADE_IN_TIME,0)||0;n.scale=i.getNumber(e,t.ConstValues.A_SCALE,1)||0;n.tweenEasing=i.getNumber(e,t.ConstValues.A_TWEEN_EASING,NaN);n.autoTween=i.getBoolean(e,t.ConstValues.A_AUTO_TWEEN,true);i._currentAnimationData=n;var s=e[t.ConstValues.FRAME];var r=0;var o=0;if(s){for(r=0,o=s.length;r<o;r++){var l=s[r];var h=new t.Frame;i.parseFrame(l,h,a);n.addFrame(h)}}i.parseTimeline(e,n);var u=n.duration;var f=[];var _=[];var m=e[t.ConstValues.TIMELINE];var d;if(m){for(r=0,o=m.length;r<o;r++){var c=m[r];var p=i.parseTransformTimeline(c,n.duration,a);u=Math.min(u,p.frameList[p.frameList.length-1].duration);n.addTimeline(p);var v=i.parseSlotTimeline(c,n.duration,a);n.addSlotTimeline(v);if(n.autoTween&&!d){var g;for(var T=0,y=v.frameList.length;T<y;T++){g=v.frameList[T];if(g&&g.displayIndex<0){d=true;break}}}}var D=n.tweenEasing;if(d){o=n.slotTimelineList.length;for(r=0;r<o;r++){v=n.slotTimelineList[r];p=n.timelineList[r];var b;var A;var w;for(T=0,y=v.frameList.length;T<y;T++){A=v.frameList[T];b=p.frameList[T];w=T==y-1?v.frameList[0]:v.frameList[T+1];if(A.displayIndex<0||w.displayIndex<0){b.tweenEasing=A.tweenEasing=NaN}else if(D==10){b.tweenEasing=A.tweenEasing=0}else if(!isNaN(D)){b.tweenEasing=A.tweenEasing=D}else if(b.tweenEasing==10){b.tweenEasing=0}}}n.autoTween=false}}if(n.frameList.length>0){u=Math.min(u,n.frameList[n.frameList.length-1].duration)}n.lastFrameDuration=u;return n};i.parseSlotTimeline=function(e,a,n){var s=new t.SlotTimeline;s.name=e[t.ConstValues.A_NAME];s.scale=i.getNumber(e,t.ConstValues.A_SCALE,1)||0;s.offset=i.getNumber(e,t.ConstValues.A_OFFSET,0)||0;s.duration=a;var r=e[t.ConstValues.FRAME];for(var o=0,l=r.length;o<l;o++){var h=r[o];var u=i.parseSlotFrame(h,n);s.addFrame(u)}i.parseTimeline(e,s);return s};i.parseSlotFrame=function(e,a){var n=new t.SlotFrame;i.parseFrame(e,n,a);n.visible=!i.getBoolean(e,t.ConstValues.A_HIDE,false);n.tweenEasing=i.getNumber(e,t.ConstValues.A_TWEEN_EASING,10);n.displayIndex=Math.floor(i.getNumber(e,t.ConstValues.A_DISPLAY_INDEX,0)||0);n.zOrder=i.getNumber(e,t.ConstValues.A_Z_ORDER,i.tempDragonBonesData.isGlobal?NaN:0);var s=e[t.ConstValues.COLOR_TRANSFORM];if(s){n.color=new t.ColorTransform;i.parseColorTransform(s,n.color)}return n};i.parseTransformTimeline=function(e,a,n){var s=new t.TransformTimeline;s.name=e[t.ConstValues.A_NAME];s.scale=i.getNumber(e,t.ConstValues.A_SCALE,1)||0;s.offset=i.getNumber(e,t.ConstValues.A_OFFSET,0)||0;s.originPivot.x=i.getNumber(e,t.ConstValues.A_PIVOT_X,0)||0;s.originPivot.y=i.getNumber(e,t.ConstValues.A_PIVOT_Y,0)||0;s.duration=a;var r=false;var o=0;var l=null;var h=e[t.ConstValues.FRAME];var u;for(var f=0,_=h.length;f<_;f++){var m=h[f];if(f<_-1){u=h[f+1]}else if(f!=0){u=h[0]}else{u=null}var d=i.parseTransformFrame(m,u,n);s.addFrame(d);if(d.event||d.sound){if(!r){r=true;i._currentAnimationData.frameList.length=0}if(l){l.duration=o}else if(o!=0){l=new t.Frame;l.bone=s.name;l.duration=o;i._currentAnimationData.addFrame(l)}o=0;l=new t.Frame;l.bone=s.name;i.parseFrame(m,l,n);i._currentAnimationData.addFrame(l)}o+=d.duration}i.parseTimeline(e,s);if(l){i.parseTimeline(null,i._currentAnimationData)}return s};i.parseTransformFrame=function(e,a,n){var s=new t.TransformFrame;i.parseFrame(e,s,n);s.visible=!i.getBoolean(e,t.ConstValues.A_HIDE,false);s.tweenEasing=i.getNumber(e,t.ConstValues.A_TWEEN_EASING,10);s.tweenRotate=Math.floor(i.getNumber(e,t.ConstValues.A_TWEEN_ROTATE,0)||0);s.tweenScale=i.getBoolean(e,t.ConstValues.A_TWEEN_SCALE,true);if(a&&Math.floor(i.getNumber(a,t.ConstValues.A_DISPLAY_INDEX,0)||0)==-1){s.tweenEasing=NaN}i.parseTransform(e[t.ConstValues.TRANSFORM],s.transform,s.pivot);if(i.tempDragonBonesData.isGlobal){s.global.copy(s.transform)}s.scaleOffset.x=i.getNumber(e,t.ConstValues.A_SCALE_X_OFFSET,0)||0;s.scaleOffset.y=i.getNumber(e,t.ConstValues.A_SCALE_Y_OFFSET,0)||0;return s};i.parseTimeline=function(t,i){var e=0;var a;var n=i.frameList;for(var s=0,r=n.length;s<r;s++){a=n[s];a.position=e;e+=a.duration}if(a){a.duration=i.duration-a.position}};i.parseFrame=function(i,e,a){if(a===void 0){a=0}e.duration=Math.round((i[t.ConstValues.A_DURATION]||1)*1e3/a);e.action=i[t.ConstValues.A_ACTION];e.event=i[t.ConstValues.A_EVENT];e.sound=i[t.ConstValues.A_SOUND]};i.parseTransform=function(e,a,n){if(n===void 0){n=null}if(e){if(a){a.x=i.getNumber(e,t.ConstValues.A_X,0)||0;a.y=i.getNumber(e,t.ConstValues.A_Y,0)||0;a.skewX=i.getNumber(e,t.ConstValues.A_SKEW_X,0)*t.ConstValues.ANGLE_TO_RADIAN||0;a.skewY=i.getNumber(e,t.ConstValues.A_SKEW_Y,0)*t.ConstValues.ANGLE_TO_RADIAN||0;a.scaleX=i.getNumber(e,t.ConstValues.A_SCALE_X,1)||0;a.scaleY=i.getNumber(e,t.ConstValues.A_SCALE_Y,1)||0}if(n){n.x=i.getNumber(e,t.ConstValues.A_PIVOT_X,0)||0;n.y=i.getNumber(e,t.ConstValues.A_PIVOT_Y,0)||0}}};i.parseColorTransform=function(e,a){if(e){if(a){a.alphaOffset=i.getNumber(e,t.ConstValues.A_ALPHA_OFFSET,0);a.redOffset=i.getNumber(e,t.ConstValues.A_RED_OFFSET,0);a.greenOffset=i.getNumber(e,t.ConstValues.A_GREEN_OFFSET,0);a.blueOffset=i.getNumber(e,t.ConstValues.A_BLUE_OFFSET,0);a.alphaMultiplier=i.getNumber(e,t.ConstValues.A_ALPHA_MULTIPLIER,100)*.01;a.redMultiplier=i.getNumber(e,t.ConstValues.A_RED_MULTIPLIER,100)*.01;a.greenMultiplier=i.getNumber(e,t.ConstValues.A_GREEN_MULTIPLIER,100)*.01;a.blueMultiplier=i.getNumber(e,t.ConstValues.A_BLUE_MULTIPLIER,100)*.01}}};i.getBoolean=function(t,i,e){if(t&&i in t){switch(String(t[i])){case"0":case"NaN":case"":case"false":case"null":case"undefined":return false;case"1":case"true":default:return true}}return e};i.getNumber=function(t,i,e){if(t&&i in t){switch(String(t[i])){case"NaN":case"":case"false":case"null":case"undefined":return NaN;default:return Number(t[i])}}return e};i._currentAnimationData=null;return i}();t.Data3Parser=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){}var e=__define,a=i,n=a.prototype;i.parseTextureAtlasData=function(e,a){if(a===void 0){a=1}var n={};var s;var r=e[t.ConstValues.SUB_TEXTURE];for(var o=0,l=r.length;o<l;o++){var h=r[o];var u=h[t.ConstValues.A_NAME];var f=new t.Rectangle;f.x=i.getNumber(h,t.ConstValues.A_X,0)/a;f.y=i.getNumber(h,t.ConstValues.A_Y,0)/a;f.width=i.getNumber(h,t.ConstValues.A_WIDTH,0)/a;f.height=i.getNumber(h,t.ConstValues.A_HEIGHT,0)/a;var _=h[t.ConstValues.A_ROTATED]=="true";var m=i.getNumber(h,t.ConstValues.A_FRAME_WIDTH,0)/a;var d=i.getNumber(h,t.ConstValues.A_FRAME_HEIGHT,0)/a;if(m>0&&d>0){s=new t.Rectangle;s.x=i.getNumber(h,t.ConstValues.A_FRAME_X,0)/a;s.y=i.getNumber(h,t.ConstValues.A_FRAME_Y,0)/a;s.width=m;s.height=d}else{s=null}n[u]=new t.TextureData(f,s,_)}return n};i.parseDragonBonesData=function(e){if(!e){throw new Error}var a=e[t.ConstValues.A_VERSION];a=a.toString();if(a.toString()!=t.DragonBones.DATA_VERSION&&a.toString()!=t.DragonBones.DATA_VERSION_4_5&&a.toString()!=t.DragonBones.PARENT_COORDINATE_DATA_VERSION&&a.toString()!="2.3"){throw new Error(egret.getString(4003))}else if(a.toString()==t.DragonBones.PARENT_COORDINATE_DATA_VERSION||a.toString()=="2.3"){return t.Data3Parser.parseDragonBonesData(e)}var n=i.getNumber(e,t.ConstValues.A_FRAME_RATE,0)||0;var s=new t.DragonBonesData;s.name=e[t.ConstValues.A_NAME];s.isGlobal=e[t.ConstValues.A_IS_GLOBAL]=="0"?false:true;s.version=parseFloat(a);i.tempDragonBonesData=s;var r=e[t.ConstValues.ARMATURE];for(var o=0,l=r.length;o<l;o++){var h=r[o];s.addArmatureData(i.parseArmatureData(h,n))}i.tempDragonBonesData=null;return s};i.parseArmatureData=function(e,a){var n=new t.ArmatureData;n.name=e[t.ConstValues.A_NAME];i._armatureData=n;var s=e[t.ConstValues.A_DEFAULT_ACTIONS];if(s&&s.length==1){n.defaultAnimation=s[0][t.ConstValues.A_GOTOANDPLAY]}n.frameRate=e[t.ConstValues.A_FRAME_RATE];if(isNaN(n.frameRate)||n.frameRate<=0){n.frameRate=a}a=n.frameRate;var r=e[t.ConstValues.BONE];var o;var l;i._rawBones.length=0;for(o=0,l=r.length;o<l;o++){var h=r[o];n.addBoneData(i.parseBoneData(h))}var u=e[t.ConstValues.IK];if(u){for(o=0,l=u.length;o<l;o++){var f=u[o];n.addIKData(i.parseIKData(f))}}n.sortBoneDataList();var _=e[t.ConstValues.SLOT];for(o=0,l=_.length;o<l;o++){var m=_[o];n.addSlotData(i.parseSlotData(m))}var d=e[t.ConstValues.SKIN];for(o=0,l=d.length;o<l;o++){var c=d[o];n.addSkinData(i.parseSkinData(c))}if(i.tempDragonBonesData.isGlobal){t.DBDataUtil.transformArmatureData(n)}var p=e[t.ConstValues.ANIMATION];for(o=0,l=p.length;o<l;o++){var v=p[o];var g=i.parseAnimationData(v,a);t.DBDataUtil.addHideTimeline(g,n,true);t.DBDataUtil.transformAnimationData(g,n,i.tempDragonBonesData.isGlobal);n.addAnimationData(g)}return n};i.parseBoneData=function(e){var a=new t.BoneData;i._rawBones.push(a);a.name=e[t.ConstValues.A_NAME];a.parent=e[t.ConstValues.A_PARENT];a.length=Number(e[t.ConstValues.A_LENGTH])||0;a.inheritRotation=i.getBoolean(e,t.ConstValues.A_INHERIT_ROTATION,true);a.inheritScale=i.getBoolean(e,t.ConstValues.A_INHERIT_SCALE,true);i.parseTransform(e[t.ConstValues.TRANSFORM],a.transform);if(i.tempDragonBonesData.isGlobal){a.global.copy(a.transform)}return a};i.parseIKData=function(e){var a=new t.IKData;a.name=e[t.ConstValues.A_NAME];a.target=e[t.ConstValues.A_TARGET];if(e.hasOwnProperty(t.ConstValues.A_WEIGHT)){a.weight=Number(e[t.ConstValues.A_WEIGHT])}else{a.weight=1}a.bendPositive=i.getBoolean(e,t.ConstValues.A_BENDPOSITIVE,true);if(e.hasOwnProperty(t.ConstValues.A_CHAIN)){a.chain=e[t.ConstValues.A_CHAIN]}else{a.chain=0}a.bones=e[t.ConstValues.A_BONES];return a};i.parseSkinData=function(e){var a=new t.SkinData;i._skinData=a;a.name=e[t.ConstValues.A_NAME];var n=e[t.ConstValues.SLOT];for(var s=0,r=n.length;s<r;s++){var o=n[s];a.addSlotData(i.parseSlotDisplayData(o))}return a};i.parseSlotData=function(e){var a=new t.SlotData;a.name=e[t.ConstValues.A_NAME];var n=e[t.ConstValues.A_ACTIONS];if(n&&n.length==1){a.gotoAndPlay=n[0][t.ConstValues.A_GOTOANDPLAY]}a.parent=e[t.ConstValues.A_PARENT];a.zOrder=i.getNumber(e,t.ConstValues.A_Z_ORDER,0)||0;a.displayIndex=i.getNumber(e,t.ConstValues.A_DISPLAY_INDEX,0);a.blendMode=e[t.ConstValues.A_BLENDMODE];return a};i.parseSlotDisplayData=function(e){var a=new t.SlotData;a.name=e[t.ConstValues.A_NAME];a.parent=e[t.ConstValues.A_PARENT];a.zOrder=i.getNumber(e,t.ConstValues.A_Z_ORDER,0)||0;i._skinSlotData=a;i._displayIndex=0;var n=e[t.ConstValues.DISPLAY];if(n){for(var s=0,r=n.length;s<r;s++){var o=n[s];a.addDisplayData(i.parseDisplayData(o));i._displayIndex++}}return a};i.parseDisplayData=function(e){var a=new t.DisplayData;if(e[t.ConstValues.A_TYPE]=="mesh"){a=i.parseMeshData(e)}else{a.name=e[t.ConstValues.A_NAME];a.type=e[t.ConstValues.A_TYPE];i.parseTransform(e[t.ConstValues.TRANSFORM],a.transform,a.pivot);a.pivot.x=NaN;a.pivot.y=NaN;if(i.tempDragonBonesData!=null){i.tempDragonBonesData.addDisplayData(a)}}return a};i.parseMeshData=function(e){var a=new t.MeshData;a.name=e[t.ConstValues.A_NAME];a.type=e[t.ConstValues.A_TYPE];i.parseTransform(e[t.ConstValues.TRANSFORM],a.transform,a.pivot);a.pivot.x=NaN;a.pivot.y=NaN;var n=e.uvs;var s=e.triangles;var r=e.weights;var o=e.vertices;var l=e.bonePose;if(e.slotPose){a.slotPose.a=e.slotPose[0];a.slotPose.b=e.slotPose[1];a.slotPose.c=e.slotPose[2];a.slotPose.d=e.slotPose[3];a.slotPose.tx=e.slotPose[4];a.slotPose.ty=e.slotPose[5]}a.skinned=r&&r.length>0;a.numVertex=n.length/2;a.numTriangle=s.length/3;a.vertices.length=a.numVertex;a.triangles.length=a.numTriangle*3;var h=0;var u=0;var f=0;var _=0;var m=null;var d=null;var c=[];i._skinData.hasMesh=true;if(a.skinned){a.vertexBones.length=a.numVertex;if(l){for(u=0,h=l.length;u<h;u+=7){_=i._armatureData.boneDataList.indexOf(i._rawBones[l[u]]);m=new t.Matrix;m.a=l[u+1];m.b=l[u+2];m.c=l[u+3];m.d=l[u+4];m.tx=l[u+5];m.ty=l[u+6];m.invert();c[_]=m}}}for(u=0,h=n.length;u<h;u+=2){var p=u+1;var v=u*.5;var g=a.vertices[v]=new t.VertexData;g.u=Number(n[u]);g.v=Number(n[p]);g.x=Number(o[u]);g.y=Number(o[p]);if(a.skinned){var T=a.vertexBones[v]=new t.VertexBoneData;a.slotPose.transformPoint(g.x,g.y,g);for(var y=f+1,D=f+1+r[f]*2;y<D;y+=2){d=i._rawBones[r[y]];_=a.bones.indexOf(d);if(_<0){_=a.bones.length;a.bones[_]=d}var b=new t.Point(g.x,g.y);T.indices.push(_);T.weights.push(r[y+1]);T.vertices.push(b);if(a.inverseBindPose.length<=_){a.inverseBindPose.length=_+1}m=a.inverseBindPose[_];if(!m){m=c[i._armatureData.boneDataList.indexOf(d)];
a.inverseBindPose[_]=m}if(m){m.transformPoint(b.x,b.y,b)}f=y+2}}}for(u=0,h=s.length;u<h;++u){a.triangles[u]=s[u]}return a};i.parseAnimationData=function(e,a){var n=new t.AnimationData;n.name=e[t.ConstValues.A_NAME];n.frameRate=a;n.duration=Math.ceil((i.getNumber(e,t.ConstValues.A_DURATION,1)||1)*1e3/a);n.playTimes=i.getNumber(e,t.ConstValues.A_PLAY_TIMES,1);n.playTimes=n.playTimes!=NaN?n.playTimes:1;n.fadeTime=i.getNumber(e,t.ConstValues.A_FADE_IN_TIME,0)||0;n.scale=i.getNumber(e,t.ConstValues.A_SCALE,1)||0;n.tweenEasing=i.getNumber(e,t.ConstValues.A_TWEEN_EASING,NaN);n.autoTween=i.getBoolean(e,t.ConstValues.A_AUTO_TWEEN,true);var s=e[t.ConstValues.FRAME];var r=0;var o=0;if(s){for(r=0,o=s.length;r<o;r++){var l=s[r];var h=i.parseTransformFrame(l,a);n.addFrame(h)}}i.parseTimeline(e,n);var u=n.duration;var f=e[t.ConstValues.BONE];if(f){for(r=0,o=f.length;r<o;r++){var _=f[r];if(_){var m=i.parseTransformTimeline(_,n.duration,a);if(m.frameList.length>0){u=Math.min(u,m.frameList[m.frameList.length-1].duration)}n.addTimeline(m)}}}var d=e[t.ConstValues.SLOT];if(d){for(r=0,o=d.length;r<o;r++){var c=d[r];if(c){var p=i.parseSlotTimeline(c,n.duration,a);if(p.frameList.length>0){u=Math.min(u,p.frameList[p.frameList.length-1].duration);n.addSlotTimeline(p)}}}}var v=e["ffd"];if(v){for(r=0,o=v.length;r<o;r++){var g=v[r];if(g){var T=i.parseFFDTimeline(g,n.duration,a);if(T.frameList.length>0){u=Math.min(u,T.frameList[T.frameList.length-1].duration);n.addFFDTimeline(T)}}}}if(n.frameList.length>0){u=Math.min(u,n.frameList[n.frameList.length-1].duration)}n.lastFrameDuration=u;return n};i.parseTransformTimeline=function(e,a,n){var s=new t.TransformTimeline;s.name=e[t.ConstValues.A_NAME];s.scale=i.getNumber(e,t.ConstValues.A_SCALE,1)||0;s.offset=i.getNumber(e,t.ConstValues.A_OFFSET,0)||0;s.originPivot.x=i.getNumber(e,t.ConstValues.A_PIVOT_X,0)||0;s.originPivot.y=i.getNumber(e,t.ConstValues.A_PIVOT_Y,0)||0;s.duration=a;var r=e[t.ConstValues.FRAME];for(var o=0,l=r.length;o<l;o++){var h=r[o];var u=i.parseTransformFrame(h,n);s.addFrame(u)}i.parseTimeline(e,s);return s};i.parseSlotTimeline=function(e,a,n){var s=new t.SlotTimeline;s.name=e[t.ConstValues.A_NAME];s.scale=i.getNumber(e,t.ConstValues.A_SCALE,1)||0;s.offset=i.getNumber(e,t.ConstValues.A_OFFSET,0)||0;s.duration=a;var r=e[t.ConstValues.FRAME];for(var o=0,l=r.length;o<l;o++){var h=r[o];var u=i.parseSlotFrame(h,n);s.addFrame(u)}i.parseTimeline(e,s);return s};i.parseFFDTimeline=function(e,a,n){var s=new t.FFDTimeline;s.skin=e[t.ConstValues.SKIN];s.name=e[t.ConstValues.SLOT];var r=i._armatureData.getSkinData(s.skin);var o=r.getSlotData(s.name);var l=o.getDisplayData(e[t.ConstValues.A_NAME]);s.displayIndex=o.displayDataList.indexOf(l);s.scale=i.getNumber(e,t.ConstValues.A_SCALE,1)||0;s.offset=i.getNumber(e,t.ConstValues.A_OFFSET,0)||0;s.duration=a;var h=new t.Point;var u=new t.Point;var f=e[t.ConstValues.FRAME];for(var _=0,m=f.length;_<m;_++){var d=f[_];var c=i.parseFFDFrame(d,n);if(l.skinned){var p=[];for(var v=0,g=l.vertices.length;v<g;++v){var T=l.vertexBones[v];if(v*2<c.offset||v*2-c.offset>=c.vertices.length){l.slotPose.transformPoint(0,0,h,true)}else{l.slotPose.transformPoint(c.vertices[v*2-c.offset],c.vertices[v*2+1-c.offset],h,true)}for(var y=0,D=T.indices.length;y<D;++y){var b=T.indices[y];l.inverseBindPose[b].transformPoint(h.x,h.y,u,true);p.push(u.x,u.y)}}c.offset=0;c.vertices=p}s.addFrame(c)}i.parseTimeline(e,s);return s};i.parseTransformFrame=function(e,a){var n=new t.TransformFrame;i.parseFrame(e,n,a);n.visible=!i.getBoolean(e,t.ConstValues.A_HIDE,false);n.tweenEasing=i.getNumber(e,t.ConstValues.A_TWEEN_EASING,10);n.tweenRotate=Math.floor(i.getNumber(e,t.ConstValues.A_TWEEN_ROTATE,0)||0);n.tweenScale=i.getBoolean(e,t.ConstValues.A_TWEEN_SCALE,true);n.displayIndex=Math.floor(i.getNumber(e,t.ConstValues.A_DISPLAY_INDEX,0)||0);i.parseTransform(e[t.ConstValues.TRANSFORM],n.transform,n.pivot);if(i.tempDragonBonesData.isGlobal){n.global.copy(n.transform)}n.scaleOffset.x=i.getNumber(e,t.ConstValues.A_SCALE_X_OFFSET,0)||0;n.scaleOffset.y=i.getNumber(e,t.ConstValues.A_SCALE_Y_OFFSET,0)||0;return n};i.parseSlotFrame=function(e,a){var n=new t.SlotFrame;i.parseFrame(e,n,a);n.visible=!i.getBoolean(e,t.ConstValues.A_HIDE,false);n.tweenEasing=i.getNumber(e,t.ConstValues.A_TWEEN_EASING,10);n.displayIndex=Math.floor(i.getNumber(e,t.ConstValues.A_DISPLAY_INDEX,0)||0);var s=e[t.ConstValues.A_ACTIONS];if(s&&s.length==1){n.gotoAndPlay=s[0][t.ConstValues.A_GOTOANDPLAY]}n.zOrder=i.getNumber(e,t.ConstValues.A_Z_ORDER,i.tempDragonBonesData.isGlobal?NaN:0);var r=e[t.ConstValues.COLOR];if(r){n.color=new t.ColorTransform;i.parseColorTransform(r,n.color)}return n};i.parseFFDFrame=function(e,a){var n=new t.FFDFrame;i.parseFrame(e,n,a);n.tweenEasing=i.getNumber(e,t.ConstValues.A_TWEEN_EASING,10);n.offset=e[t.ConstValues.A_OFFSET]||0;var s=e.vertices;var r=[];if(s){for(var o=0,l=s.length;o<l;o++){r.push(Number(s[o]))}}n.vertices=r;return n};i.parseTimeline=function(t,i){var e=0;var a;var n=i.frameList;for(var s=0,r=n.length;s<r;s++){a=n[s];a.position=e;e+=a.duration}if(a){a.duration=i.duration-a.position}};i.parseFrame=function(i,e,a){if(a===void 0){a=0}e.duration=Math.round((i[t.ConstValues.A_DURATION]||1)*1e3/a);e.action=i[t.ConstValues.A_ACTION];e.event=i[t.ConstValues.A_EVENT];e.sound=i[t.ConstValues.A_SOUND];var n=i[t.ConstValues.A_CURVE];if(n!=null&&n.length==4){e.curve=new t.CurveData;e.curve.pointList=[new t.Point(n[0],n[1]),new t.Point(n[2],n[3])]}};i.parseTransform=function(e,a,n){if(n===void 0){n=null}if(e){if(a){a.x=i.getNumber(e,t.ConstValues.A_X,0)||0;a.y=i.getNumber(e,t.ConstValues.A_Y,0)||0;a.skewX=i.getNumber(e,t.ConstValues.A_SKEW_X,0)*t.ConstValues.ANGLE_TO_RADIAN||0;a.skewY=i.getNumber(e,t.ConstValues.A_SKEW_Y,0)*t.ConstValues.ANGLE_TO_RADIAN||0;a.scaleX=i.getNumber(e,t.ConstValues.A_SCALE_X,1)||0;a.scaleY=i.getNumber(e,t.ConstValues.A_SCALE_Y,1)||0}if(n){n.x=i.getNumber(e,t.ConstValues.A_PIVOT_X,0)||0;n.y=i.getNumber(e,t.ConstValues.A_PIVOT_Y,0)||0}}};i.parseColorTransform=function(e,a){if(a){a.alphaOffset=i.getNumber(e,t.ConstValues.A_ALPHA_OFFSET,0);a.redOffset=i.getNumber(e,t.ConstValues.A_RED_OFFSET,0);a.greenOffset=i.getNumber(e,t.ConstValues.A_GREEN_OFFSET,0);a.blueOffset=i.getNumber(e,t.ConstValues.A_BLUE_OFFSET,0);a.alphaMultiplier=i.getNumber(e,t.ConstValues.A_ALPHA_MULTIPLIER,100)*.01;a.redMultiplier=i.getNumber(e,t.ConstValues.A_RED_MULTIPLIER,100)*.01;a.greenMultiplier=i.getNumber(e,t.ConstValues.A_GREEN_MULTIPLIER,100)*.01;a.blueMultiplier=i.getNumber(e,t.ConstValues.A_BLUE_MULTIPLIER,100)*.01}};i.getBoolean=function(t,i,e){if(t&&i in t){switch(String(t[i])){case"0":case"NaN":case"":case"false":case"null":case"undefined":return false;case"1":case"true":default:return true}}return e};i.getNumber=function(t,i,e){if(t&&i in t){switch(String(t[i])){case"NaN":case"":case"false":case"null":case"undefined":return NaN;default:return Number(t[i])}}return e};i._rawBones=[];i._armatureData=null;i._skinData=null;i._skinSlotData=null;i._meshData=null;i._displayIndex=0;return i}();t.DataParser=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(t,i,e){this.region=t;this.frame=i;this.rotated=e}var i=__define,e=t,a=e.prototype;return t}();t.TextureData=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){}var e=__define,a=i,n=a.prototype;i.cloneColor=function(i){var e=new t.ColorTransform;e.redMultiplier=i.redMultiplier;e.greenMultiplier=i.greenMultiplier;e.blueMultiplier=i.blueMultiplier;e.alphaMultiplier=i.alphaMultiplier;e.redOffset=i.redOffset;e.greenOffset=i.greenOffset;e.blueOffset=i.blueOffset;e.alphaOffset=i.alphaOffset;return e};i.isEqual=function(t,i){return t.alphaOffset==i.alphaOffset&&t.redOffset==i.redOffset&&t.greenOffset==i.greenOffset&&t.blueOffset==i.blueOffset&&t.alphaMultiplier==i.alphaMultiplier&&t.redMultiplier==i.redMultiplier&&t.greenMultiplier==i.greenMultiplier&&t.blueMultiplier==i.blueMultiplier};i.minus=function(t,i,e){e.alphaOffset=t.alphaOffset-i.alphaOffset;e.redOffset=t.redOffset-i.redOffset;e.greenOffset=t.greenOffset-i.greenOffset;e.blueOffset=t.blueOffset-i.blueOffset;e.alphaMultiplier=t.alphaMultiplier-i.alphaMultiplier;e.redMultiplier=t.redMultiplier-i.redMultiplier;e.greenMultiplier=t.greenMultiplier-i.greenMultiplier;e.blueMultiplier=t.blueMultiplier-i.blueMultiplier};i.originalColor=new t.ColorTransform;return i}();t.ColorTransformUtil=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){}var i=__define,e=t,a=e.prototype;t.ANGLE_TO_RADIAN=Math.PI/180;t.RADIAN_TO_ANGLE=180/Math.PI;t.DRAGON_BONES="dragonBones";t.ARMATURE="armature";t.SKIN="skin";t.BONE="bone";t.IK="ik";t.SLOT="slot";t.DISPLAY="display";t.ANIMATION="animation";t.TIMELINE="timeline";t.FRAME="frame";t.TRANSFORM="transform";t.COLOR_TRANSFORM="colorTransform";t.COLOR="color";t.RECTANGLE="rectangle";t.ELLIPSE="ellipse";t.TEXTURE_ATLAS="TextureAtlas";t.SUB_TEXTURE="SubTexture";t.A_ROTATED="rotated";t.A_FRAME_X="frameX";t.A_FRAME_Y="frameY";t.A_FRAME_WIDTH="frameWidth";t.A_FRAME_HEIGHT="frameHeight";t.A_VERSION="version";t.A_IMAGE_PATH="imagePath";t.A_FRAME_RATE="frameRate";t.A_NAME="name";t.A_IS_GLOBAL="isGlobal";t.A_PARENT="parent";t.A_LENGTH="length";t.A_TYPE="type";t.A_FADE_IN_TIME="fadeInTime";t.A_DURATION="duration";t.A_SCALE="scale";t.A_OFFSET="offset";t.A_LOOP="loop";t.A_PLAY_TIMES="playTimes";t.A_EVENT="event";t.A_EVENT_PARAMETERS="eventParameters";t.A_SOUND="sound";t.A_ACTION="action";t.A_HIDE="hide";t.A_AUTO_TWEEN="autoTween";t.A_TWEEN_EASING="tweenEasing";t.A_TWEEN_ROTATE="tweenRotate";t.A_TWEEN_SCALE="tweenScale";t.A_DISPLAY_INDEX="displayIndex";t.A_Z_ORDER="z";t.A_BLENDMODE="blendMode";t.A_WIDTH="width";t.A_HEIGHT="height";t.A_INHERIT_SCALE="inheritScale";t.A_INHERIT_ROTATION="inheritRotation";t.A_X="x";t.A_Y="y";t.A_SKEW_X="skX";t.A_SKEW_Y="skY";t.A_SCALE_X="scX";t.A_SCALE_Y="scY";t.A_PIVOT_X="pX";t.A_PIVOT_Y="pY";t.A_ALPHA_OFFSET="aO";t.A_RED_OFFSET="rO";t.A_GREEN_OFFSET="gO";t.A_BLUE_OFFSET="bO";t.A_ALPHA_MULTIPLIER="aM";t.A_RED_MULTIPLIER="rM";t.A_GREEN_MULTIPLIER="gM";t.A_BLUE_MULTIPLIER="bM";t.A_CURVE="curve";t.A_SCALE_X_OFFSET="scXOffset";t.A_SCALE_Y_OFFSET="scYOffset";t.A_SCALE_MODE="scaleMode";t.A_FIXED_ROTATION="fixedRotation";t.A_DEFAULT_ACTIONS="defaultActions";t.A_ACTIONS="actions";t.A_GOTOANDPLAY="gotoAndPlay";t.A_TARGET="target";t.A_WEIGHT="weight";t.A_BONES="bone";t.A_BENDPOSITIVE="bendPositive";t.A_CHAIN="chain";return t}();t.ConstValues=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function i(){}var e=__define,a=i,n=a.prototype;i.transformArmatureData=function(i){var e=i.boneDataList;var a=e.length;while(a--){var n=e[a];if(n.parent){var s=i.getBoneData(n.parent);if(s){n.transform.copy(n.global);t.TransformUtil.globalToLocal(n.transform,s.global)}}}};i.transformArmatureDataAnimations=function(t){var e=t.animationDataList;var a=e.length;while(a--){i.transformAnimationData(e[a],t,false)}};i.transformRelativeAnimationData=function(t,i){};i.transformAnimationData=function(e,a,n){if(!n){i.transformRelativeAnimationData(e,a);return}var s=a.getSkinData(null);var r=a.boneDataList;var o;if(s){o=s.slotDataList}for(var l=0;l<r.length;l++){var h=r[l];var u=e.getTimeline(h.name);var f=e.getSlotTimeline(h.name);if(!u&&!f){continue}var _=null;if(o){for(var m=0,d=o.length;m<d;m++){_=o[m];if(_.parent==h.name){break}}}var c=u.frameList;if(f){var p=f.frameList}var v=null;var g=null;var T=null;var y=c.length;for(var m=0;m<y;m++){var D=c[m];i.setFrameTransform(e,a,h,D);D.transform.x-=h.transform.x;D.transform.y-=h.transform.y;D.transform.skewX-=h.transform.skewX;D.transform.skewY-=h.transform.skewY;D.transform.scaleX/=h.transform.scaleX;D.transform.scaleY/=h.transform.scaleY;if(T){var b=D.transform.skewX-T.transform.skewX;if(T.tweenRotate){if(T.tweenRotate>0){if(b<0){D.transform.skewX+=Math.PI*2;D.transform.skewY+=Math.PI*2}if(T.tweenRotate>1){D.transform.skewX+=Math.PI*2*(T.tweenRotate-1);D.transform.skewY+=Math.PI*2*(T.tweenRotate-1)}}else{if(b>0){D.transform.skewX-=Math.PI*2;D.transform.skewY-=Math.PI*2}if(T.tweenRotate<1){D.transform.skewX+=Math.PI*2*(T.tweenRotate+1);D.transform.skewY+=Math.PI*2*(T.tweenRotate+1)}}}else{D.transform.skewX=T.transform.skewX+t.TransformUtil.formatRadian(D.transform.skewX-T.transform.skewX);D.transform.skewY=T.transform.skewY+t.TransformUtil.formatRadian(D.transform.skewY-T.transform.skewY)}}T=D}if(f&&p){y=p.length;for(var m=0;m<y;m++){var A=p[m];if(!f.transformed){if(_){A.zOrder-=_.zOrder}}}f.transformed=true}u.transformed=true}};i.setFrameTransform=function(e,a,n,s){s.transform.copy(s.global);var r=a.getBoneData(n.parent);if(r){var o=e.getTimeline(r.name);if(o){var l=[];var h=[];while(o){l.push(o);h.push(r);r=a.getBoneData(r.parent);if(r){o=e.getTimeline(r.name)}else{o=null}}var u=l.length;var f;var _=new t.Matrix;var m=new t.DBTransform;var d=new t.Matrix;while(u--){o=l[u];r=h[u];i.getTimelineTransform(o,s.position,m,!f);if(!f){f=new t.DBTransform;f.copy(m)}else{m.x+=o.originTransform.x+r.transform.x;m.y+=o.originTransform.y+r.transform.y;m.skewX+=o.originTransform.skewX+r.transform.skewX;m.skewY+=o.originTransform.skewY+r.transform.skewY;m.scaleX*=o.originTransform.scaleX*r.transform.scaleX;m.scaleY*=o.originTransform.scaleY*r.transform.scaleY;t.TransformUtil.transformToMatrix(m,d);d.concat(_);t.TransformUtil.matrixToTransform(d,f,m.scaleX*f.scaleX>=0,m.scaleY*f.scaleY>=0)}t.TransformUtil.transformToMatrix(f,_)}t.TransformUtil.globalToLocal(s.transform,f)}}};i.getTimelineTransform=function(i,e,a,n){var s=i.frameList;var r=s.length;while(r--){var o=s[r];if(o.position<=e&&o.position+o.duration>e){if(r==s.length-1||e==o.position){a.copy(n?o.global:o.transform)}else{var l=o.tweenEasing;var h=(e-o.position)/o.duration;if(l&&l!=10){h=t.MathUtil.getEaseValue(h,l)}var u=s[r+1];var f=n?o.global:o.transform;var _=n?u.global:u.transform;a.x=f.x+(_.x-f.x)*h;a.y=f.y+(_.y-f.y)*h;a.skewX=t.TransformUtil.formatRadian(f.skewX+(_.skewX-f.skewX)*h);a.skewY=t.TransformUtil.formatRadian(f.skewY+(_.skewY-f.skewY)*h);a.scaleX=f.scaleX+(_.scaleX-f.scaleX)*h;a.scaleY=f.scaleY+(_.scaleY-f.scaleY)*h}break}}};i.addHideTimeline=function(t,i,e){if(e===void 0){e=false}var a=i.boneDataList;var n=i.slotDataList;var s=a.length;while(s--){var r=a[s];var o=r.name;if(!t.getTimeline(o)){if(t.hideTimelineNameMap.indexOf(o)<0){t.hideTimelineNameMap.push(o)}}}if(e){s=n.length;var l;var h;while(s--){l=n[s];h=l.name;if(!t.getSlotTimeline(h)){if(t.hideSlotTimelineNameMap.indexOf(h)<0){t.hideSlotTimelineNameMap.push(h)}}}}};return i}();t.DBDataUtil=i})(dragonBones||(dragonBones={}));var dragonBones;(function(t){var i=function(){function t(){}var i=__define,e=t,a=e.prototype;t.getEaseValue=function(i,e){var a=1;if(e>1){a=.5*(1-t.cos(i*Math.PI));e-=1}else if(e>0){a=1-Math.pow(1-i,2)}else if(e<0){e*=-1;a=Math.pow(i,2)}return(a-i)*e+i};t.isNumber=function(t){return typeof t==="number"&&!isNaN(t)};t.sin=function(i){i*=t.RADIAN_TO_ANGLE;var e=Math.floor(i);var a=e+1;var n=t.sinInt(e);var s=t.sinInt(a);return(i-e)*s+(a-i)*n};t.sinInt=function(t){t=t%360;if(t<0){t+=360}if(t<90){return db_sin_map[t]}if(t<180){return db_sin_map[180-t]}if(t<270){return-db_sin_map[t-180]}return-db_sin_map[360-t]};t.cos=function(i){return t.sin(Math.PI/2-i)};t.ANGLE_TO_RADIAN=Math.PI/180;t.RADIAN_TO_ANGLE=180/Math.PI;return t}();t.MathUtil=i})(dragonBones||(dragonBones={}));var db_sin_map={};for(var dbMathIndex=0;dbMathIndex<=90;dbMathIndex++){db_sin_map[dbMathIndex]=Math.sin(dbMathIndex*dragonBones.MathUtil.ANGLE_TO_RADIAN)}var dragonBones;(function(t){var i=function(){function i(){}var e=__define,a=i,n=a.prototype;i.isEqual=function(t,e){if(t>=e){return t-e<=i.ACCURACY}else{return e-t<=i.ACCURACY}};i.globalToLocal=function(t,e){i.transformToMatrix(t,i._helpTransformMatrix);i.transformToMatrix(e,i._helpParentTransformMatrix);i._helpParentTransformMatrix.invert();i._helpTransformMatrix.concat(i._helpParentTransformMatrix);i.matrixToTransform(i._helpTransformMatrix,t,t.scaleX*e.scaleX>=0,t.scaleY*e.scaleY>=0)};i.transformToMatrix=function(i,e){e.a=i.scaleX*t.MathUtil.cos(i.skewY);e.b=i.scaleX*t.MathUtil.sin(i.skewY);e.c=-i.scaleY*t.MathUtil.sin(i.skewX);e.d=i.scaleY*t.MathUtil.cos(i.skewX);e.tx=i.x;e.ty=i.y};i.matrixToTransform=function(t,e,a,n){e.x=t.tx;e.y=t.ty;e.scaleX=Math.sqrt(t.a*t.a+t.b*t.b)*(a?1:-1);e.scaleY=Math.sqrt(t.d*t.d+t.c*t.c)*(n?1:-1);i.tmpSkewXArray[0]=Math.acos(t.d/e.scaleY);i.tmpSkewXArray[1]=-i.tmpSkewXArray[0];i.tmpSkewXArray[2]=Math.asin(-t.c/e.scaleY);i.tmpSkewXArray[3]=i.tmpSkewXArray[2]>=0?Math.PI-i.tmpSkewXArray[2]:i.tmpSkewXArray[2]-Math.PI;if(i.isEqual(i.tmpSkewXArray[0],i.tmpSkewXArray[2])||i.isEqual(i.tmpSkewXArray[0],i.tmpSkewXArray[3])){e.skewX=i.tmpSkewXArray[0]}else{e.skewX=i.tmpSkewXArray[1]}i.tmpSkewYArray[0]=Math.acos(t.a/e.scaleX);i.tmpSkewYArray[1]=-i.tmpSkewYArray[0];i.tmpSkewYArray[2]=Math.asin(t.b/e.scaleX);i.tmpSkewYArray[3]=i.tmpSkewYArray[2]>=0?Math.PI-i.tmpSkewYArray[2]:i.tmpSkewYArray[2]-Math.PI;if(i.isEqual(i.tmpSkewYArray[0],i.tmpSkewYArray[2])||i.isEqual(i.tmpSkewYArray[0],i.tmpSkewYArray[3])){e.skewY=i.tmpSkewYArray[0]}else{e.skewY=i.tmpSkewYArray[1]}};i.applyMatrixToPoint=function(i,e,a){if(a===void 0){a=false}this._helpMatrix.tx=i.x;this._helpMatrix.ty=i.y;this._helpMatrix.concat(e);if(a){return new t.Point(this._helpMatrix.tx,this._helpMatrix.ty)}else{i.x=this._helpMatrix.tx;i.y=this._helpMatrix.ty;return i}};i.formatRadian=function(t){if(t>Math.PI){t-=i.DOUBLE_PI}if(t<-Math.PI){t+=i.DOUBLE_PI}return t};i.normalizeRotation=function(t){t=(t+Math.PI)%(2*Math.PI);t=t>0?t:2*Math.PI+t;return t-Math.PI};i.matrixToTransformPosition=function(t,i){i.x=t.tx;i.y=t.ty};i.matrixToTransformScale=function(t,i,e,a){i.scaleX=Math.sqrt(t.a*t.a+t.b*t.b)*(e?1:-1);i.scaleY=Math.sqrt(t.d*t.d+t.c*t.c)*(a?1:-1)};i.matrixToTransformRotation=function(t,e,a,n){i.tmpSkewXArray[0]=Math.acos(t.d/n);i.tmpSkewXArray[1]=-i.tmpSkewXArray[0];i.tmpSkewXArray[2]=Math.asin(-t.c/n);i.tmpSkewXArray[3]=i.tmpSkewXArray[2]>=0?Math.PI-i.tmpSkewXArray[2]:i.tmpSkewXArray[2]-Math.PI;if(i.isEqual(i.tmpSkewXArray[0],i.tmpSkewXArray[2])||i.isEqual(i.tmpSkewXArray[0],i.tmpSkewXArray[3])){e.skewX=i.tmpSkewXArray[0]}else{e.skewX=i.tmpSkewXArray[1]}i.tmpSkewYArray[0]=Math.acos(t.a/a);i.tmpSkewYArray[1]=-i.tmpSkewYArray[0];i.tmpSkewYArray[2]=Math.asin(t.b/a);i.tmpSkewYArray[3]=i.tmpSkewYArray[2]>=0?Math.PI-i.tmpSkewYArray[2]:i.tmpSkewYArray[2]-Math.PI;if(i.isEqual(i.tmpSkewYArray[0],i.tmpSkewYArray[2])||i.isEqual(i.tmpSkewYArray[0],i.tmpSkewYArray[3])){e.skewY=i.tmpSkewYArray[0]}else{e.skewY=i.tmpSkewYArray[1]}};i.HALF_PI=Math.PI*.5;i.DOUBLE_PI=Math.PI*2;i._helpTransformMatrix=new t.Matrix;i._helpParentTransformMatrix=new t.Matrix;i.tmpSkewXArray=[];i.tmpSkewYArray=[];i.ACCURACY=1e-4;i._helpMatrix=new t.Matrix;return i}();t.TransformUtil=i})(dragonBones||(dragonBones={}));(function(t){function i(){t.BaseFactory.call(this)}__extends(i,t.BaseFactory);i.prototype._generateArmature=function(){return new t.Armature(DisplayObjectContainer.create())};i.prototype._generateSlot=function(){return new t.HolaSlot};i.prototype._generateDisplay=function(t,i,e,a){var n=t.getTexture(i);var s=Bitmap.create(i);s.setTexture(n);if(isNaN(e)||isNaN(a)){var r=t.getFrame(i);if(r!=null){e=r.width/2;a=r.height/2}else{e=s.width/2;a=s.height/2}}s.setAnchorOffset(e,a);return s};i.prototype._generateFastArmature=function(){return new t.FastArmature(DisplayObjectContainer.create())};i.prototype._generateFastSlot=function(){return new t.HolaFastSlot(Bitmap.create())};i.prototype._generateMesh=function(t,i,e,a){if(egret.Capabilities.renderMode=="webgl"){var n=new egret.Mesh;var s=n.$renderNode;n.texture=t.getTexture(i);var r=0,o=0,l=0;for(r=0,l=e.numVertex;r<l;r++){o=r*2;var h=e.vertices[r];s.uvs[o]=h.u;s.uvs[o+1]=h.v;s.vertices[o]=h.x;s.vertices[o+1]=h.y}for(r=0,l=e.triangles.length;r<l;r++){s.indices[r]=e.triangles[r]}a.isMeshEnabled=true;return n}var u=new egret.Bitmap;u.texture=t.getTexture(i);var f=t.getFrame(i);var _=0,m=0;if(f!=null){_=f.width/2;m=f.height/2}else{_=u.width/2;m=u.height/2}u.anchorOffsetX=_;u.anchorOffsetY=m;return u};t.HolaFactory=i})(dragonBones||(dragonBones={}));(function(t){function i(){t.Slot.call(this);this._holaDisplay=null}__extends(i,t.Slot);i.prototype.dispose=function(){if(this._displayList){var i=this._displayList.length;for(var e=0;e<i;e++){var a=this._displayList[e];if(a instanceof t.Armature){a.dispose()}}}t.Slot.prototype.dispose.call(this);this._holaDisplay=null};i.prototype._updateDisplay=function(t){this._holaDisplay=t};i.prototype._getDisplayIndex=function(){if(this._holaDisplay&&this._holaDisplay.parent){return this._holaDisplay.parent.getChildIndex(this._holaDisplay)}return-1};i.prototype._addDisplayToContainer=function(t,i){if(i===void 0){i=-1}if(this._holaDisplay&&t){if(i<0){t.addChild(this._holaDisplay)}else{i=Math.min(i,t.getChildCount());t.addChildAt(this._holaDisplay,i)}}};i.prototype._removeDisplayFromContainer=function(){if(this._holaDisplay){var t=this._holaDisplay.getParent();if(t){t.removeChild(this._holaDisplay)}}};i.prototype._updateTransform=function(){if(this._holaDisplay){this._holaDisplay.setTransform(this._globalTransformMatrix)}};i.prototype._updateDisplayVisible=function(t){if(this._holaDisplay&&this._parent){this._holaDisplay.setVisible(this._parent._visible&&this._visible&&t)}};i.prototype._updateDisplayColor=function(i,e,a,n,s,r,o,l,h){if(h===void 0){h=false}t.Slot.prototype._updateDisplayColor.call(this,i,e,a,n,s,r,o,l,h);if(this._holaDisplay){this._holaDisplay.setAlpha(s)}};i.prototype._updateDisplayBlendMode=function(t){if(this._holaDisplay&&t){this._holaDisplay.setBlend(t)}};i.prototype._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._offset.scaleX;this._global.scaleY=this._origin.scaleY*this._offset.scaleY;this._global.skewX=this._origin.skewX+this._offset.skewX;this._global.skewY=this._origin.skewY+this._offset.skewY;this._global.x=this._origin.x+this._offset.x+this._parent._tweenPivot.x;this._global.y=this._origin.y+this._offset.y+this._parent._tweenPivot.y;if(this._displayDataList&&this._currentDisplayIndex>=0&&this._displayDataList[this._currentDisplayIndex]&&t.HolaTextureAtlas.rotatedDic[this._displayDataList[this._currentDisplayIndex].name]==1){this._global.skewX-=1.57;this._global.skewY-=1.57}};i.prototype._updateMesh=function(){if(!this._meshData||!this.isMeshEnabled){return}var t=this._holaDisplay;var i=t.$renderNode;var e=0,a=0,n=0;var s=0,r=0;if(this._meshData.skinned){var o=this._armature.getBones(false);var l=0;for(e=0,n=this._meshData.numVertex;e<n;e++){var h=this._meshData.vertexBones[e];var u=0;var f=0;var _=0;a=e*2;s=0;r=0;for(var m=0,d=h.indices.length;m<d;++m){var c=h.indices[m];var p=this._meshBones[c];var v=p._globalTransformMatrix;var g=h.vertices[u];var T=Number(h.weights[u]);if(!this._ffdVertices||l<this._ffdOffset||l>=this._ffdVertices.length){f=g.x;_=g.y}else{f=g.x+this._ffdVertices[l];_=g.y+this._ffdVertices[l+1]}s+=(v.a*f+v.c*_+v.tx)*T;r+=(v.b*f+v.d*_+v.ty)*T;u++;l+=2}i.vertices[a]=s;i.vertices[a+1]=r}t.$updateVertices();t.$invalidateTransform()}else if(this._ffdChanged){this._ffdChanged=false;for(e=0,n=this._meshData.numVertex;e<n;++e){var y=this._meshData.vertices[e];a=e*2;if(!this._ffdVertices||a<this._ffdOffset||a>=this._ffdVertices.length){s=y.x;r=y.y}else{s=Number(y.x)+this._ffdVertices[a-this._ffdOffset];r=Number(y.y)+this._ffdVertices[a-this._ffdOffset+1]}i.vertices[a]=s;i.vertices[a+1]=r}t.$updateVertices();t.$invalidateTransform()}};t.HolaSlot=i})(dragonBones||(dragonBones={}));(function(t){function i(i){t.FastSlot.call(this,i);this._holaDisplay=null}__extends(i,t.FastSlot);i.prototype.dispose=function(){if(this._displayList){var i=this._displayList.length;for(var e=0;e<i;e++){var a=this._displayList[e];if(a instanceof t.FastArmature){a.dispose()}}}t.FastSlot.prototype.dispose.call(this);this._holaDisplay=null};i.prototype._updateDisplay=function(t){this._holaDisplay=t};i.prototype._addDisplay=function(){var t=this.armature.display;t.addChild(this._holaDisplay)};i.prototype._replaceDisplay=function(t){var i=this.armature.display;var e=t;i.addChild(this._holaDisplay);i.swapChildren(this._holaDisplay,e);i.removeChild(e)};i.prototype._removeDisplay=function(){this._holaDisplay.parent.removeChild(this._holaDisplay)};i.prototype._getDisplayIndex=function(){if(this._holaDisplay&&this._holaDisplay.parent){return this._holaDisplay.parent.getChildIndex(this._holaDisplay)}return-1};i.prototype._addDisplayToContainer=function(t,i){if(i===void 0){i=-1}if(!this._holaDisplay){this._holaDisplay=this._rawDisplay}if(this._holaDisplay&&t){if(i<0){t.addChild(this._holaDisplay)}else{i=Math.min(i,t.getChildCount());t.addChildAt(this._holaDisplay,i)}}};i.prototype._removeDisplayFromContainer=function(){if(this._holaDisplay&&this._holaDisplay.parent){this._holaDisplay.parent.removeChild(this._holaDisplay)}};i.prototype._updateTransform=function(){if(this._displayIndex>=0){this._holaDisplay.setTransform(this._globalTransformMatrix)}};i.prototype._updateDisplayVisible=function(t){if(this._holaDisplay&&this._parent){this._holaDisplay.visible=this._parent._visible&&this._visible&&t}};i.prototype._updateDisplayColor=function(i,e,a,n,s,r,o,l,h){if(h===void 0){h=false}t.FastSlot.prototype._updateDisplayColor.call(this,i,e,a,n,s,r,o,l,h);if(this._holaDisplay){this._holaDisplay.setAlpha(s)}};i.prototype._updateFrame=function(){var t=this._displayDataList.length;var i=this._displayIndex<t?this._displayIndex:t-1;var e=i<0?null:this._displayDataList[i][1];var a=this._holaDisplay;if(e){var n=e.textureAtlas;var s=this.displayDataList[this._displayIndex][0];var r=e.frame||e.region;var o=e.rotated?r.height:r.width;var l=e.rotated?r.width:r.height;var h=s.pivot.x==s.pivot.x?s.pivot.x:o*.5;var u=s.pivot.y==s.pivot.y?s.pivot.y:l*.5;if(!a.visible){a.setVisible(true)}a.setTexture(n.getTexture(s.name));a.setAnchorOffset(h,u)}else{if(a.visible){a.setVisible(false)}a.setTexture(null)}};i.prototype._updateDisplayBlendMode=function(t){if(this._holaDisplay&&t){this._holaDisplay.blendMode=t}};t.HolaFastSlot=i})(dragonBones||(dragonBones={}));function SpriteSheet(t,i){this.srcX=0;this.srcY=0;this.scale=i;this.textureMap={};this.srcTexture=t;this.srcWidth=t.width;this.srcHeight=t.height}SpriteSheet.prototype.getTexture=function(t){return this.srcTexture[t]};SpriteSheet.prototype.createTexture=function(t,i,e,a,n,s,r,o,l){var h;if(s===void 0||s==0){s=0}if(r===void 0||r==0){r=0}if(o===undefined){o=s+a}if(l===undefined){l=r+n}h=Object.create(null);h.sx=this.srcX+i;h.sy=this.srcY+e;h.sw=a*this.scale;h.sh=n*this.scale;h.dx=s;h.dy=r;h.dw=o*this.scale;h.dh=l*this.scale;h.name=t;h.texture=this.srcTexture;this.textureMap[t]=h;return h};SpriteSheet.prototype.dispose=function(){if(this.texture){this.texture.dispose()}};function HolaTextureAtlas(t,i,e){if(e===void 0){e=1}this.scale=e;this.texture=t;this.textureDatas={};this.textureAtlasRawData=i;this.name=i[dragonBones.ConstValues.A_NAME];this.parseData(i);this.spriteSheet=new SpriteSheet(t,e)}HolaTextureAtlas.prototype.parseData=function(t){this.textureDatas=dragonBones.DataParser.parseTextureAtlasData(t,this.scale)};HolaTextureAtlas.prototype.getTexture=function(t){var i=this.spriteSheet.getTexture(t);if(!i){var e=this.textureDatas[t];if(e){var a=e.frame;if(a){i=this.spriteSheet.createTexture(t,e.region.x,e.region.y,e.region.width,e.region.height,-a.x,-a.y,a.width,a.height)}else{i=this.spriteSheet.createTexture(t,e.region.x,e.region.y,e.region.width,e.region.height)}if(e.rotated){HolaTextureAtlas.rotatedDic[t]=1}}}return i};HolaTextureAtlas.prototype.dispose=function(){this.texture=null};HolaTextureAtlas.prototype.getRegion=function(t){var i=this.textureDatas[t];if(i&&i instanceof dragonBones.TextureData){return i.region}return null};HolaTextureAtlas.prototype.getFrame=function(t){var i=this.textureDatas[t];if(i&&i instanceof dragonBones.TextureData){return i.frame}return null};HolaTextureAtlas.prototype.getTextureData=function(t){return this.textureDatas[t]};HolaTextureAtlas.rotatedDic={};dragonBones=dragonBones||{};dragonBones.HolaTextureAtlas=HolaTextureAtlas;function UIDragonBones(){return}UIDragonBones.prototype=new UISkeletonAnimation;UIDragonBones.prototype.isUIDragonBones=true;UIDragonBones.prototype.initUIDragonBones=UISkeletonAnimation.prototype.initUISkeletonAnimation;UIDragonBones.prototype.pause=function(){if(this.armature){this.armature.animation.stop()}return this};UIDragonBones.prototype.resume=function(){if(this.armature){this.armature.animation.play()}return this};UIDragonBones.prototype.getEnableCache=function(){return!!this.enableCache};UIDragonBones.prototype.setEnableCache=function(t){this.enableCache=t;return this};UIDragonBones.prototype.setupLoop=function(t,i,e,a){var n=this;function s(t){if(!t||!t.animationState||t.armature!==n._armature){return}if(n.onOneCycle){try{n.onOneCycle()}catch(t){console.debug("onOneCycle:",t)}}}function r(){if(n.onDone){try{n.onDone()}catch(t){console.debug("onDone:",t)}}}if(!isNaN(i)){this.onDone=e;this.onOneCycle=a;this._armature.addEventListener(dragonBones.AnimationEvent.COMPLETE,r);this._armature.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,s)}};UIDragonBones.prototype.doPlay=UIDragonBones.prototype.gotoAndPlay=function(t,i,e,a,n,s){this.animationName=t;if(this.armature){var r=this.armature;if(t&&r.animation.animationList.indexOf(t)>=0){if(e||a||i){i=isNaN(i)?Number.MAX_VALUE:i;this.setupLoop.apply(r.animation,arguments)}var o=!n?0:undefined;r.animation.gotoAndPlay(t,o,s,i)}else if(this.animations&&t){this.animate(t)}else{console.log("Unknow animation name: "+t)}}return this};UIDragonBones.prototype.destroyArmature=function(){if(this.armature){this.armature=null}return};UISkeletonAnimation.prototype.destroy=function(){this.destroyArmature();UIElement.prototype.destroy.call(this);return};UISkeletonAnimation.prototype.getSlotRect=function(t){if(!this.armature){return null}var i=this.armature._slotList;for(var e=0;e<i.length;e++){var a=i[e];if(a.name===t){var n=a.getDisplay();return n.textureAtlasRect}}return null};UISkeletonAnimation.prototype.replaceSlotImage=function(t,i,e){if(!this.armature){return this}if(e&&e.w){e.width=e.w}if(e&&e.h){e.height=e.h}var a=this.armature._slotList;for(var n=0;n<a.length;n++){var s=a[n];if(s.name===t){s.image=i;s.imageRect=e}}return};UIDragonBones.prototype.advanceTime=function(){var t=this;var i=this.armature;i.advanceTime=function(){if(t.isVisible()){dragonBones.Armature.prototype.advanceTime.apply(this,arguments)}};return this};UIDragonBones.prototype.createArmature=function(t,i,e){if(this.armature){this.armature=null}var a=null;if(!MainContext.instance.factory){a=new dragonBones.HolaFactory;MainContext.instance.factory=a}else{a=MainContext.instance.factory}if(!a.getSkeletonData(e.name)){a.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(e))}if(!a.getTextureAtlas(i.name)){a.addTextureAtlas(new dragonBones.HolaTextureAtlas(t,i))}if(this.enableCache){var n=a.buildFastArmature(e.armature[0].name,e.name);n.enableAnimationCache(24)}else{var n=a.buildArmature(e.armature[0].name,e.name)}this.armature=n;this.animationNames=n.animation.animationList;this.animationName=this.animationNames.indexOf(this.animationName)>-1?this.animationName:this.animationNames[0]};UIDragonBones.prototype.getDuration=UIDragonBones.prototype.getAnimationDuration=function(t){if(!this.armature)return 0;t=t||this.animationName;var i=this.armature.animation.animationList.indexOf(t);if(i>-1){return this.armature.animation.animationDataList[i].duration}return 0};UIDragonBones.prototype.paintSelfOnly=function(t){if(this.armature){if(!this.isPaused()){var i=t.timeStep*this.animTimeScale/1e3;this.armature.advanceTime(i)}var e=this.w>>1;var a=this.h>>1;t.save();var n=this.animationScaleX===1?1.01:this.animationScaleX;var s=this.animationScaleY===1?1.01:this.animationScaleY;MainContext.instance.setObjectContainer(this.armature.display);MainContext.instance.setScale(n,s);
MainContext.instance.setPosition(e,a);MainContext.instance.renderLoop(t);t.restore();t.needRedraw++}return};function UISkeletonAnimationCreator(t){var i=[t,t,null,1];ShapeCreator.apply(this,i);this.createShape=function(t){var i=new UIDragonBones;return i.initUIDragonBones(this.type,200,200)};return}ShapeFactoryGet().addShapeCreator(new UISkeletonAnimationCreator("ui-dragonbones"));ShapeFactoryGet().addShapeCreator(new UISkeletonAnimationCreator("ui-skeleton-animation"));
